/*! For license information please see ns-order-preview-popup.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{0:function(e,t,n){"use strict";n.r(t),n.d(t,"nsHttpClient",(function(){return T})),n.d(t,"nsSnackBar",(function(){return A})),n.d(t,"nsEvent",(function(){return E})),n.d(t,"nsState",(function(){return z})),n.d(t,"nsScreen",(function(){return F})),n.d(t,"nsUrl",(function(){return P}));var i=n(158),r=n(150),s=n(151),o=n(148),a=n(10),u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},c=function(){function e(){void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}return e.prototype.show=function(e,t,n){var i=this;return void 0===n&&(n={duration:3e3,type:"info"}),a.Observable.create((function(r){var s=i.__createSnack({message:e,label:t,type:n.type}),o=s.buttonNode,a=(s.textNode,s.snackWrapper,s.sampleSnack);o.addEventListener("click",(function(e){r.onNext(o),r.onCompleted(),a.remove()})),i.__startTimer(n.duration,a)}))},e.prototype.error=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n={duration:3e3,type:"error"}),this.show(e,t,u(u({},n),{type:"error"}))},e.prototype.success=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n={duration:3e3,type:"success"}),this.show(e,t,u(u({},n),{type:"success"}))},e.prototype.info=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n={duration:3e3,type:"info"}),this.show(e,t,u(u({},n),{type:"info"}))},e.prototype.__startTimer=function(e,t){var n,i=function(){e>0&&!1!==e&&(n=setTimeout((function(){t.remove()}),e))};t.addEventListener("mouseenter",(function(){clearTimeout(n)})),t.addEventListener("mouseleave",(function(){i()})),i()},e.prototype.__createSnack=function(e){var t=e.message,n=e.label,i=e.type,r=void 0===i?"info":i,s=document.getElementById("snack-wrapper")||document.createElement("div"),o=document.createElement("div"),a=document.createElement("p"),u=document.createElement("div"),c=document.createElement("button"),l="",d="";switch(r){case"info":l="text-white hover:bg-blue-400 bg-blue-500",d="bg-gray-900 text-white";break;case"error":l="text-red-700 hover:bg-white bg-white",d="bg-red-500 text-white";break;case"success":l="text-green-700 hover:bg-white bg-white",d="bg-green-500 text-white"}return a.textContent=t,n&&(c.textContent=n,c.setAttribute("class","px-3 py-2 shadow rounded-lg font-bold "+l),u.appendChild(c)),o.appendChild(a),o.appendChild(u),o.setAttribute("class","md:rounded-lg py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center "+d),s.setAttribute("id","snack-wrapper"),s.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),s.appendChild(o),document.body.appendChild(s),{snackWrapper:s,sampleSnack:o,buttonsWrapper:u,buttonNode:c,textNode:a}},e}(),l=n(153),d=n(6),f=function(){return(f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},p=function(){function e(){this._subject=new l.a}return e.prototype.defineClient=function(e){this._client=e},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this._request("post",e,t,n)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this._request("get",e,void 0,t)},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this._request("delete",e,void 0,t)},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this._request("put",e,t,n)},Object.defineProperty(e.prototype,"response",{get:function(){return this._lastRequestData},enumerable:!1,configurable:!0}),e.prototype._request=function(e,t,n,i){var r=this;return void 0===n&&(n={}),void 0===i&&(i={}),t=t.replace(/\/$/,""),this._subject.next({identifier:"async.start",url:t,data:n}),new d.a((function(s){r._client[e](t,n,f(f({},r._client.defaults[e]),i)).then((function(e){r._lastRequestData=e,s.next(e.data),s.complete(),r._subject.next({identifier:"async.stop"})})).catch((function(e){s.error(e.response.data),r._subject.next({identifier:"async.stop"})}))}))},e.prototype.subject=function(){return this._subject},e.prototype.emit=function(e){var t=e.identifier,n=e.value;this._subject.next({identifier:t,value:n})},e}(),h=function(){function e(){this._subject=new a.Subject}return e.prototype.subject=function(){return this._subject},e.prototype.emit=function(e){var t=e.identifier,n=e.value;this._subject.onNext({identifier:t,value:n})},e}(),v=n(211),m=function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},b=function(){function e(e){var t=this;this.state={},this.behaviorState=new v.a({}),this.behaviorState.subscribe((function(e){t.state=e})),this.setState(e)}return e.prototype.setState=function(e){this.behaviorState.next(m(m({},this.state),{object:e}))},e}(),y=n(212),g=n(7),w=n(2),x=n(5),_=n(13),j=n(1),k=n.n(j),C=n(8),S=function(){function e(){this.url=ns.base_url}return e.prototype.get=function(e){return this.url+e},e}(),O=n(12);k.a.use(o.default),window._=i,window.CharJS=s,window.Vue=k.a,window.moment=w,window.Axios=r,window.VueRouter=o.default,window.SnackBar=c,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0;var E=new h,T=new p,A=new c,P=new S,F=new(function(){function e(){var e=this;this.breakpoint="",this.detectScreenSizes(),Object(y.a)(window,"resize").subscribe((function(t){return e.detectScreenSizes()}))}return e.prototype.detectScreenSizes=function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}},e}()),z=new b({sidebar:["xs","sm","md"].includes(F.breakpoint)?"hidden":"visible"});T.defineClient(r),window.nsEvent=E,window.nsHttpClient=T,window.nsSnackBar=A,window.nsCurrency=O.b,window.nsAbbreviate=O.a,window.nsState=z,window.nsUrl=P,window.nsScreen=F,window.ChartJS=s,window.EventEmitter=h,window.Popup=x.a,window.RxJS=g,window.Media=_.a,window.FormValidation=C.a},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return s.a})),n.d(t,"a",(function(){return r}));var i=n(1),r=n.n(i).a.filter("abbreviate",(function(e){var t=e;if(e>=1e3){for(var n,i=Math.floor((""+e).length/3),r=2;r>=1;r--){if(((n=parseFloat((0!=i?e/Math.pow(1e3,i):e).toPrecision(r)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}n%1!=0&&(n=n.toFixed(1)),t=n+["","k","m","b","t"][i]}return t})),s=n(149)},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(5),r=n(157).default,s=function(){function e(e,t){this.field=e,this.primarySelector=t}return e.prototype.open=function(){this.popup=new i.a({popupClass:"w-4/5 h-4/5-screen shadow-lg bg-white"}),this.popup.open(r)},e}()},14:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),r=n.n(i).a.filter("currency",(function(e){return new Intl.NumberFormat("before"===ns.currency.ns_currency_position?"en-US":"fr-FR",{currency:ns.currency.ns_currency_iso||"USD",minimumFractionDigits:ns.currency.ns_currency_precision,style:"currency",signDisplay:"auto"}).formatToParts(e).map((function(e){var t=e.type,n=e.value;switch(t){case"minusSign":return"-";case"decimal":return ns.currency.ns_currency_decimal_separator||".";case"group":return ns.currency.ns_currency_thousand_separator||",";default:return n}})).join("")}))},155:function(e,t){var n,i,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},156:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,s,o,a,u=1,c={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){h(e.data)},i=function(e){s.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,i(u),u++},f.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(14),n(155))},157:function(e,t,n){"use strict";n.r(t);var i=n(0),r={name:"ns-media",props:["popup"],components:{VueUpload:n(160)},data:function(){return{pages:[{label:"Upload",name:"upload",selected:!1},{label:"Gallery",name:"gallery",selected:!0}],resources:[],response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){var e=this;this.popup&&this.popup.event.subscribe((function(t){"click-overlay"===t.event&&e.popup.close(),"press-esc"===t.event&&e.popup.close()}));var t=this.pages.filter((function(e){return"gallery"===e.name}))[0];this.select(t)},watch:{files:function(){this.files.filter((function(e){return"0.00"===e.progress})).length>0&&(this.$refs.upload.active=!0)}},computed:{currentPage:function(){return this.pages.filter((function(e){return e.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(e){return e.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(e){return e.selected}))[0]},csrf:function(){return ns.authentication.csrf}},methods:{cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(e){return e.selected=!1}))},deleteSelected:function(){var e=this;if(confirm("Delete selected resources ?"))return i.nsHttpClient.post("/api/nexopos/v4/medias/bulk-delete",{ids:this.response.data.filter((function(e){return e.selected})).map((function(e){return e.id}))}).subscribe((function(t){i.nsSnackBar.success(t.message).subscribe(),e.loadGallery()}),(function(e){i.nsSnackBar.error(e.message).subscribe()}))},select:function(e){this.pages.forEach((function(e){return e.selected=!1})),e.selected=!0,"gallery"===e.name&&this.loadGallery()},loadGallery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=null===t?this.queryPage:t,this.queryPage=t,i.nsHttpClient.get("/api/nexopos/v4/medias?page=".concat(t)).subscribe((function(t){t.data.forEach((function(e){return e.selected=!1})),e.response=t}))},useSelectedEntries:function(){this.popup.event.next({event:"use-selected",value:this.response.data.filter((function(e){return e.selected}))})},selectResource:function(e){var t=this;this.bulkSelect||this.response.data.forEach((function(n,i){i!==t.response.data.indexOf(e)&&(n.selected=!1)})),e.selected=!e.selected}}},s=n(3),o=Object(s.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex bg-white shadow-xl overflow-hidden",class:e.$popup?"w-6/7-screen h-6/7-screen":"w-full h-full"},[n("div",{staticClass:"sidebar w-48 bg-gray-200 h-full flex-shrink-0"},[n("h3",{staticClass:"text-xl font-bold text-gray-800 my-4 text-center"},[e._v("Medias Manager")]),e._v(" "),n("ul",e._l(e.pages,(function(t,i){return n("li",{key:i,staticClass:"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer",class:t.selected?"bg-white border-blue-400":"border-transparent",on:{click:function(n){return e.select(t)}}},[e._v(e._s(t.label))])})),0)]),e._v(" "),"upload"===e.currentPage.name?n("div",{staticClass:"content w-full overflow-hidden flex"},[n("vue-upload",{ref:"upload",staticClass:" flex-auto flex bg-white shadow",attrs:{drop:!0,multiple:!0,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":e.csrf},accept:"image/*","post-action":"/api/nexopos/v4/medias"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[n("div",{staticClass:"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center"},[n("h3",{staticClass:"text-3xl font-bold text-gray-600 mb-4"},[e._v("Click Here Or Drop Your File To Upload")]),e._v(" "),n("div",{staticClass:"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2"},[n("ul",e._l(e.files,(function(t,i){return n("li",{key:i,staticClass:"p-2 mb-2 shadow bg-white flex items-center justify-between rounded"},[n("span",[e._v(e._s(t.name))]),e._v(" "),n("span",{staticClass:"rounded bg-blue-400 flex items-center justify-center text-xs p-2"},[e._v(e._s(t.progress)+"%")])])})),0)])])])],1):e._e(),e._v(" "),"gallery"===e.currentPage.name?n("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[e.popup?n("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[n("div"),e._v(" "),n("div",[n("button",{staticClass:"rounded-full flex items-center justify-center h-10 w-10 bg-white shadow text-red-400 hover:shadow-md hover:bg-red-400 hover:text-white",on:{click:function(t){return e.popup.close()}}},[n("i",{staticClass:"las la-times-circle text-3xl"})])])]):e._e(),e._v(" "),n("div",{staticClass:"flex flex-auto overflow-hidden"},[n("div",{staticClass:"content flex flex-auto flex-col overflow-y-auto",attrs:{id:"grid"}},[n("div",{staticClass:"flex flex-auto bg-white shadow"},[n("div",{staticClass:"p-2 flex overflow-x-auto flex-wrap"},e._l(e.response.data,(function(t,i){return n("div",{key:i,staticClass:"flex -m-2 flex-wrap"},[n("div",{staticClass:"p-2"},[n("div",{staticClass:"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:t.selected?"shadow-outline":"",on:{click:function(n){return e.selectResource(t)}}},[n("img",{staticClass:"object-cover h-full",attrs:{src:t.sizes.thumb,alt:t.name}})])])])})),0),e._v(" "),0===e.response.data.length?n("div",{staticClass:"flex flex-auto items-center justify-center"},[n("h3",{staticClass:"text-3xl text-gray-700 font-bold"},[e._v("Nothing has already been uploaded")])]):e._e()])]),e._v(" "),!e.bulkSelect&&e.hasOneSelected?n("div",{staticClass:"w-64 flex-shrink-0 bg-gray-200",attrs:{id:"preview"}},[n("div",{staticClass:"h-64 bg-gray-600 flex items-center justify-center"},[n("img",{attrs:{src:e.selectedResource.sizes.thumb,alt:e.selectedResource.name}})]),e._v(" "),n("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[n("p",{staticClass:"flex flex-col mb-2"},[n("strong",{staticClass:"font-bold block"},[e._v("File Name: ")]),n("span",[e._v(e._s(e.selectedResource.name))])]),e._v(" "),n("p",{staticClass:"flex flex-col mb-2"},[n("strong",{staticClass:"font-bold block"},[e._v("Uploaded At:")]),n("span",[e._v(e._s(e.selectedResource.created_at))])]),e._v(" "),n("p",{staticClass:"flex flex-col mb-2"},[n("strong",{staticClass:"font-bold block"},[e._v("By :")]),n("span",[e._v(e._s(e.selectedResource.user.username))])])])]):e._e()]),e._v(" "),n("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[n("div",{staticClass:"flex -mx-2 flex-shrink-0"},[n("div",{staticClass:"px-2 flex-shrink-0 flex"},[n("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[e.bulkSelect?n("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){return e.cancelBulkSelect()}}},[n("i",{staticClass:"las la-times"})]):e._e(),e._v(" "),e.hasOneSelected&&!e.bulkSelect?n("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){e.bulkSelect=!0}}},[n("i",{staticClass:"las la-check-circle"})]):e._e(),e._v(" "),e.hasOneSelected?n("button",{staticClass:"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3",on:{click:function(t){return e.deleteSelected()}}},[n("i",{staticClass:"las la-trash"})]):e._e()])])]),e._v(" "),n("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[n("div",{staticClass:"px-2"},[n("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[n("button",{staticClass:"p-2",class:1===e.response.current_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:1===e.response.current_page},on:{click:function(t){return e.loadGallery(e.response.current_page-1)}}},[e._v("Previous")]),e._v(" "),n("hr",{staticClass:"border-r border-gray-700"}),e._v(" "),n("button",{staticClass:"p-2",class:e.response.current_page===e.response.last_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:e.response.current_page===e.response.last_page},on:{click:function(t){return e.loadGallery(e.response.current_page+1)}}},[e._v("Next")])])]),e._v(" "),e.popup&&e.hasOneSelected?n("div",{staticClass:"px-2"},[n("button",{staticClass:"rounded shadow p-2 bg-blue-400 text-white text-sm",on:{click:function(t){return e.useSelectedEntries()}}},[e._v("Use Selected")])]):e._e()])])]):e._e()])}),[],!1,null,null,null);t.default=o.exports},160:function(e,t,n){e.exports=function(){"use strict";var e=function(e){var t=new XMLHttpRequest;return t.open(e.method||"GET",e.url),t.responseType="json",e.headers&&Object.keys(e.headers).forEach((function(n){t.setRequestHeader(n,e.headers[n])})),t};function t(t){return function(e,t){return new Promise((function(n,i){e.onload=function(){if(e.status>=200&&e.status<300){var t;try{t=JSON.parse(e.response)}catch(n){t=e.response}n(t)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(JSON.stringify(t))}))}(e(t),t.body)}var n,i,r,s,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.file=e,this.options=t}return a(n,[{key:"createChunks",value:function(){this.chunks=[];for(var e=0,t=this.chunkSize;e<this.fileSize;)this.chunks.push({blob:this.file.file.slice(e,t),startOffset:e,active:!1,retries:this.maxRetries}),t=(e=t)+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach((function(e){e.xhr.abort(),e.active=!1}))}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),this.start(),this.promise}},{key:"start",value:function(){var e=this;t({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then((function(t){if("success"!==t.status)return e.file.response=t,e.reject("server");e.sessionId=t.data.session_id,e.chunkSize=t.data.end_offset,e.createChunks(),e.startChunking()})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startChunking",value:function(){for(var e=0;e<this.maxActiveChunks;e++)this.uploadNextChunk()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(0===this.chunksUploading.length)return this.finish()}}},{key:"uploadChunk",value:function(t){var n=this;t.progress=0,t.active=!0,this.updateFileProgress(),t.xhr=e({method:"POST",headers:this.headers,url:this.action}),t.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(t.progress=Math.round(e.loaded/e.total*100))}),!1),function(e,t){var n=new FormData;for(var i in t)n.append(i,t[i]);return new Promise((function(t,i){e.onload=function(){if(e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.response)}catch(t){n=e.response}t(n)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(n)}))}(t.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:t.startOffset,chunk:t.blob})).then((function(e){if(t.active=!1,"success"===e.status)t.uploaded=!0;else if(t.retries--<=0)return n.stopChunks(),n.reject("upload");n.uploadNextChunk()})).catch((function(){if(t.active=!1,t.retries--<=0)return n.stopChunks(),n.reject("upload");n.uploadNextChunk()}))}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),t({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then((function(t){if(e.file.response=t,"success"!==t.status)return e.reject("server");e.resolve(t)})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,t=this.chunksUploaded.length/this.chunks.length*100,n=this.chunksUploading.reduce((function(t,n){return t+(0|n.progress)/e.chunks.length}),0);return Math.min(t+n,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter((function(e){return!e.active&&!e.uploaded}))}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter((function(e){return!!e.xhr&&!!e.active}))}},{key:"chunksUploaded",get:function(){return this.chunks.filter((function(e){return!!e.uploaded}))}}]),n}(),c=(n={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,capture:e.$parent.capture,disabled:e.$parent.disabled,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},staticRenderFns:[]},r=void 0,s=!1,(o=("function"==typeof(i={methods:{change:function(e){this.$parent.addInputFile(e.target),e.target.files?(e.target.value="",e.target.files.length&&!/safari/i.test(navigator.userAgent)&&(e.target.type="",e.target.type="file")):(this.$destroy(),new this.constructor({parent:this.$parent,el:this.$el}))}}})?i.options:i)||{}).render||(o.render=n.render,o.staticRenderFns=n.staticRenderFns,o._compiled=!0,s&&(o.functional=!0)),o._scopeId=r,o),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:u},h={components:{InputFile:c},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return p}}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drag:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var e=document.createElement("input");if(e.type="file",e.multiple=!0,window.FormData&&e.files?("boolean"!=typeof e.webkitdirectory&&"boolean"!=typeof e.directory||(this.features.directory=!0),this.features.html5&&void 0!==e.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var t=0;t<this.files.length;t++){var n=this.files[t];this.maps[n.id]=n}this.$nextTick((function(){this.$parent&&this.$parent.$forceUpdate(),this.watchDrop(this.drop)}))},beforeDestroy:function(){this.destroy=!0,this.active=!1},computed:{uploaded:function(){for(var e=void 0,t=0;t<this.files.length;t++)if((e=this.files[t]).fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(p,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var n=0;n<this.files.length;n++){var i=this.files[n];this.maps[i.id]=i}for(var r in this.maps){var s=this.maps[r],o=t[r];s!==o&&this.emitFile(s,o)}for(var a in t)this.maps[a]||this.emitFile(void 0,t[a])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var t=0;t<e.length;t++)this.emitFile(void 0,e[t])}return!0},get:function(e){return!!e&&("object"===(void 0===e?"undefined":d(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,n=e,i=n instanceof Array;i||(n=[n]);for(var r=[],s=0;s<n.length;s++){var o=n[s];this.features.html5&&o instanceof Blob&&(o={file:o,size:o.size,name:o.webkitRelativePath||o.relativePath||o.name||"unknown",type:o.type});var a=!1;if(!1===o.fileObject||(o.fileObject||"undefined"!=typeof Element&&o.el instanceof Element||"undefined"!=typeof Blob&&o.file instanceof Blob)&&(a=!0),a&&((o=l({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},o,{response:{},progress:"0.00",speed:0})).data=l({},this.data,o.data?o.data:{}),o.headers=l({},this.headers,o.headers?o.headers:{})),o.id||(o.id=Math.random().toString(36).substr(2)),!this.emitFilter(o,void 0)){if(this.maximum>1&&r.length+this.files.length>=this.maximum)break;if(r.push(o),1===this.maximum)break}}if(!r.length)return!1;1===this.maximum&&this.clear();var u=void 0;if(!0===t||0===t)u=r.concat(this.files);else if(t){var c;(c=u=this.files.concat([])).splice.apply(c,[t,0].concat(r))}else u=this.files.concat(r);this.files=u;for(var d=0;d<r.length;d++){var f=r[d];this.maps[f.id]=f}this.emitInput();for(var p=0;p<r.length;p++)this.emitFile(r[p],void 0);return i?r:r[0]},addInputFile:function(e){var t=[];if(e.files)for(var n=0;n<e.files.length;n++){var i=e.files[n];t.push({size:i.size,name:i.webkitRelativePath||i.relativePath||i.name,type:i.type,file:i})}else{var r=e.value.replace(/\\/g,"/").split("/");delete e.__vuex__,t.push({name:r[r.length-1],el:e})}return this.add(t)},addDataTransfer:function(e){var t=this,n=[];if(e.items&&e.items.length){for(var i=[],r=0;r<e.items.length;r++){var s=e.items[r];(s=s.getAsEntry?s.getAsEntry()||s.getAsFile():s.webkitGetAsEntry&&s.webkitGetAsEntry()||s.getAsFile())&&i.push(s)}return new Promise((function(e,r){!function r(s){var o=i[s];if(!o||t.maximum>0&&n.length>=t.maximum)return e(t.add(n));t.getEntry(o).then((function(e){n.push.apply(n,f(e)),r(s+1)}))}(0)}))}if(e.files.length){for(var o=0;o<e.files.length&&(n.push(e.files[o]),!(this.maximum>0&&n.length>=this.maximum));o++);return Promise.resolve(this.add(n))}return Promise.resolve([])},getEntry:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(i,r){if(e.isFile)e.file((function(e){i([{size:e.size,name:n+e.name,type:e.type,file:e}])}));else if(e.isDirectory&&t.dropDirectory){var s=[],o=e.createReader();!function r(){o.readEntries((function(o){!function a(u){return!o[u]&&0===u||t.maximum>0&&s.length>=t.maximum?i(s):o[u]?void t.getEntry(o[u],n+e.name+"/").then((function(e){s.push.apply(s,f(e)),a(u+1)})):r()}(0)}))}()}else i([])}))},replace:function(e,t){var n=this.get(e),i=this.get(t);if(!n||!i||n===i)return!1;var r=this.files.concat([]),s=r.indexOf(n),o=r.indexOf(i);return-1!==s&&-1!==o&&(r[s]=i,r[o]=n,this.files=r,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var n=this.files.concat([]),i=n.indexOf(t);if(-1===i)return console.error("remove",t),!1;n.splice(i,1),this.files=n,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,t){var n=this.get(e);if(n){var i=l({},n,t);if(!n.fileObject||!n.active||i.active||i.error||i.success||(i.error="abort"),this.emitFilter(i,n))return!1;var r=this.files.concat([]),s=r.indexOf(n);return-1===s?(console.error("update",n),!1):(r.splice(s,1,i),this.files=r,delete this.maps[n.id],this.maps[i.id]=i,this.emitInput(),this.emitFile(i,n),i)}return!1},emitFilter:function(e,t){var n=!1;return this.$emit("input-filter",e,t,(function(){return n=!0})),n},emitFile:function(e,t){this.$emit("input-file",e,t),!(e&&e.fileObject&&e.active)||t&&t.active?e&&e.fileObject&&e.active||!t||!t.fileObject||!t.active||this.uploading--:(this.uploading++,this.$nextTick((function(){var t=this;setTimeout((function(){t.upload(e).then((function(){(e=t.get(e))&&e.fileObject&&t.update(e,{active:!1,success:!e.error})})).catch((function(n){t.update(e,{active:!1,success:!1,error:n.code||n.error||n.message||n})}))}),parseInt(50*Math.random()+50,10))}))),!this.active||Boolean(e)===Boolean(t)&&e.active===t.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var t=this.get(e);if(!t)return Promise.reject("not_exists");if(!t.fileObject)return Promise.reject("file_object");if(t.error)return Promise.reject(t.error);if(t.success)return Promise.resolve(t);var n=this.extensions;if(n&&(n.length||void 0===n.length)&&("object"===(void 0===n?"undefined":d(n))&&n instanceof RegExp||("string"==typeof n&&(n=n.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),n=new RegExp("\\.("+n.join("|").replace(/\./g,"\\.")+")$","i")),-1===t.name.search(n)))return Promise.reject("extension");if(this.size>0&&t.size>=0&&t.size>this.size)return Promise.reject("size");if(this.customAction)return this.customAction(t,this);if(this.features.html5){if(this.shouldUseChunkUpload(t))return this.uploadChunk(t);if(t.putAction)return this.uploadPut(t);if(t.postAction)return this.uploadHtml5(t)}return t.postAction?this.uploadHtml4(t):Promise.reject("No action configured")},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var t=this.chunkOptions.handler;return e.chunk=new t(e,this.chunkOptions),e.chunk.upload()},uploadPut:function(e){var t=[],n=void 0;for(var i in e.data)null!=(n=e.data[i])&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));var r=t.length?(-1===e.putAction.indexOf("?")?"?":"&")+t.join("&"):"",s=new XMLHttpRequest;return s.open("PUT",e.putAction+r),this.uploadXhr(s,e,e.file)},uploadHtml5:function(e){var t=new window.FormData,n=void 0;for(var i in e.data)(n=e.data[i])&&"object"===(void 0===n?"undefined":d(n))&&"function"!=typeof n.toString?n instanceof File?t.append(i,n,n.name):t.append(i,JSON.stringify(n)):null!=n&&t.append(i,n);t.append(this.name,e.file,e.file.filename||e.name);var r=new XMLHttpRequest;return r.open("POST",e.postAction),this.uploadXhr(r,e,t)},uploadXhr:function(e,t,n){var i=this,r=t,s=0,o=0;e.upload.onprogress=function(e){if(r=i.get(r),e.lengthComputable&&r&&r.fileObject&&r.active){var t=Math.round(Date.now()/1e3);t!==s&&(s=t,r=i.update(r,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-o}),o=e.loaded)}};var a=setInterval((function(){if(!(r=i.get(r))||!r.fileObject||r.success||r.error||!r.active){a&&(clearInterval(a),a=!1);try{e.abort(),e.timeout=1}catch(e){}}}),100);return new Promise((function(t,s){var o=void 0,u=function(n){if(!o){if(o=!0,a&&(clearInterval(a),a=!1),!(r=i.get(r)))return s("not_exists");if(!r.fileObject)return s("file_object");if(r.error)return s(r.error);if(!r.active)return s("abort");if(r.success)return t(r);var u={};switch(n.type){case"timeout":case"abort":u.error=n.type;break;case"error":e.status?e.status>=500?u.error="server":e.status>=400&&(u.error="denied"):u.error="network";break;default:e.status>=500?u.error="server":e.status>=400?u.error="denied":u.progress="100.00"}if(e.responseText){var c=e.getResponseHeader("Content-Type");c&&-1!==c.indexOf("/json")?u.response=JSON.parse(e.responseText):u.response=e.responseText}return(r=i.update(r,u)).error?s(r.error):t(r)}};for(var c in e.onload=u,e.onerror=u,e.onabort=u,e.ontimeout=u,r.timeout&&(e.timeout=r.timeout),r.headers)e.setRequestHeader(c,r.headers[c]);r=i.update(r,{xhr:e}),e.send(n)}))},uploadHtml4:function(e){var t=this,n=e,i=function(e){27===e.keyCode&&e.preventDefault()},r=document.createElement("iframe");r.id="upload-iframe-"+n.id,r.name="upload-iframe-"+n.id,r.src="about:blank",r.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var s=document.createElement("form");s.action=n.postAction,s.name="upload-form-"+n.id,s.setAttribute("method","POST"),s.setAttribute("target","upload-iframe-"+n.id),s.setAttribute("enctype","multipart/form-data");var o=void 0,a=void 0;for(var u in n.data)(o=n.data[u])&&"object"===(void 0===o?"undefined":d(o))&&"function"!=typeof o.toString&&(o=JSON.stringify(o)),null!=o&&((a=document.createElement("input")).type="hidden",a.name=u,a.value=o,s.appendChild(a));return s.appendChild(n.el),document.body.appendChild(r).appendChild(s),new Promise((function(e,o){setTimeout((function(){if(!(n=t.update(n,{iframe:r})))return o("not_exists");var a=setInterval((function(){(n=t.get(n))&&n.fileObject&&!n.success&&!n.error&&n.active||(a&&(clearInterval(a),a=!1),r.onabort({type:n?"abort":"not_exists"}))}),100),u=void 0,c=function(s){if(!u){if(u=!0,a&&(clearInterval(a),a=!1),document.body.removeEventListener("keydown",i),!(n=t.get(n)))return o("not_exists");if(!n.fileObject)return o("file_object");if(n.error)return o(n.error);if(!n.active)return o("abort");if(n.success)return e(n);var c=function(){var e=void 0;try{r.contentWindow&&(e=r.contentWindow.document)}catch(e){}if(!e)try{e=r.contentDocument?r.contentDocument:r.document}catch(t){e=r.document}return e&&e.body?e.body.innerHTML:null}(),l={};switch(s.type){case"abort":l.error="abort";break;case"error":n.error?l.error=n.error:l.error=null===c?"network":"denied";break;default:n.error?l.error=n.error:null===l?l.error="network":l.progress="100.00"}if(null!==c){if(c&&"{"===c.substr(0,1)&&"}"===c.substr(c.length-1,1))try{c=JSON.parse(c)}catch(e){}l.response=c}return(n=t.update(n,l)).error?o(n.error):e(n)}};r.onload=c,r.onerror=c,r.onabort=c,document.body.addEventListener("keydown",i),s.submit()}),50)})).then((function(e){return r.parentNode&&r.parentNode.removeChild(r),e})).catch((function(e){return r.parentNode&&r.parentNode.removeChild(r),e}))},watchActive:function(e){for(var t=void 0,n=0;t=this.files[n];)if(n++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;t.active||t.error||t.success||this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});0===this.uploading&&(this.active=!1)},watchDrop:function(e){var t=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(e){}t?"string"==typeof t?t=document.querySelector(t)||this.$root.$el.querySelector(t):!0===t&&(t=this.$parent.$el):t=!1,this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){if(e.preventDefault(),!this.dropActive&&e.dataTransfer){var t=e.dataTransfer;t.files&&t.files.length?this.dropActive=!0:t.types?(t.types.indexOf&&-1!==t.types.indexOf("Files")||t.types.contains&&t.types.contains("Files"))&&(this.dropActive=!0):this.dropActive=!0}},onDragleave:function(e){e.preventDefault(),this.dropActive&&("HTML"===e.target.nodeName||e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},v=function(e,t,n,i,r,s,o,a){var u=("function"==typeof n?n.options:n)||{};u.render||(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),u._scopeId=i;var c=void 0;if(t&&(c=function(e){t.call(this,o(e))}),void 0!==c)if(u.functional){var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return u}({render:function(){var e=this.$createElement,t=this._self._c||e;return t("span",{class:this.className},[this._t("default"),this._v(" "),t("label",{attrs:{for:this.inputId||this.name}}),this._v(" "),t("input-file")],2)},staticRenderFns:[]},(function(e){e&&e("data-v-595958af_0",{source:"\n.file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block\n}\n.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%\n}\n.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0\n}",map:void 0,media:void 0})}),h,void 0,!1,0,(function e(){var t=document.head||document.getElementsByTagName("head")[0],n=e.styles||(e.styles={}),i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(e,r){if(!document.querySelector('style[data-vue-ssr-id~="'+e+'"]')){var s=i?r.media||"default":e,o=n[s]||(n[s]={ids:[],parts:[],element:void 0});if(!o.ids.includes(e)){var a=r.source,u=o.ids.length;if(o.ids.push(e),r.map&&(a+="\n/*# sourceURL="+r.map.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r.map))))+" */"),i&&(o.element=o.element||document.querySelector("style[data-group="+s+"]")),!o.element){var c=o.element=document.createElement("style");c.type="text/css",r.media&&c.setAttribute("media",r.media),i&&(c.setAttribute("data-group",s),c.setAttribute("data-next-index","0")),t.appendChild(c)}if(i&&(u=parseInt(o.element.getAttribute("data-next-index")),o.element.setAttribute("data-next-index",u+1)),o.element.styleSheet)o.parts.push(a),o.element.styleSheet.cssText=o.parts.filter(Boolean).join("\n");else{var l=document.createTextNode(a),d=o.element.childNodes;d[u]&&o.element.removeChild(d[u]),d.length?o.element.insertBefore(l,d[u]):o.element.appendChild(l)}}}}})),m=Object.freeze({default:v});return m&&v||m}()},169:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},170:function(e,t,n){var i={"./af":15,"./af.js":15,"./ar":16,"./ar-dz":17,"./ar-dz.js":17,"./ar-kw":18,"./ar-kw.js":18,"./ar-ly":19,"./ar-ly.js":19,"./ar-ma":20,"./ar-ma.js":20,"./ar-sa":21,"./ar-sa.js":21,"./ar-tn":22,"./ar-tn.js":22,"./ar.js":16,"./az":23,"./az.js":23,"./be":24,"./be.js":24,"./bg":25,"./bg.js":25,"./bm":26,"./bm.js":26,"./bn":27,"./bn.js":27,"./bo":28,"./bo.js":28,"./br":29,"./br.js":29,"./bs":30,"./bs.js":30,"./ca":31,"./ca.js":31,"./cs":32,"./cs.js":32,"./cv":33,"./cv.js":33,"./cy":34,"./cy.js":34,"./da":35,"./da.js":35,"./de":36,"./de-at":37,"./de-at.js":37,"./de-ch":38,"./de-ch.js":38,"./de.js":36,"./dv":39,"./dv.js":39,"./el":40,"./el.js":40,"./en-au":41,"./en-au.js":41,"./en-ca":42,"./en-ca.js":42,"./en-gb":43,"./en-gb.js":43,"./en-ie":44,"./en-ie.js":44,"./en-il":45,"./en-il.js":45,"./en-in":46,"./en-in.js":46,"./en-nz":47,"./en-nz.js":47,"./en-sg":48,"./en-sg.js":48,"./eo":49,"./eo.js":49,"./es":50,"./es-do":51,"./es-do.js":51,"./es-us":52,"./es-us.js":52,"./es.js":50,"./et":53,"./et.js":53,"./eu":54,"./eu.js":54,"./fa":55,"./fa.js":55,"./fi":56,"./fi.js":56,"./fil":57,"./fil.js":57,"./fo":58,"./fo.js":58,"./fr":59,"./fr-ca":60,"./fr-ca.js":60,"./fr-ch":61,"./fr-ch.js":61,"./fr.js":59,"./fy":62,"./fy.js":62,"./ga":63,"./ga.js":63,"./gd":64,"./gd.js":64,"./gl":65,"./gl.js":65,"./gom-deva":66,"./gom-deva.js":66,"./gom-latn":67,"./gom-latn.js":67,"./gu":68,"./gu.js":68,"./he":69,"./he.js":69,"./hi":70,"./hi.js":70,"./hr":71,"./hr.js":71,"./hu":72,"./hu.js":72,"./hy-am":73,"./hy-am.js":73,"./id":74,"./id.js":74,"./is":75,"./is.js":75,"./it":76,"./it-ch":77,"./it-ch.js":77,"./it.js":76,"./ja":78,"./ja.js":78,"./jv":79,"./jv.js":79,"./ka":80,"./ka.js":80,"./kk":81,"./kk.js":81,"./km":82,"./km.js":82,"./kn":83,"./kn.js":83,"./ko":84,"./ko.js":84,"./ku":85,"./ku.js":85,"./ky":86,"./ky.js":86,"./lb":87,"./lb.js":87,"./lo":88,"./lo.js":88,"./lt":89,"./lt.js":89,"./lv":90,"./lv.js":90,"./me":91,"./me.js":91,"./mi":92,"./mi.js":92,"./mk":93,"./mk.js":93,"./ml":94,"./ml.js":94,"./mn":95,"./mn.js":95,"./mr":96,"./mr.js":96,"./ms":97,"./ms-my":98,"./ms-my.js":98,"./ms.js":97,"./mt":99,"./mt.js":99,"./my":100,"./my.js":100,"./nb":101,"./nb.js":101,"./ne":102,"./ne.js":102,"./nl":103,"./nl-be":104,"./nl-be.js":104,"./nl.js":103,"./nn":105,"./nn.js":105,"./oc-lnc":106,"./oc-lnc.js":106,"./pa-in":107,"./pa-in.js":107,"./pl":108,"./pl.js":108,"./pt":109,"./pt-br":110,"./pt-br.js":110,"./pt.js":109,"./ro":111,"./ro.js":111,"./ru":112,"./ru.js":112,"./sd":113,"./sd.js":113,"./se":114,"./se.js":114,"./si":115,"./si.js":115,"./sk":116,"./sk.js":116,"./sl":117,"./sl.js":117,"./sq":118,"./sq.js":118,"./sr":119,"./sr-cyrl":120,"./sr-cyrl.js":120,"./sr.js":119,"./ss":121,"./ss.js":121,"./sv":122,"./sv.js":122,"./sw":123,"./sw.js":123,"./ta":124,"./ta.js":124,"./te":125,"./te.js":125,"./tet":126,"./tet.js":126,"./tg":127,"./tg.js":127,"./th":128,"./th.js":128,"./tk":129,"./tk.js":129,"./tl-ph":130,"./tl-ph.js":130,"./tlh":131,"./tlh.js":131,"./tr":132,"./tr.js":132,"./tzl":133,"./tzl.js":133,"./tzm":134,"./tzm-latn":135,"./tzm-latn.js":135,"./tzm.js":134,"./ug-cn":136,"./ug-cn.js":136,"./uk":137,"./uk.js":137,"./ur":138,"./ur.js":138,"./uz":139,"./uz-latn":140,"./uz-latn.js":140,"./uz.js":139,"./vi":141,"./vi.js":141,"./x-pseudo":142,"./x-pseudo.js":142,"./yo":143,"./yo.js":143,"./zh-cn":144,"./zh-cn.js":144,"./zh-hk":145,"./zh-hk.js":145,"./zh-mo":146,"./zh-mo.js":146,"./zh-tw":147,"./zh-tw.js":147};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=170},171:function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(156),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(14))},242:function(e,t,n){e.exports=n(245)},245:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(149),s=n(213),o={filters:{nsCurrency:r.a},name:"ns-preview-popup",data:function(){return{active:"details",order:new Object,products:[],payments:[]}},methods:{closePopup:function(){this.$popup.close()},setActive:function(e){this.active=e},loadOrderDetails:function(e){var t=this;Object(s.a)([i.nsHttpClient.get("/api/nexopos/v4/orders/".concat(e)),i.nsHttpClient.get("/api/nexopos/v4/orders/".concat(e,"/products")),i.nsHttpClient.get("/api/nexopos/v4/orders/".concat(e,"/payments"))]).subscribe((function(e){t.order=e[0],t.products=e[1],t.payments=e[2]}))},getTypeLabel:function(e){switch(e){case"delivery":return"Delivery";case"takeaway":return"Take Away";default:return"Unknown Type"}},getDeliveryStatus:function(e){switch(e){case"pending":return"Pending";case"ongoing":return"Ongoing";case"delivered":return"Delivered";case"failed":return"Delivery Failure";default:return"Unknown Status"}},getProcessingStatus:function(e){switch(e){case"pending":return"Pending";case"ongoing":return"Ongoing";case"done":return"Done";case"failed":return"Failure";default:return"Unknown Status"}},getPaymentStatus:function(e){switch(e){case"paid":return"Paid";case"unpaid":return"Unpaid";case"partially_paid":return"Partially Paid";default:return"Unknown Status"}}},watch:{active:function(){"details"===this.active&&this.loadOrderDetails(this.$popupParams.order.id)}},mounted:function(){var e=this;this.loadOrderDetails(this.$popupParams.order.id),this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}))}};window.nsOrderPreviewPopup=o;var a=o,u=n(3),c=Object(u.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-6/7-screen w-6/7-screen shadow-xl bg-white flex flex-col"},[n("div",{staticClass:"border-b border-gray-300 p-3 flex items-center justify-between"},[e._m(0),e._v(" "),n("div",[n("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),n("div",{staticClass:"p-2 bg-gray-100 flex flex-auto"},[n("ns-tabs",{attrs:{active:e.active},on:{active:function(t){return e.setActive(t)}}},[n("ns-tabs-item",{attrs:{label:"Details",identifier:"details"}},[n("div",{staticClass:"-mx-4 flex flex-wrap"},[n("div",{staticClass:"px-4 w-full md:w-1/3 lg:w-1/4 mb-2"},[n("h3",{staticClass:"font-semibold text-gray-800 pb-2"},[e._v("Order Status")]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Customer")])])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.order.customer.name))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Type")])])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.getTypeLabel(e.order.type)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Delivery Status")])])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.getDeliveryStatus(e.order.delivery_status)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Proceessing Status")])])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.getProcessingStatus(e.order.delivery_status)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Payment Status")])])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e.getPaymentStatus(e.order.payment_status)))])])]),e._v(" "),n("div",{staticClass:"px-4 w-full md:w-1/3 lg:w-1/4 mb-2"},[n("h3",{staticClass:"font-semibold text-gray-800 pb-2"},[e._v("Payment Summary")]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v("Sub Total")])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.subtotal)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[n("span",[e._v("Discount")]),e._v(" "),"percentage"===e.order.discount_type?n("span",{staticClass:"ml-1"},[e._v("("+e._s(e.order.discount_percentage)+"%)")]):e._e(),e._v(" "),"flat"===e.order.discount_type?n("span",{staticClass:"ml-1"},[e._v("(Flat)")]):e._e()])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.discount)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v("Shipping")])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.shipping)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v("Taxes")])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.tax_value)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v("Paid")])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),n("div",{staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v("Change")])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(e.order.change)))])])]),e._v(" "),n("div",{staticClass:"px-4 w-full md:w-1/3 lg:w-1/4 mb-2"},[n("h3",{staticClass:"font-semibold text-gray-800 pb-2"},[e._v("Products")]),e._v(" "),e._l(e.products,(function(t){return n("div",{key:t.id,staticClass:"border-b border-blue-400 p-2 flex justify-between items-start bg-gray-100"},[n("div",[n("h4",{staticClass:"text-semibold text-gray-700"},[e._v(e._s(t.name)+" (x"+e._s(t.quantity)+")")]),e._v(" "),n("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(t.unit.name||"N/A"))])]),e._v(" "),n("div",{staticClass:"font-semibold text-gray-800"},[e._v(e._s(e._f("currency")(t.sale_price)))])])}))],2)])]),e._v(" "),n("ns-tabs-item",{attrs:{label:"Shipping Management",identifier:"shipping"}},[n("h1",[e._v("Shipping Component")])]),e._v(" "),n("ns-tabs-item",{attrs:{label:"Payments",identifier:"payments"}},[n("h1",[e._v("Payment component")])]),e._v(" "),n("ns-tabs-item",{attrs:{label:"Refund & Return",identifier:"refund"}},[n("h1",[e._v("Refund component")])])],1)],1),e._v(" "),n("div",{staticClass:"p-2 flex justify-between border-t border-gray-200"},[n("div"),e._v(" "),n("div",[n("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.printOrder()}}},[n("i",{staticClass:"las la-print"}),e._v("\n                Print\n            ")])],1)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("Order Options")])])}],!1,null,null,null);t.default=c.exports},3:function(e,t,n){"use strict";function i(e,t,n,i,r,s,o,a){var u,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):r&&(u=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(e,t){return u.call(t),l(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:e,options:c}}n.d(t,"a",(function(){return i}))},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(153),r=function(){function e(e){if(void 0===e&&(e={}),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.config=Object.assign(this.config,e),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var t=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[t-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new i.a}return e.show=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var r=new e(i);return r.open(t,n),r},e.prototype.open=function(e,t){var n,i,r,s=this;void 0===t&&(t={}),this.parentWrapper.style.filter="blur(5px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(e){s.event.next({event:"click-overlay",value:!0}),e.stopPropagation()})),this.popupBody.addEventListener("click",(function(e){e.stopImmediatePropagation()})),this.container.style.background="rgb(51 51 51 / 20%)",this.container.id="popup-container-"+document.querySelectorAll(".is-popup").length,this.popupBody.setAttribute("class"," zoom-out-entrance"),this.popupBody.innerHTML='<div class="popup-body"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container);var o=Vue.extend(e);this.instance=new o({propsData:{popup:this}}),this.instance.template=(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.template)||void 0,this.instance.render=e.render||void 0,this.instance.methods=(null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.methods)||(null==e?void 0:e.methods),this.instance.data=(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.data)||(null==e?void 0:e.data),this.instance.$popup=this,this.instance.$popupParams=t,this.instance.$mount("#"+this.container.id+" .popup-body")},e.prototype.close=function(){var e=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)",this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),setTimeout((function(){e.container.remove()}),300)},e}()},8:function(e,t,n){"use strict";var i=function(){function e(){}return e.prototype.validateFields=function(e){var t=this;return 0===e.map((function(e){return t.checkField(e),0===e.errors.length})).filter((function(e){return!1===e})).length},e.prototype.validateFieldsErrors=function(e){var t=this;return e.map((function(e){return t.checkField(e),e.errors})).flat()},e.prototype.validateForm=function(e){e.main&&this.validateField(e.main);var t=[];for(var n in e.tabs){var i=[],r=this.validateFieldsErrors(e.tabs[n].fields);r.length>0&&i.push(r),e.tabs[n].errors=i.flat(),t.push(i.flat())}return t.flat().filter((function(e){return void 0!==e}))},e.prototype.initializeTabs=function(e){var t=0;for(var n in e)0===t&&(e[n].active=!0),e[n].active=void 0!==e[n].active&&e[n].active,e[n].fields=this.createFields(e[n].fields),t++;return e},e.prototype.validateField=function(e){return this.checkField(e)},e.prototype.createFields=function(e){return e.map((function(e){return e.type=e.type||"text",e.errors=e.errors||[],e.disabled=e.disabled||!1,e}))},e.prototype.createForm=function(e){if(e.main&&(e.main=this.createFields([e.main])[0]),e.tabs)for(var t in e.tabs)e.tabs[t].fields=this.createFields(e.tabs[t].fields),e.tabs[t].errors=[];return e},e.prototype.enableFields=function(e){return e.map((function(e){return e.disabled=!1}))},e.prototype.disableFields=function(e){return e.map((function(e){return e.disabled=!0}))},e.prototype.disableForm=function(e){for(var t in e.main&&(e.main.disabled=!0),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!0}))},e.prototype.enableForm=function(e){for(var t in e.main&&(e.main.disabled=!1),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!1}))},e.prototype.getValue=function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t},e.prototype.checkField=function(e){var t=this;void 0!==e.validation&&(e.errors=[],this.detectValidationRules(e.validation).forEach((function(n){t.fieldPassCheck(e,n)})));return e},e.prototype.extractForm=function(e){var t={};if(e.main&&(t[e.main.name]=e.main.value),e.tabs)for(var n in e.tabs)void 0===t[n]&&(t[n]={}),t[n]=this.extractFields(e.tabs[n].fields);return t},e.prototype.extractFields=function(e,t){return void 0===t&&(t={}),e.forEach((function(e){["multiselect"].includes(e.type)?t[e.name]=e.options.filter((function(e){return e.selected})).map((function(e){return e.value})):t[e.name]=e.value})),t},e.prototype.detectValidationRules=function(e){var t=function(e){var t;return["email","required"].includes(e)?{identifier:e}:(t=/(min)\:([0-9])+/g.exec(e))||(t=/(max)\:([0-9])+/g.exec(e))?{identifier:t[1],value:t[2]}:e};return Array.isArray(e)?e.filter((function(e){return"string"==typeof e})).map(t):e.split("|").map(t)},e.prototype.triggerError=function(e,t){if(t.errors){var n=function(n){var i=n.split(".").filter((function(e){return!/^\d+$/.test(e)}));2===i.length&&e.tabs[i[0]].fields.forEach((function(e){e.name===i[1]&&t.errors[n].forEach((function(t){var n={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(n)}))})),n===e.main.name&&t.errors[n].forEach((function(t){e.main.errors.push({identifier:"invalid",invalid:!0,message:t,name:e.main.name})}))};for(var i in t.errors)n(i)}},e.prototype.triggerFielsErrors=function(e,t){if(console.log(t),t.errors){var n=function(n){var i=n.split(".").filter((function(e){return!/^\d+$/.test(e)}));e.forEach((function(e){e.name===i[0]&&t.errors[n].forEach((function(t){var n={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(n)}))}))};for(var i in t.errors)n(i)}},e.prototype.fieldPassCheck=function(e,t){if("required"===t.identifier){if(void 0===e.value||null===e.value||0===e.value.length)return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(n,i){n.identifier===t.identifier&&!0===n.invalid&&(e.errors.splice(i,1),console.log(e))}))}if("email"===t.identifier){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.value))return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(n,i){!0===n[t.identifier]&&(e.errors.splice(i,1),console.log(e))}))}return e},e}();t.a=i}},[[242,0,1]]]);
//# sourceMappingURL=ns-order-preview-popup.js.map