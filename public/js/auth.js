(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{261:function(t,e,s){t.exports=s(262)},262:function(t,e,s){"use strict";s.r(e);var i=s(5),n=s.n(i),r=s(26),a=function(){return(a=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var n in e=arguments[s])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},o=s(276).default,l=s(277).default;window.nsComponents=a(a({},r),nsExtraComponents),window.authVueComponent=new n.a({el:"#page-container",components:a({nsLogin:o,nsRegister:l},r)})},276:function(t,e,s){"use strict";s.r(e);var i=s(220),n=s(7),r=s(0),a={name:"ns-login",data:function(){return{fields:[],xXsrfToken:null,validation:new n.a,isSubitting:!1}},mounted:function(){var t=this;Object(i.a)([r.nsHttpClient.get("/api/nexopos/v4/fields/ns.login"),r.nsHttpClient.get("/sanctum/csrf-cookie")]).subscribe((function(e){t.fields=t.validation.createFields(e[0]),t.xXsrfToken=r.nsHttpClient.response.config.headers["X-XSRF-TOKEN"],setTimeout((function(){return r.nsHooks.doAction("ns-login-mounted",t)}),100)}))},methods:{signIn:function(){var t=this;if(!this.validation.validateFields(this.fields))return nsSnackBar.error("Unable to proceed the form is not valid.").subscribe();this.validation.disableFields(this.fields),r.nsHooks.applyFilters("ns-login-submit",!0)&&(this.isSubitting=!0,r.nsHttpClient.post("/auth/sign-in",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe((function(t){document.location=t.data.redirectTo}),(function(e){t.isSubitting=!1,t.validation.enableFields(t.fields),e.data&&t.validation.triggerFieldsErrors(t.fields,e.data),nsSnackBar.error(e.message).subscribe()})))}}},o=s(2),l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white rounded shadow overflow-hidden transition-all duration-100"},[s("div",{staticClass:"p-3 -my-2"},[t.fields.length>0?s("div",{staticClass:"py-2 fade-in-entrance anim-duration-300"},t._l(t.fields,(function(t,e){return s("ns-field",{key:e,attrs:{field:t}})})),1):t._e()]),t._v(" "),0===t.fields.length?s("div",{staticClass:"flex items-center justify-center py-10"},[s("ns-spinner",{attrs:{border:"4",size:"16"}})],1):t._e(),t._v(" "),s("div",{staticClass:"flex w-full items-center justify-center py-4"}),t._v(" "),s("div",{staticClass:"flex justify-between items-center bg-gray-200 p-3"},[s("div",[s("ns-button",{staticClass:"justify-between",attrs:{type:"info"},on:{click:function(e){return t.signIn()}}},[t.isSubitting?s("ns-spinner",{staticClass:"mr-2",attrs:{size:"6",border:"2"}}):t._e(),t._v(" "),s("span",[t._v("Sign In")])],1)],1),t._v(" "),s("div",[s("ns-link",{attrs:{href:"/sign-up",type:"success"}},[t._v("Register")])],1)])])}),[],!1,null,null,null);e.default=l.exports},277:function(t,e,s){"use strict";s.r(e);var i=s(7),n=s(0),r=s(220),a={name:"ns-register",data:function(){return{fields:[],xXsrfToken:null,validation:new i.a}},mounted:function(){var t=this;Object(r.a)([n.nsHttpClient.get("/api/nexopos/v4/fields/ns.register"),n.nsHttpClient.get("/sanctum/csrf-cookie")]).subscribe((function(e){t.fields=t.validation.createFields(e[0]),t.xXsrfToken=n.nsHttpClient.response.config.headers["X-XSRF-TOKEN"],setTimeout((function(){return n.nsHooks.doAction("ns-register-mounted",t)}))}))},methods:{register:function(){var t=this;if(!this.validation.validateFields(this.fields))return n.nsSnackBar.error("Unable to proceed the form is not valid.").subscribe();this.validation.disableFields(this.fields),n.nsHooks.applyFilters("ns-register-submit",!0)&&n.nsHttpClient.post("/auth/sign-up",this.validation.getValue(this.fields),{headers:{"X-XSRF-TOKEN":this.xXsrfToken}}).subscribe((function(t){n.nsSnackBar.success(t.message).subscribe(),setTimeout((function(){document.location=t.data.redirectTo}),1500)}),(function(e){t.validation.triggerFieldsErrors(t.fields,e),t.validation.enableFields(t.fields),n.nsSnackBar.error(e.message).subscribe()}))}}},o=s(2),l=Object(o.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white rounded shadow overflow-hidden transition-all duration-100"},[s("div",{staticClass:"p-3 -my-2"},[t.fields.length>0?s("div",{staticClass:"py-2 fade-in-entrance anim-duration-300"},t._l(t.fields,(function(t,e){return s("ns-field",{key:e,attrs:{field:t}})})),1):t._e()]),t._v(" "),0===t.fields.length?s("div",{staticClass:"flex items-center justify-center"},[s("ns-spinner")],1):t._e(),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"flex justify-between items-center bg-gray-200 p-3"},[s("div",[s("ns-button",{attrs:{type:"info"},on:{click:function(e){return t.register()}}},[t._v("Register")])],1),t._v(" "),s("div",[s("ns-link",{attrs:{href:"/sign-in",type:"success"}},[t._v("Sign In")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex w-full items-center justify-center py-4"},[e("a",{staticClass:"hover:underline text-blue-600 text-sm",attrs:{href:"/sign-in"}},[this._v("Already registered ?")])])}],!1,null,null,null);e.default=l.exports}},[[261,0,1]]]);
//# sourceMappingURL=auth.js.map