(self.webpackChunkNexoPOS_4x=self.webpackChunkNexoPOS_4x||[]).push([[219],{4803:(e,t,s)=>{"use strict";var r=s(538),i=s(3509),n=(s(824),s(7266)),a=s(9671),o=s(7389);function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={name:"ns-rewards-system",mounted:function(){this.loadForm(),console.log(this.rules)},data:function(){return{formValidation:new n.Z,form:{},nsSnackBar:a.kX,nsHttpClient:a.ih}},props:["submit-method","submit-url","return-url","src","rules"],methods:{__:o.__,submit:function(){var e=this;if(0===this.form.rules.length)return a.kX.error(this.$slots["error-no-rules"]?this.$slots["error-no-rules"]:(0,o.__)("No rules has been provided.")).subscribe();if(this.form.rules.filter((function(e){return e.filter((function(e){return!(e.value>=0)&&"hidden"!==e.type})).length>0})).length>0)return a.kX.error(this.$slots["error-no-valid-rules"]?this.$slots["error-no-valid-rules"]:(0,o.__)("No valid run were provided.")).subscribe();if(this.formValidation.validateForm(this.form).length>0)return a.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:(0,o.__)("Unable to proceed, the form is invalid."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();if(this.formValidation.disableForm(this.form),void 0===this.submitUrl)return a.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:(0,o.__)("Unable to proceed, no valid submit URL is defined."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();var t=c(c({},this.formValidation.extractForm(this.form)),{},{rules:this.form.rules.map((function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t}))});a.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,t).subscribe((function(t){if("success"===t.status)return document.location=e.returnUrl;e.formValidation.enableForm(e.form)}),(function(t){e.formValidation.triggerError(e.form,t.response.data),e.formValidation.enableForm(e.form),a.kX.error(t.data.message||(0,o.__)("An unexpected error has occured"),void 0,{duration:5e3}).subscribe()}))},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},loadForm:function(){var e=this;a.ih.get("".concat(this.src)).subscribe((function(t){e.form=e.parseForm(t.form)}))},parseForm:function(e){e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];var t=0;for(var s in e.tabs)0===t&&(e.tabs[s].active=!0),e.tabs[s].active=void 0!==e.tabs[s].active&&e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e},getRuleForm:function(){return JSON.parse(JSON.stringify(this.form.ruleForm))},addRule:function(){this.form.rules.push(this.getRuleForm())},removeRule:function(e){this.form.rules.splice(e,1)}}};var f=s(1900);const p=(0,f.Z)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form flex-auto flex flex-col",attrs:{id:"crud-form"}},[0===Object.values(e.form).length?s("div",{staticClass:"flex items-center justify-center flex-auto"},[s("ns-spinner")],1):e._e(),e._v(" "),Object.values(e.form).length>0?[s("div",{staticClass:"flex flex-col"},[s("div",{staticClass:"flex justify-between items-center"},[s("label",{staticClass:"font-bold my-2 text-gray-700",attrs:{for:"title"}},[e._t("title",(function(){return[e._v(e._s(e.__("No title Provided")))]}))],2),e._v(" "),s("div",{staticClass:"text-sm my-2 text-gray-700",attrs:{for:"title"}},[e.returnUrl?s("a",{staticClass:"rounded-full border border-gray-400 hover:bg-red-600 hover:text-white bg-white px-2 py-1",attrs:{href:e.returnUrl}},[e._v("Return")]):e._e()])]),e._v(" "),s("div",{staticClass:"flex border-2 rounded overflow-hidden",class:e.form.main.disabled?"border-gray-500":e.form.main.errors.length>0?"border-red-600":"border-blue-500"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-gray-700 outline-none h-10 px-2",class:e.form.main.disabled?"bg-gray-400":"",attrs:{disabled:e.form.main.disabled,type:"text"},domProps:{value:e.form.main.value},on:{blur:function(t){return e.formValidation.checkField(e.form.main)},change:function(t){return e.formValidation.checkField(e.form.main)},input:function(t){t.target.composing||e.$set(e.form.main,"value",t.target.value)}}}),e._v(" "),s("button",{staticClass:"outline-none px-4 h-10 text-white border-l border-gray-400",class:e.form.main.disabled?"bg-gray-500":e.form.main.errors.length>0?"bg-red-500":"bg-blue-500",attrs:{disabled:e.form.main.disabled},on:{click:function(t){return e.submit()}}},[e._t("save",(function(){return[e._v(e._s(e.__("Save")))]}))],2)]),e._v(" "),e.form.main.description&&0===e.form.main.errors.length?s("p",{staticClass:"text-xs text-gray-600 py-1"},[e._v(e._s(e.form.main.description))]):e._e(),e._v(" "),e._l(e.form.main.errors,(function(t,r){return s("p",{key:r,staticClass:"text-xs py-1 text-red-500"},[s("span",[e._t("error-required",(function(){return[e._v(e._s(t.identifier))]}))],2)])}))],2),e._v(" "),s("div",{staticClass:"flex -mx-4 mt-4",attrs:{id:"points-wrapper"}},[s("div",{staticClass:"w-full md:w-1/3 lg:1/4 px-4"},[s("div",{staticClass:"bg-white rounded shadow"},[s("div",{staticClass:"header border-b border-gray-200 p-2"},[e._v(e._s(e.__("General")))]),e._v(" "),s("div",{staticClass:"body p-2"},e._l(e.form.tabs.general.fields,(function(e,t){return s("ns-field",{key:t,staticClass:"mb-2",attrs:{field:e}})})),1)]),e._v(" "),s("div",{staticClass:"rounded bg-gray-100 border border-gray-400 p-2 flex justify-between items-center my-3"},[e._t("add",(function(){return[s("span",{staticClass:"text-gray-700"},[e._v(e._s(e.__("Add Rule")))])]})),e._v(" "),s("button",{staticClass:"rounded bg-blue-500 text-white font-semibold flex items-center justify-center h-10 w-10",on:{click:function(t){return e.addRule()}}},[s("i",{staticClass:"las la-plus"})])],2)]),e._v(" "),s("div",{staticClass:"w-full md:w-2/3 lg:3/4 px-4 -m-3 flex flex-wrap items-start justify-start"},e._l(e.form.rules,(function(t,r){return s("div",{key:r,staticClass:"w-full md:w-1/2 p-3"},[s("div",{staticClass:"rounded shadow bg-white flex-auto"},[s("div",{staticClass:"body p-2"},e._l(t,(function(e,t){return s("ns-field",{key:t,staticClass:"mb-2",attrs:{field:e}})})),1),e._v(" "),s("div",{staticClass:"header border-t border-gray-200 p-2 flex justify-end"},[s("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.removeRule(r)}}},[s("i",{staticClass:"las la-times"})])],1)])])})),0)])]:e._e()],2)}),[],!1,null,null,null).exports;function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v={name:"ns-create-coupons",mounted:function(){this.loadForm()},computed:{validTabs:function(){if(this.form){var e=[];for(var t in this.form.tabs)["selected_products","selected_categories"].includes(t)&&e.push(this.form.tabs[t]);return e}return[]},activeValidTab:function(){return this.validTabs.filter((function(e){return e.active}))[0]},generalTab:function(){var e=[];for(var t in this.form.tabs)["general"].includes(t)&&e.push(this.form.tabs[t]);return e}},data:function(){return{formValidation:new n.Z,form:{},nsSnackBar:a.kX,nsHttpClient:a.ih,options:new Array(40).fill("").map((function(e,t){return{label:"Foo"+t,value:"bar"+t}}))}},props:["submit-method","submit-url","return-url","src","rules"],methods:{setTabActive:function(e){this.validTabs.forEach((function(e){return e.active=!1})),e.active=!0},submit:function(){var e=this;if(this.formValidation.validateForm(this.form).length>0)return a.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();if(void 0===this.submitUrl)return a.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe();this.formValidation.disableForm(this.form);var t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},this.formValidation.extractForm(this.form));a.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,t).subscribe((function(t){if("success"===t.status)return document.location=e.returnUrl;e.formValidation.enableForm(e.form)}),(function(t){a.kX.error(t.message||(0,o.__)("An unexpected error occured."),void 0,{duration:5e3}).subscribe(),t.response&&e.formValidation.triggerError(e.form,t.response.data),e.formValidation.enableForm(e.form)}))},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},loadForm:function(){var e=this;a.ih.get("".concat(this.src)).subscribe((function(t){e.form=e.parseForm(t.form)}))},parseForm:function(e){e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];var t=0;for(var s in e.tabs)1===t&&void 0===e.tabs[s].active&&(e.tabs[s].active=!0),e.tabs[s].active=void 0!==e.tabs[s].active&&e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e},addOption:function(e){var t=this.options.indexOf(e);t>=0&&(this.options[t].selected=!this.options[t].selected)},removeOption:function(e){var t=e.option;e.index;t.selected=!1},getRuleForm:function(){return this.form.ruleForm},addRule:function(){this.form.rules.push(this.getRuleForm())},removeRule:function(e){this.form.rules.splice(e,1)}}};const b=(0,f.Z)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form flex-auto flex flex-col",attrs:{id:"crud-form"}},[0===Object.values(e.form).length?s("div",{staticClass:"flex items-center justify-center flex-auto"},[s("ns-spinner")],1):e._e(),e._v(" "),Object.values(e.form).length>0?[s("div",{staticClass:"flex flex-col"},[s("div",{staticClass:"flex justify-between items-center"},[s("label",{staticClass:"font-bold my-2 text-gray-700",attrs:{for:"title"}},[e._t("title",(function(){return[e._v("No title Provided")]}))],2),e._v(" "),s("div",{staticClass:"text-sm my-2 text-gray-700",attrs:{for:"title"}},[e.returnUrl?s("a",{staticClass:"rounded-full border border-gray-400 hover:bg-red-600 hover:text-white bg-white px-2 py-1",attrs:{href:e.returnUrl}},[e._v("Return")]):e._e()])]),e._v(" "),s("div",{staticClass:"flex border-2 rounded overflow-hidden",class:e.form.main.disabled?"border-gray-500":e.form.main.errors.length>0?"border-red-600":"border-blue-500"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-gray-700 outline-none h-10 px-2",class:e.form.main.disabled?"bg-gray-400":"",attrs:{disabled:e.form.main.disabled,type:"text"},domProps:{value:e.form.main.value},on:{blur:function(t){return e.formValidation.checkField(e.form.main)},change:function(t){return e.formValidation.checkField(e.form.main)},input:function(t){t.target.composing||e.$set(e.form.main,"value",t.target.value)}}}),e._v(" "),s("button",{staticClass:"outline-none px-4 h-10 text-white border-l border-gray-400",class:e.form.main.disabled?"bg-gray-500":e.form.main.errors.length>0?"bg-red-500":"bg-blue-500",attrs:{disabled:e.form.main.disabled},on:{click:function(t){return e.submit()}}},[e._t("save",(function(){return[e._v("Save")]}))],2)]),e._v(" "),e.form.main.description&&0===e.form.main.errors.length?s("p",{staticClass:"text-xs text-gray-600 py-1"},[e._v(e._s(e.form.main.description))]):e._e(),e._v(" "),e._l(e.form.main.errors,(function(t,r){return s("p",{key:r,staticClass:"text-xs py-1 text-red-500"},[s("span",[e._t("error-required",(function(){return[e._v(e._s(t.identifier))]}))],2)])}))],2),e._v(" "),s("div",{staticClass:"-mx-4 flex flex-wrap mt-4",attrs:{id:"form-container"}},[s("div",{staticClass:"px-4 w-full md:w-1/2"},e._l(e.generalTab,(function(t,r){return s("div",{key:r,staticClass:"rounded bg-white shadow p-2"},e._l(t.fields,(function(e,t){return s("ns-field",{key:t,attrs:{field:e}})})),1)})),0),e._v(" "),s("div",{staticClass:"px-4 w-full md:w-1/2"},[s("div",{attrs:{id:"tabbed-card"}},[s("div",{staticClass:"flex flex-wrap",attrs:{id:"card-header"}},e._l(e.validTabs,(function(t,r){return s("div",{key:r,staticClass:"cursor-pointer px-4 py-2 rounded-tl-lg rounded-tr-lg",class:t.active?"bg-white":"bg-gray-100",on:{click:function(s){return e.setTabActive(t)}}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])})),0),e._v(" "),s("div",{staticClass:"card-body bg-white rounded-br-lg rounded-bl-lg shadow p-2"},e._l(e.activeValidTab.fields,(function(e,t){return s("div",{key:t,staticClass:"flex flex-col"},[s("ns-field",{attrs:{field:e}})],1)})),0)])])])]:e._e()],2)}),[],!1,null,null,null).exports;const _={name:"ns-settings",props:["url"],data:function(){return{validation:new n.Z,form:{},test:""}},computed:{formDefined:function(){return Object.values(this.form).length>0},activeTab:function(){for(var e in this.form.tabs)if(!0===this.form.tabs[e].active)return this.form.tabs[e]}},mounted:function(){this.loadSettingsForm()},methods:{__:o.__,loadComponent:function(e){return nsExtraComponents[e]},submitForm:function(){var e=this;if(0===this.validation.validateForm(this.form).length){this.validation.disableForm(this.form);var t=this.validation.extractForm(this.form);return a.ih.post(this.url,t).subscribe({next:function(t){e.validation.enableForm(e.form),e.loadSettingsForm(),t.data&&t.data.results&&t.data.results.forEach((function(e){"failed"===e.status?a.kX.error(e.message).subscribe():a.kX.success(e.message).subscribe()})),a.kq.doAction("ns-settings-saved",{result:t,instance:e}),a.kX.success(t.message).subscribe()},error:function(t){e.validation.enableForm(e.form),e.validation.triggerFieldsErrors(e.form,t),a.kq.doAction("ns-settings-failed",{error:t,instance:e}),a.kX.error(t.message||(0,o.__)("Unable to proceed the form is not valid.")).subscribe()}})}a.kX.error(this.$slots["error-form-invalid"][0].text||(0,o.__)("Unable to proceed the form is not valid.")).subscribe()},setActive:function(e){for(var t in this.form.tabs)this.form.tabs[t].active=!1;e.active=!0,a.kq.doAction("ns-settings-change-tab",{tab:e,instance:this})},loadSettingsForm:function(){var e=this;a.ih.get(this.url).subscribe((function(t){var s=0;Object.values(t.tabs).filter((function(e){return e.active})).length;for(var r in t.tabs)e.formDefined?t.tabs[r].active=e.form.tabs[r].active:(t.tabs[r].active=!1,0===s&&(t.tabs[r].active=!0)),s++;e.form=e.validation.createForm(t),a.kq.doAction("ns-settings-loaded",e),a.kq.doAction("ns-settings-change-tab",{tab:e.activeTab,instance:e})}))}}};const g=(0,f.Z)(_,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.formDefined?s("div",{attrs:{id:"tabbed-card"}},[s("div",{staticClass:"flex flex-wrap",attrs:{id:"card-header"}},e._l(e.form.tabs,(function(t,r){return s("div",{key:r,staticClass:"text-gray-700 dark:text-white cursor-pointer flex items-center px-4 py-2 rounded-tl-lg rounded-tr-lg",class:t.active?"bg-white dark:bg-slate-700 dark:text-white":"bg-gray-300 dark:bg-slate-800 dark:text-slate-200",on:{click:function(s){return e.setActive(t)}}},[s("span",[e._v(e._s(t.label))]),e._v(" "),t.errors.length>0?s("span",{staticClass:"ml-2 rounded-full bg-red-400 text-white text-sm h-6 w-6 flex items-center justify-center"},[e._v(e._s(t.errors.length))]):e._e()])})),0),e._v(" "),s("div",{staticClass:"card-body bg-white dark:bg-slate-700 dark:text-white rounded-br-lg rounded-bl-lg shadow"},[s("div",{staticClass:"-mx-4 flex flex-wrap p-2"},[e.activeTab.fields?e._l(e.activeTab.fields,(function(e,t){return s("div",{key:t,staticClass:"w-full px-4 md:w-1/2 lg:w-1/3"},[s("div",{staticClass:"flex flex-col my-2"},[s("ns-field",{attrs:{field:e}})],1)])})):e._e(),e._v(" "),e.activeTab.component?s("div",{staticClass:"w-full px-4"},[s(e.loadComponent(e.activeTab.component),{tag:"component"})],1):e._e()],2),e._v(" "),e.activeTab.fields?s("div",{staticClass:"border-t border-gray-400 p-2 flex justify-end"},[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.submitForm()}}},[e._t("submit-button",(function(){return[e._v(e._s(e.__("Save Settings")))]}))],2)],1):e._e()])]):e._e()}),[],!1,null,null,null).exports;const x={name:"ns-reset",props:["url"],methods:{__:o.__,submit:function(){if(0===this.fields.length)return a.kX.error((0,o.__)("This form is not completely loaded.")).susbcribe();if(!this.validation.validateFields(this.fields))return this.$forceUpdate(),a.kX.error(this.$slots["error-form-invalid"]?this.$slots["error-form-invalid"][0].text:"Invalid Form").subscribe();var e=this.validation.getValue(this.fields);confirm(this.$slots["confirm-message"]?this.$slots["confirm-message"][0].text:(0,o.__)("Would you like to proceed ?"))&&a.ih.post("/api/nexopos/v4/reset",e).subscribe({next:function(e){a.kX.success(e.message).subscribe()},error:function(e){a.kX.error(e.message).subscribe()}})},loadFields:function(){var e=this;a.ih.get("/api/nexopos/v4/fields/ns.reset").subscribe({next:function(t){e.fields=e.validation.createFields(t)},error:function(e){a.kX.error(e.message).subscribe()}})}},mounted:function(){this.loadFields()},data:function(){return{validation:new n.Z,fields:[]}}};const y=(0,f.Z)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"reset-app"}},[e._m(0),e._v(" "),s("div",{staticClass:"card-body bg-white rounded-br-lg rounded-bl-lg shadow"},[s("div",{staticClass:"-mx-4 flex flex-wrap p-2"},e._l(e.fields,(function(e,t){return s("div",{key:t,staticClass:"px-4"},[s("ns-field",{attrs:{field:e}})],1)})),0),e._v(" "),s("div",{staticClass:"card-body border-t border-gray-400 p-2 flex"},[s("div",[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.submit()}}},[e._v(e._s(e.__("Proceed")))])],1)])])])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-wrap",attrs:{id:"card-header"}},[s("div",{staticClass:"text-gray-700 bg-white cursor-pointer px-4 py-2 rounded-tl-lg rounded-tr-lg"},[e._v("\n            Reset\n        ")])])}],!1,null,null,null).exports;var w=s(7757),C=s.n(w),k=s(9127);function j(e,t,s,r,i,n,a){try{var o=e[n](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,i)}function $(e){return function(){var t=this,s=arguments;return new Promise((function(r,i){var n=e.apply(t,s);function a(e){j(n,r,i,a,o,"next",e)}function o(e){j(n,r,i,a,o,"throw",e)}a(void 0)}))}}var P;const D={name:"ns-modules",props:["url","upload"],data:function(){return{modules:[],total_enabled:0,total_disabled:0}},mounted:function(){this.loadModules().subscribe()},computed:{noModules:function(){return 0===Object.values(this.modules).length},noModuleMessage:function(){return this.$slots["no-modules-message"]?this.$slots["no-modules-message"][0].text:(0,o.__)("No module has been updated yet.")}},methods:{__:o.__,download:function(e){document.location="/dashboard/modules/download/"+e.namespace},performMigration:(P=$(C().mark((function e(t,s){var r,i,n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){var e=$(C().mark((function e(s,r){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){a.ih.post("/api/nexopos/v4/modules/".concat(t.namespace,"/migrate"),{file:s,version:r}).subscribe((function(t){e(!0)}),(function(e){return a.kX.error(e.message,null,{duration:4e3}).subscribe()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),!(s=s||t.migrations)){e.next=19;break}t.migrating=!0,e.t0=C().keys(s);case 5:if((e.t1=e.t0()).done){e.next=17;break}i=e.t1.value,n=0;case 8:if(!(n<s[i].length)){e.next=15;break}return o=s[i][n],e.next=12,r(o,i);case 12:n++,e.next=8;break;case 15:e.next=5;break;case 17:t.migrating=!1,t.migrated=!0;case 19:case"end":return e.stop()}}),e)}))),function(e,t){return P.apply(this,arguments)}),refreshModules:function(){this.loadModules().subscribe()},enableModule:function(e){var t=this,s="".concat(this.url,"/").concat(e.namespace,"/enable");a.ih.put(s).subscribe(function(){var e=$(C().mark((function e(s){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.kX.success(s.message).subscribe(),t.loadModules().subscribe((function(e){document.location.reload()}),(function(e){a.kX.error(e.message).subscribe()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){a.kX.error(e.message).subscribe()}))},disableModule:function(e){var t=this,s="".concat(this.url,"/").concat(e.namespace,"/disable");a.ih.put(s).subscribe((function(e){a.kX.success(e.message).subscribe(),t.loadModules().subscribe((function(e){document.location.reload()}),(function(e){a.kX.error(e.message).subscribe()}))}),(function(e){a.kX.error(e.message).subscribe()}))},loadModules:function(){var e=this;return a.ih.get(this.url).pipe((0,k.U)((function(t){return e.modules=t.modules,e.total_enabled=t.total_enabled,e.total_disabled=t.total_disabled,t})))},removeModule:function(e){var t=this;if(confirm(this.$slots["confirm-delete-module"]?this.$slots["confirm-delete-module"][0].text:'No text was provided for "confirm-delete-module" message.')){var s="".concat(this.url,"/").concat(e.namespace,"/delete");a.ih.delete(s).subscribe((function(e){t.loadModules().subscribe((function(e){document.location.reload()}))}),(function(e){a.kX.error(e.message,null,{duration:5e3}).subscribe()}))}}}};const S=(0,f.Z)(D,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-auto flex flex-col pb-4",attrs:{id:"module-wrapper"}},[s("div",{staticClass:"flex justify-between items-center"},[s("div",{staticClass:"flex justify-between items-center -mx-2"},[s("span",{staticClass:"px-2"},[s("a",{staticClass:"items-center justify-center rounded cursor-pointer text-gray-600 bg-white shadow flex px-3 py-1 hover:bg-blue-400 hover:text-white",on:{click:function(t){return e.refreshModules()}}},[s("i",{staticClass:"las la-sync"}),e._v(" "),s("span",{staticClass:"mx-2"},[e._v(e._s(e.__("Refresh")))])])]),e._v(" "),s("span",{staticClass:"px-2"},[s("a",{staticClass:"flex items-center justify-center rounded cursor-pointer text-gray-600 bg-white shadow px-3 py-1 hover:bg-blue-400 hover:text-white",attrs:{href:e.upload}},[s("span",[e._v(e._s(e.__("Upload")))]),e._v(" "),s("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),s("div",{staticClass:"header-tabs flex -mx-4 flex-wrap"},[s("div",{staticClass:"px-4 text-xs text-blue-500 font-semibold hover:underline"},[s("a",{attrs:{href:"#"}},[e._v(e._s(e.$slots.enabled?e.$slots.enabled[0].text:e.__("Enabled"))+"("+e._s(e.total_enabled)+")")])]),e._v(" "),s("div",{staticClass:"px-4 text-xs text-blue-500 font-semibold hover:underline"},[s("a",{attrs:{href:"#"}},[e._v(e._s(e.$slots.disabled?e.$slots.disabled[0].text:e.__("Disabled"))+" ("+e._s(e.total_disabled)+")")])])])]),e._v(" "),s("div",{staticClass:"module-section flex-auto flex flex-wrap -mx-4"},[e.noModules?s("div",{staticClass:"p-4 flex-auto flex"},[s("div",{staticClass:"flex h-full flex-auto border-dashed border-2 border-gray-600 bg-white justify-center items-center"},[s("h2",{staticClass:"font-bold text-xl text-gray-700"},[e._v(e._s(e.noModuleMessage))])])]):e._e(),e._v(" "),e._l(e.modules,(function(t,r){return s("div",{key:r,staticClass:"px-4 w-full md:w-1/2 lg:w-1/3 py-4"},[s("div",{staticClass:"rounded shadow overflow-hidden"},[s("div",{staticClass:"module-head h-40 p-2 bg-white"},[s("h3",{staticClass:"font-semibold text-lg text-gray-700"},[e._v(e._s(t.name))]),e._v(" "),s("p",{staticClass:"text-gray-600 text-xs flex justify-between"},[s("span",[e._v(e._s(t.author))]),e._v(" "),s("strong",[e._v("v"+e._s(t.version))])]),e._v(" "),s("p",{staticClass:"py-2 text-gray-700 text-sm"},[e._v(e._s(t.description))])]),e._v(" "),s("div",{staticClass:"footer bg-gray-200 p-2 flex justify-between"},[t.enabled?e._e():s("ns-button",{attrs:{type:"info"},on:{click:function(s){return e.enableModule(t)}}},[e._v(e._s(e.__("Enable")))]),e._v(" "),t.enabled?s("ns-button",{attrs:{type:"success"},on:{click:function(s){return e.disableModule(t)}}},[e._v(e._s(e.__("Disable")))]):e._e(),e._v(" "),s("div",{staticClass:"flex -mx-1"},[s("div",{staticClass:"px-1 flex -mx-1"},[s("div",{staticClass:"px-1 flex"},[s("ns-button",{attrs:{type:"info"},on:{click:function(s){return e.download(t)}}},[s("i",{staticClass:"las la-archive"})])],1),e._v(" "),s("div",{staticClass:"px-1 flex"},[s("ns-button",{attrs:{type:"danger"},on:{click:function(s){return e.removeModule(t)}}},[s("i",{staticClass:"las la-trash"})])],1)])])],1)])])}))],2)])}),[],!1,null,null,null).exports;var O=s(9698),E=s(2277);const T={name:"ns-permissions",filters:[O.b],data:function(){return{permissions:[],toggled:!1,roles:[]}},mounted:function(){this.loadPermissionsAndRoles()},methods:{__:o.__,selectAllPermissions:function(e){var t=new Object;if(t[e.namespace]=new Object,!e.locked||e.locked&&confirm(this.$slots["bulk-edit-system-role"]?this.$slots["bulk-edit-system-role"][0].text:'No message has been provided for "bulk-edit-system-role"')){for(var s in e.fields)e.fields[s].value=e.field.value,t[e.namespace][s]=e.field.value;a.ih.put("/api/nexopos/v4/users/roles",t).subscribe((function(e){a.kX.success(e.message,null,{duration:3e3}).subscribe()}))}else e.field.value=!e.field.value},submitPermissions:function(e,t){var s=new Object;s[e.namespace]=new Object,s[e.namespace][t.name]=t.value,a.ih.put("/api/nexopos/v4/users/roles",s).subscribe((function(e){a.kX.success(e.message,null,{duration:3e3}).subscribe()}))},loadPermissionsAndRoles:function(){var e=this;return(0,E.D)(a.ih.get("/api/nexopos/v4/users/roles"),a.ih.get("/api/nexopos/v4/users/permissions")).subscribe((function(t){e.permissions=t[1],e.roles=t[0].map((function(t){return t.fields={},t.field={type:"checkbox",name:t.namespace,value:!1},e.permissions.forEach((function(e){t.fields[e.namespace]={type:"checkbox",value:t.permissions.filter((function(t){return t.namespace===e.namespace})).length>0,name:e.namespace,label:null}})),t}))}))}}};const F=(0,f.Z)(T,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"permission-wrapper"}},[s("div",{staticClass:"rounded shadow bg-white flex"},[s("div",{staticClass:"w- bg-gray-800 flex-shrink-0",attrs:{id:"permissions"}},[s("div",{staticClass:"h-24 py-4 px-2 border-b border-gray-700 text-gray-100 flex justify-between items-center"},[e.toggled?e._e():s("span",[e._v(e._s(e.__("Permissions")))]),e._v(" "),s("div",[e.toggled?e._e():s("button",{staticClass:"rounded-full bg-white text-gray-700 h-6 w-6 flex items-center justify-center",on:{click:function(t){e.toggled=!e.toggled}}},[s("i",{staticClass:"las la-expand"})]),e._v(" "),e.toggled?s("button",{staticClass:"rounded-full bg-white text-gray-700 h-6 w-6 flex items-center justify-center",on:{click:function(t){e.toggled=!e.toggled}}},[s("i",{staticClass:"las la-compress"})]):e._e()])]),e._v(" "),e._l(e.permissions,(function(t){return s("div",{key:t.id,staticClass:"p-2 border-b border-gray-700 text-gray-100",class:e.toggled?"w-24":"w-54"},[s("a",{attrs:{href:"javascript:void(0)",title:t.namespace}},[e.toggled?e._e():s("span",[e._v(e._s(t.name))]),e._v(" "),e.toggled?s("span",[e._v(e._s(e._f("truncate")(t.name,5)))]):e._e()])])}))],2),e._v(" "),s("div",{staticClass:"flex flex-auto overflow-hidden"},[s("div",{staticClass:"overflow-y-auto"},[s("div",{staticClass:"text-gray-700 flex"},e._l(e.roles,(function(t){return s("div",{key:t.id,staticClass:"h-24 py-4 px-2 w-56 items-center border-b justify-center flex role flex-shrink-0 border-r border-gray-200"},[s("p",{staticClass:"mx-1"},[s("span",[e._v(e._s(t.name))])]),e._v(" "),s("span",{staticClass:"mx-1"},[s("ns-checkbox",{attrs:{field:t.field},on:{change:function(s){return e.selectAllPermissions(t)}}})],1)])})),0),e._v(" "),e._l(e.permissions,(function(t){return s("div",{key:t.id,staticClass:"permission flex"},e._l(e.roles,(function(r){return s("div",{key:r.id,staticClass:"border-b border-gray-200 w-56 flex-shrink-0 p-2 flex items-center justify-center border-r"},[s("ns-checkbox",{attrs:{field:r.fields[t.namespace]},on:{change:function(s){return e.submitPermissions(r,r.fields[t.namespace])}}})],1)})),0)}))],2)])])])}),[],!1,null,null,null).exports;var A=s(8774);function V(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?V(Object(s),!0).forEach((function(t){M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const N={data:function(){return{formValidation:new n.Z,nsSnackBar:a.kX,nsHttpClient:a.ih,_sampleVariation:null,form:""}},computed:{defaultVariation:function(){var e=new Object;for(var t in this._sampleVariation.tabs)e[t]=new Object,e[t].label=this._sampleVariation.tabs[t].label,e[t].active=this._sampleVariation.tabs[t].active,e[t].fields=this._sampleVariation.tabs[t].fields.filter((function(e){return console.log(e),!["category_id","product_type","stock_management","expires"].includes(e.name)})).map((function(e){return e.value="",e}));return{id:"",tabs:e}}},props:["submit-method","submit-url","return-url","src","units-url"],methods:{__:o.__,getUnitQuantity:function(e){var t=e.filter((function(e){return"quantity"===e.name})).map((function(e){return e.value}));return t.length>0?t[0]:0},removeUnitPriceGroup:function(e,t){var s=this,r=e.filter((function(e){return"id"===e.name&&void 0!==e.value}));Popup.show(A.Z,{title:(0,o.__)("Confirm Your Action"),message:(0,o.__)("Would you like to delete this group ?"),onAction:function(i){if(i)if(r.length>0)s.confirmUnitQuantityDeletion({group_fields:e,group:t});else{var n=t.indexOf(e);t.splice(n,1)}}})},confirmUnitQuantityDeletion:function(e){var t=e.group_fields,s=e.group;Popup.show(A.Z,{title:(0,o.__)("Your Attention Is Required"),size:"w-3/4-screen h-2/5-screen",message:(0,o.__)("The current unit you're about to delete has a reference on the database and it might have already procured stock. Deleting that reference will remove procured stock. Would you proceed ?"),onAction:function(e){if(e){var r=t.filter((function(e){return"id"===e.name})).map((function(e){return e.value}))[0];a.ih.delete("/api/nexopos/v4/products/units/quantity/".concat(r)).subscribe((function(e){var r=s.indexOf(t);s.splice(r,1),a.kX.success(e.message).subscribe()}),(function(e){nsSnackbar.error(e.message).subscribe()}))}}})},addUnitGroup:function(e){if(0===e.options.length)return a.kX.error((0,o.__)("Please select at least one unit group before you proceed.")).subscribe();e.options.length>e.groups.length?e.groups.push(JSON.parse(JSON.stringify(e.fields))):a.kX.error((0,o.__)("There shoulnd't be more option than there are units.")).subscribe()},loadAvailableUnits:function(e){var t=this;a.ih.get(this.unitsUrl.replace("{id}",e.fields.filter((function(e){return"unit_group"===e.name}))[0].value)).subscribe((function(s){e.fields.forEach((function(e){"group"===e.type&&(e.options=s,e.fields.forEach((function(e){"unit_id"===e.name&&(console.log(e),e.options=s.map((function(e){return{label:e.name,value:e.id}})))})))})),t.$forceUpdate()}))},loadOptionsFor:function(e,t,s){var r=this;a.ih.get(this.unitsUrl.replace("{id}",t)).subscribe((function(t){r.form.variations[s].tabs.units.fields.forEach((function(s){s.name===e&&(s.options=t.map((function(e){return{label:e.name,value:e.id,selected:!1}})))})),r.$forceUpdate()}))},submit:function(){var e=this;if(this.formValidation.validateFields([this.form.main]),this.form.variations.map((function(t){return e.formValidation.validateForm(t)})).filter((function(e){return e.length>0})).length>0||Object.values(this.form.main.errors).length>0)return a.kX.error(this.$slots["error-form-invalid"]?this.$slots["error-form-invalid"][0].text:(0,o.__)("Unable to proceed the form is not valid.")).subscribe();var t=this.form.variations.map((function(e,t){return e.tabs.images.groups.filter((function(e){return e.filter((function(e){return"primary"===e.name&&1===e.value})).length>0}))}));if(t[0]&&t[0].length>1)return a.kX.error(this.$slots["error-multiple-primary"]?this.$slots["error-multiple-primary"][0].text:(0,o.__)("Unable to proceed, more than one product is set as primary")).subscribe();var s=[];if(this.form.variations.map((function(t,r){return t.tabs.units.fields.filter((function(e){return"group"===e.type})).forEach((function(t){new Object;t.groups.forEach((function(t){s.push(e.formValidation.validateFields(t))}))}))})),0===s.length)return a.kX.error(this.$slots["error-no-units-groups"]?this.$slots["error-no-units-groups"][0].text:(0,o.__)("Either Selling or Purchase unit isn't defined. Unable to proceed.")).subscribe();if(s.filter((function(e){return!1===e})).length>0)return this.$forceUpdate(),a.kX.error(this.$slots["error-invalid-unit-group"]?this.$slots["error-invalid-unit-group"][0].text:(0,o.__)("Unable to proceed as one of the unit group field is invalid")).subscribe();var r=q(q({},this.formValidation.extractForm(this.form)),{},{variations:this.form.variations.map((function(t,s){var r=e.formValidation.extractForm(t);0===s&&(r.$primary=!0),r.images=t.tabs.images.groups.map((function(t){return e.formValidation.extractFields(t)}));var i=new Object;return t.tabs.units.fields.filter((function(e){return"group"===e.type})).forEach((function(t){i[t.name]=t.groups.map((function(t){return e.formValidation.extractFields(t)}))})),r.units=q(q({},r.units),i),r}))});this.formValidation.disableForm(this.form),a.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,r).subscribe((function(t){if("success"===t.status){if(!1!==e.returnUrl)return document.location=e.returnUrl;e.$emit("save")}e.formValidation.enableForm(e.form)}),(function(t){a.kX.error(t.message,void 0,{duration:5e3}).subscribe(),e.formValidation.enableForm(e.form),t.response&&e.formValidation.triggerError(e.form,t.response.data)}))},deleteVariation:function(e){confirm(this.$slots["delete-variation"]?this.$slots["delete-variation"][0].text:(0,o.__)("Would you like to delete this variation ?"))&&this.form.variations.splice(e,1)},setTabActive:function(e,t){for(var s in t)s!==e&&(t[s].active=!1);t[e].active=!0,"units"===e&&this.loadAvailableUnits(t[e])},duplicate:function(e){this.form.variations.push(Object.assign({},e))},newVariation:function(){this.form.variations.push(this.defaultVariation)},getActiveTab:function(e){for(var t in e)if(e[t].active)return e[t];return!1},getActiveTabKey:function(e){for(var t in e)if(e[t].active)return t;return!1},parseForm:function(e){var t=this;return e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0],e.variations.forEach((function(e,s){var r=0;for(var i in e.tabs)0===r&&void 0===e.tabs[i].active?(e.tabs[i].active=!0,t._sampleVariation=Object.assign({},e),e.tabs[i].fields&&(e.tabs[i].fields=t.formValidation.createFields(e.tabs[i].fields.filter((function(e){return"name"!==e.name}))))):e.tabs[i].fields&&(e.tabs[i].fields=t.formValidation.createFields(e.tabs[i].fields)),e.tabs[i].active=void 0!==e.tabs[i].active&&e.tabs[i].active,r++})),e},loadForm:function(){var e=this;a.ih.get("".concat(this.src)).subscribe((function(t){e.form=e.parseForm(t.form)}))},addImage:function(e){e.tabs.images.groups.push(this.formValidation.createFields(JSON.parse(JSON.stringify(e.tabs.images.fields))))}},mounted:function(){this.loadForm()},name:"ns-manage-products"};const R=(0,f.Z)(N,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form flex-auto",attrs:{id:"crud-form"}},[0===Object.values(e.form).length?s("div",{staticClass:"flex items-center h-full justify-center flex-auto"},[s("ns-spinner")],1):e._e(),e._v(" "),Object.values(e.form).length>0?[s("div",{staticClass:"flex flex-col"},[s("div",{staticClass:"flex justify-between items-center"},[s("label",{staticClass:"font-bold my-2 text-gray-700",attrs:{for:"title"}},[e._v(e._s(e.form.main.label))]),e._v(" "),s("div",{staticClass:"text-sm my-2 text-gray-700",attrs:{for:"title"}},[e.returnUrl?s("a",{staticClass:"rounded-full border border-gray-400 hover:bg-red-600 hover:text-white bg-white px-2 py-1",attrs:{href:e.returnUrl}},[e._v("Return")]):e._e()])]),e._v(" "),s("div",{staticClass:"flex border-2 rounded overflow-hidden",class:e.form.main.disabled?"border-gray-500":e.form.main.errors.length>0?"border-red-600":"border-blue-500"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-gray-700 outline-none h-10 px-2",class:e.form.main.disabled?"bg-gray-400":"",attrs:{disabled:e.form.main.disabled,type:"text"},domProps:{value:e.form.main.value},on:{blur:function(t){return e.formValidation.checkField(e.form.main)},change:function(t){return e.formValidation.checkField(e.form.main)},input:function(t){t.target.composing||e.$set(e.form.main,"value",t.target.value)}}}),e._v(" "),s("button",{staticClass:"outline-none px-4 h-10 text-white border-l border-gray-400",class:e.form.main.disabled?"bg-gray-500":e.form.main.errors.length>0?"bg-red-500":"bg-blue-500",attrs:{disabled:e.form.main.disabled},on:{click:function(t){return e.submit()}}},[e._t("save",(function(){return[e._v(e._s(e.__("Save")))]}))],2)]),e._v(" "),e.form.main.description&&0===e.form.main.errors.length?s("p",{staticClass:"text-xs text-gray-600 py-1"},[e._v(e._s(e.form.main.description))]):e._e(),e._v(" "),e._l(e.form.main.errors,(function(t,r){return s("p",{key:r,staticClass:"text-xs py-1 text-red-500"},[s("span",[e._t("error-required",(function(){return[e._v(e._s(t.identifier))]}))],2)])}))],2),e._v(" "),s("div",{staticClass:"-mx-4 flex flex-wrap mt-4",attrs:{id:"form-container"}},[s("div",{staticClass:"px-4 w-full"},e._l(e.form.variations,(function(t,r){return s("div",{key:r,staticClass:"mb-8",attrs:{id:"tabbed-card"}},[s("div",{staticClass:"flex flex-wrap justify-between",attrs:{id:"card-header"}},[s("div",{staticClass:"flex flex-wrap"},e._l(t.tabs,(function(r,i){return s("div",{key:i,staticClass:"cursor-pointer text-gray-700 px-4 py-2 rounded-tl-lg rounded-tr-lg flex justify-between",class:r.active?"bg-white":"bg-gray-100",on:{click:function(s){return e.setTabActive(i,t.tabs)}}},[s("span",{staticClass:"block mr-2"},[e._v(e._s(r.label))]),e._v(" "),r.errors&&r.errors.length>0?s("span",{staticClass:"rounded-full bg-red-400 text-white h-6 w-6 flex font-semibold items-center justify-center"},[e._v(e._s(r.errors.length))]):e._e()])})),0),e._v(" "),s("div",{staticClass:"flex items-center justify-center -mx-1"})]),e._v(" "),s("div",{staticClass:"card-body bg-white rounded-br-lg rounded-bl-lg shadow p-2"},[["images","units"].includes(e.getActiveTabKey(t.tabs))?e._e():s("div",{staticClass:"-mx-4 flex flex-wrap"},[e._l(e.getActiveTab(t.tabs).fields,(function(e,t){return[s("div",{key:t,staticClass:"flex flex-col px-4 w-full md:w-1/2 lg:w-1/3"},[s("ns-field",{attrs:{field:e}})],1)]}))],2),e._v(" "),"images"===e.getActiveTabKey(t.tabs)?s("div",{staticClass:"-mx-4 flex flex-wrap"},[s("div",{staticClass:"flex flex-col px-4 w-full md:w-1/2 lg:w-1/3"},[s("div",{staticClass:"rounded border flex bg-white justify-between p-2 items-center"},[s("span",[e._v(e._s(e.__("Add Images")))]),e._v(" "),s("button",{staticClass:"rounded-full border flex items-center justify-center w-8 h-8 bg-white hover:bg-blue-400 hover:text-white",on:{click:function(s){return e.addImage(t)}}},[s("i",{staticClass:"las la-plus-circle"})])])]),e._v(" "),e._l(e.getActiveTab(t.tabs).groups,(function(t,r){return s("div",{key:r,staticClass:"flex flex-col px-4 w-full md:w-1/2 lg:w-1/3 mb-4"},[s("div",{staticClass:"rounded border flex flex-col bg-white p-2"},e._l(t,(function(e,t){return s("ns-field",{key:t,attrs:{field:e}})})),1)])}))],2):e._e(),e._v(" "),"units"===e.getActiveTabKey(t.tabs)?s("div",{staticClass:"-mx-4 flex flex-wrap"},[s("div",{staticClass:"px-4 w-full md:w-1/2 lg:w-1/3"},[s("ns-field",{attrs:{field:e.getActiveTab(t.tabs).fields[0]},on:{change:function(s){e.loadAvailableUnits(e.getActiveTab(t.tabs))}}}),e._v(" "),s("ns-field",{attrs:{field:e.getActiveTab(t.tabs).fields[1]},on:{change:function(s){e.loadAvailableUnits(e.getActiveTab(t.tabs))}}})],1),e._v(" "),e._l(e.getActiveTab(t.tabs).fields,(function(t,r){return["group"===t.type?s("div",{key:r,staticClass:"px-4 w-full lg:w-2/3"},[s("div",{staticClass:"mb-2"},[s("label",{staticClass:"font-medium text-gray-700"},[e._v(e._s(t.label))]),e._v(" "),s("p",{staticClass:"py-1 text-sm text-gray-600"},[e._v(e._s(t.description))])]),e._v(" "),s("div",{staticClass:"mb-2"},[s("div",{staticClass:"border-dashed border-2 border-gray-200 p-1 bg-gray-100 flex justify-between items-center text-gray-700 cursor-pointer rounded-lg",on:{click:function(s){return e.addUnitGroup(t)}}},[e._m(0,!0),e._v(" "),s("span",[e._v(e._s(e.__("New Group")))])])]),e._v(" "),s("div",{staticClass:"-mx-4 flex flex-wrap"},e._l(t.groups,(function(r,i){return s("div",{key:i,staticClass:"px-4 w-full md:w-1/2 mb-4"},[s("div",{staticClass:"shadow rounded overflow-hidden"},[s("div",{staticClass:"border-b text-sm bg-blue-400 text-white  border-blue-300 p-2 flex justify-between"},[s("span",[e._v(e._s(e.__("Available Quantity")))]),e._v(" "),s("span",[e._v(e._s(e.getUnitQuantity(r)))])]),e._v(" "),s("div",{staticClass:"p-2 mb-2"},e._l(r,(function(e,t){return s("ns-field",{key:t,attrs:{field:e}})})),1),e._v(" "),s("div",{staticClass:"p-1 text-red-800 hover:bg-red-200 border-t border-red-200 flex items-center justify-center cursor-pointer font-medium",on:{click:function(s){return e.removeUnitPriceGroup(r,t.groups)}}},[e._v("\n                                                    "+e._s(e.__("Delete"))+"\n                                                ")])])])})),0)]):e._e()]}))],2):e._e()])])})),0)])]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"rounded-full border-2 border-gray-300 bg-white h-8 w-8 flex items-center justify-center"},[t("i",{staticClass:"las la-plus-circle"})])}],!1,null,null,null).exports;function Z(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,s,r;return t=e,r=[{key:"compute",value:function(t,s,r){switch(t){case"inclusive":return e.computeInclusive(s,r);case"exclusive":return e.computeExclusive(s,r)}}},{key:"computeInclusive",value:function(e,t){return e/(t+100)*100}},{key:"computeExclusive",value:function(e,t){return e/100*(t+100)}},{key:"getTaxValue",value:function(t,s,r){switch(t){case"inclusive":return s-e.compute(t,s,r);case"exclusive":return e.compute(t,s,r)-s}return 0}}],(s=null)&&Z(t.prototype,s),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const X={name:"ns-procurement-product-options",data:function(){return{validation:new n.Z,fields:[],rawFields:[{label:(0,o.__)("Expiration Date"),name:"expiration_date",description:(0,o.__)("Define when that specific product should expire."),type:"datetimepicker"},{label:(0,o.__)("Barcode"),name:"barcode",description:(0,o.__)("Renders the automatically generated barcode."),type:"text",disabled:!0},{label:(0,o.__)("Tax Type"),name:"tax_type",description:(0,o.__)("Adjust how tax is calculated on the item."),type:"select",options:[{label:(0,o.__)("Inclusive"),value:"inclusive"},{label:(0,o.__)("Exclusive"),value:"exclusive"}]}]}},methods:{__:o.__,applyChanges:function(){if(this.validation.validateFields(this.fields)){var e=this.validation.extractFields(this.fields);return this.$popupParams.resolve(e),this.$popup.close()}return a.kX.error((0,o.__)("Unable to proceed. The form is not valid.")).subscribe()}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&e.$popup.close()}));var t=this.rawFields.map((function(t){return"expiration_date"===t.name&&(t.value=e.$popupParams.product.procurement.expiration_date),"tax_type"===t.name&&(t.value=e.$popupParams.product.procurement.tax_type),"barcode"===t.name&&(t.value=e.$popupParams.product.procurement.barcode),t}));this.fields=this.validation.createFields(t)}};const L=(0,f.Z)(X,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow-lg w-6/7-screen md:w-5/7-screen lg:w-3/7-screen"},[e._m(0),e._v(" "),s("div",{staticClass:"p-2 border-b border-gray-200"},e._l(e.fields,(function(e,t){return s("ns-field",{key:t,staticClass:"w-full",attrs:{field:e}})})),1),e._v(" "),s("div",{staticClass:"p-2 flex justify-end"},[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.applyChanges()}}},[e._v("Save")])],1)])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2 border-b border-gray-200"},[s("h5",{staticClass:"font-semibold"},[e._v("Options")])])}],!1,null,null,null).exports;function z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function Y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const W={name:"ns-procurement",mounted:function(){this.reloadEntities()},computed:{activeTab:function(){return this.validTabs.filter((function(e){return e.active})).length>0&&this.validTabs.filter((function(e){return e.active}))[0]}},data:function(){return{totalTaxValues:0,totalPurchasePrice:0,formValidation:new n.Z,form:{},nsSnackBar:a.kX,fields:[],searchResult:[],searchValue:"",debounceSearch:null,nsHttpClient:a.ih,taxes:[],validTabs:[{label:(0,o.__)("Details"),identifier:"details",active:!0},{label:(0,o.__)("Products"),identifier:"products",active:!1}],reloading:!1}},watch:{searchValue:function(e){var t=this;e&&(clearTimeout(this.debounceSearch),this.debounceSearch=setTimeout((function(){t.doSearch(e)}),500))}},components:{NsManageProducts:R},props:["submit-method","submit-url","return-url","src","rules"],methods:{__:o.__,computeTotal:function(){this.totalTaxValues=0,this.form.products.length>0&&(this.totalTaxValues=this.form.products.map((function(e){return e.procurement.tax_value})).reduce((function(e,t){return e+t}))),this.totalPurchasePrice=0,this.form.products.length>0&&(this.totalPurchasePrice=this.form.products.map((function(e){return parseFloat(e.procurement.total_purchase_price)})).reduce((function(e,t){return e+t})))},updateLine:function(e){var t=this.form.products[e],s=this.taxes.filter((function(e){return e.id===t.procurement.tax_group_id}));if(parseFloat(t.procurement.purchase_price_edit)>0&&parseFloat(t.procurement.quantity)>0){if(s.length>0){var r=s[0].taxes.map((function(e){return U.getTaxValue(t.procurement.tax_type,t.procurement.purchase_price_edit,parseFloat(e.rate))}));t.procurement.tax_value=r.reduce((function(e,t){return e+t})),"inclusive"===t.procurement.tax_type?(t.procurement.net_purchase_price=parseFloat(t.procurement.purchase_price_edit)-t.procurement.tax_value,t.procurement.gross_purchase_price=parseFloat(t.procurement.purchase_price_edit),t.procurement.purchase_price=parseFloat(t.procurement.gross_purchase_price)):(t.procurement.gross_purchase_price=parseFloat(t.procurement.purchase_price_edit)+t.procurement.tax_value,t.procurement.net_purchase_price=parseFloat(t.procurement.purchase_price_edit),t.procurement.purchase_price=parseFloat(t.procurement.gross_purchase_price))}else t.procurement.gross_purchase_price=parseFloat(t.procurement.purchase_price_edit),t.procurement.purchase_price=parseFloat(t.procurement.purchase_price_edit),t.procurement.net_purchase_price=parseFloat(t.procurement.purchase_price_edit),t.procurement.tax_value=0;t.procurement.tax_value=t.procurement.tax_value*parseFloat(t.procurement.quantity),t.procurement.total_purchase_price=t.procurement.purchase_price*parseFloat(t.procurement.quantity)}this.computeTotal(),this.$forceUpdate()},fetchLastPurchasePrice:function(e){var t=this.form.products[e],s=t.unit_quantities.filter((function(e){return t.procurement.unit_id===e.unit_id}));s.length>0&&(t.procurement.purchase_price_edit=s[0].last_purchase_price||0),this.updateLine(e)},switchTaxType:function(e,t){e.procurement.tax_type="inclusive"===e.procurement.tax_type?"exclusive":"inclusive",this.updateLine(t)},doSearch:function(e){var t=this;a.ih.post("/api/nexopos/v4/procurements/products/search-product",{search:e}).subscribe((function(e){1===e.length?t.addProductList(e[0]):e.length>1?t.searchResult=e:a.kX.error((0,o.__)("No result match your query.")).subscribe()}))},reloadEntities:function(){var e=this;this.reloading=!0,(0,E.D)([a.ih.get("/api/nexopos/v4/categories"),a.ih.get("/api/nexopos/v4/products"),a.ih.get(this.src),a.ih.get("/api/nexopos/v4/taxes/groups")]).subscribe((function(t){e.reloading=!1,e.categories=t[0],e.products=t[1],e.taxes=t[3],e.form.general&&t[2].tabs.general.fieds.forEach((function(t,s){t.value=e.form.tabs.general.fields[s].value||""})),e.form=Object.assign(JSON.parse(JSON.stringify(t[2])),e.form),e.form=e.formValidation.createForm(e.form),e.form.tabs&&e.form.tabs.general.fields.forEach((function(e,s){e.options&&(e.options=t[2].tabs.general.fields[s].options)})),0===e.form.products.length&&(e.form.products=e.form.products.map((function(e){return["gross_purchase_price","purchase_price_edit","tax_value","net_purchase_price","purchase_price","total_price","total_purchase_price","quantity","tax_group_id"].forEach((function(t){void 0===e[t]&&(e[t]=void 0===e[t]?0:e[t])})),e.$invalid=e.$invalid||!1,e.purchase_price_edit=e.purchase_price,{name:e.name,purchase_units:e.purchase_units,procurement:e,unit_quantities:e.unit_quantities||[]}}))),e.$forceUpdate()}))},setTabActive:function(e){this.validTabs.forEach((function(e){return e.active=!1})),this.$forceUpdate(),this.$nextTick().then((function(){e.active=!0}))},addProductList:function(e){if(void 0===e.unit_quantities)return a.kX.error((0,o.__)("Unable to add product which doesn't unit quantities defined.")).subscribe();e.procurement=new Object,e.procurement.gross_purchase_price=0,e.procurement.purchase_price_edit=0,e.procurement.tax_value=0,e.procurement.net_purchase_price=0,e.procurement.purchase_price=0,e.procurement.total_price=0,e.procurement.total_purchase_price=0,e.procurement.quantity=1,e.procurement.expiration_date=null,e.procurement.tax_group_id=0,e.procurement.tax_type="inclusive",e.procurement.unit_id=0,e.procurement.product_id=e.id,e.procurement.procurement_id=null,e.procurement.$invalid=!1,this.searchResult=[],this.searchValue="",this.form.products.push(e)},submit:function(){var e=this;if(0===this.form.products.length)return a.kX.error(this.$slots["error-no-products"]?this.$slots["error-no-products"][0].text:(0,o.__)("Unable to proceed, no product were provided."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();if(this.form.products.forEach((function(e){!parseFloat(e.procurement.quantity)>=1||0===e.procurement.unit_id?e.procurement.$invalid=!0:e.procurement.$invalid=!1})),this.form.products.filter((function(e){return e.procurement.$invalid})).length>0)return a.kX.error(this.$slots["error-invalid-products"]?this.$slots["error-invalid-products"][0].text:(0,o.__)("Unable to proceed, one or more product has incorrect values."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();if(this.formValidation.validateForm(this.form).length>0)return this.setTabActive(this.activeTab),a.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:(0,o.__)("Unable to proceed, the procurement form is not valid."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();if(void 0===this.submitUrl)return a.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:(0,o.__)("Unable to submit, no valid submit URL were provided."),this.$slots.okay?this.$slots.okay[0].text:(0,o.__)("OK")).subscribe();this.formValidation.disableForm(this.form);var t=Y(Y({},this.formValidation.extractForm(this.form)),{products:this.form.products.map((function(e){return e.procurement}))});a.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,t).subscribe((function(t){if("success"===t.status)return document.location=e.returnUrl;e.formValidation.enableForm(e.form)}),(function(t){a.kX.error(t.message,void 0,{duration:5e3}).subscribe(),e.formValidation.enableForm(e.form),t.errors&&e.formValidation.triggerError(e.form,t.errors)}))},deleteProduct:function(e){this.form.products.splice(e,1),this.$forceUpdate()},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},setProductOptions:function(e){var t=this;new Promise((function(s,r){Popup.show(L,{product:t.form.products[e],resolve:s,reject:r})})).then((function(s){for(var r in s)t.form.products[e].procurement[r]=s[r];t.updateLine(e)}))}}};const H=(0,f.Z)(W,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form flex-auto flex flex-col",attrs:{id:"crud-form"}},[e.form.main?[s("div",{staticClass:"flex flex-col"},[s("div",{staticClass:"flex justify-between items-center"},[s("label",{staticClass:"font-bold my-2 text-gray-700",attrs:{for:"title"}},[e._v(e._s(e.form.main.label||e.__("No title is provided")))]),e._v(" "),s("div",{staticClass:"text-sm my-2 text-gray-700",attrs:{for:"title"}},[e.returnUrl?s("a",{staticClass:"rounded-full border border-gray-400 hover:bg-red-600 hover:text-white bg-white px-2 py-1",attrs:{href:e.returnUrl}},[e._v(e._s(e.__("Go Back")))]):e._e()])]),e._v(" "),s("div",{staticClass:"flex border-2 rounded overflow-hidden",class:e.form.main.disabled?"border-gray-500":e.form.main.errors.length>0?"border-red-600":"border-blue-500"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.main.value,expression:"form.main.value"}],staticClass:"flex-auto text-gray-700 outline-none h-10 px-2",class:e.form.main.disabled?"bg-gray-400":"",attrs:{disabled:e.form.main.disabled,type:"text"},domProps:{value:e.form.main.value},on:{blur:function(t){return e.formValidation.checkField(e.form.main)},change:function(t){return e.formValidation.checkField(e.form.main)},input:function(t){t.target.composing||e.$set(e.form.main,"value",t.target.value)}}}),e._v(" "),s("button",{staticClass:"outline-none px-4 h-10 text-white border-l border-gray-400",class:e.form.main.disabled?"bg-gray-500":e.form.main.errors.length>0?"bg-red-500":"bg-blue-500",attrs:{disabled:e.form.main.disabled},on:{click:function(t){return e.submit()}}},[e._t("save",(function(){return[e._v(e._s(e.__("Save")))]}))],2),e._v(" "),s("button",{staticClass:"bg-white text-gray-700 outline-none px-4 h-10 border-gray-400",on:{click:function(t){return e.reloadEntities()}}},[s("i",{staticClass:"las la-sync",class:e.reloading?"animate animate-spin":""})])]),e._v(" "),e.form.main.description&&0===e.form.main.errors.length?s("p",{staticClass:"text-xs text-gray-600 py-1"},[e._v(e._s(e.form.main.description))]):e._e(),e._v(" "),e._l(e.form.main.errors,(function(t,r){return s("p",{key:r,staticClass:"text-xs py-1 text-red-500"},[s("span",[e._t("error-required",(function(){return[e._v(e._s(t.identifier))]}))],2)])}))],2),e._v(" "),s("div",{staticClass:"-mx-4 flex flex-wrap mt-4",attrs:{id:"form-container"}},[s("div",{staticClass:"px-4 w-full"},[s("div",{attrs:{id:"tabbed-card"}},[s("div",{staticClass:"flex flex-wrap",attrs:{id:"card-header"}},e._l(e.validTabs,(function(t,r){return s("div",{key:r,staticClass:"cursor-pointer px-4 py-2 rounded-tl-lg rounded-tr-lg text-gray-700",class:t.active?"bg-white":"bg-gray-100",on:{click:function(s){return e.setTabActive(t)}}},[e._v("\n                            "+e._s(t.label)+"\n                        ")])})),0),e._v(" "),"details"===e.activeTab.identifier?s("div",{staticClass:"card-body bg-white rounded-br-lg rounded-bl-lg shadow p-2"},[e.form.tabs?s("div",{staticClass:"-mx-4 flex flex-wrap"},e._l(e.form.tabs.general.fields,(function(e,t){return s("div",{key:t,staticClass:"flex px-4 w-full md:w-1/2 lg:w-1/3"},[s("ns-field",{attrs:{field:e}})],1)})),0):e._e()]):e._e(),e._v(" "),"products"===e.activeTab.identifier?s("div",{staticClass:"card-body bg-white rounded-br-lg rounded-bl-lg shadow p-2 "},[s("div",{staticClass:"mb-2"},[s("div",{staticClass:"border-blue-500 flex border-2 rounded overflow-hidden"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"flex-auto text-gray-700 outline-none h-10 px-2",attrs:{type:"text",placeholder:e.$slots["search-placeholder"]?e.$slots["search-placeholder"][0].text:"SKU, Barcode, Name"},domProps:{value:e.searchValue},on:{input:function(t){t.target.composing||(e.searchValue=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"h-0"},[s("div",{staticClass:"shadow bg-white relative z-10"},e._l(e.searchResult,(function(t,r){return s("div",{key:r,staticClass:"cursor-pointer border border-b border-gray-300 p-2 text-gray-700",on:{click:function(s){return e.addProductList(t)}}},[s("span",{staticClass:"block font-bold text-gray-700"},[e._v(e._s(t.name))]),e._v(" "),s("span",{staticClass:"block text-sm text-gray-600"},[e._v(e._s(e.__("SKU"))+" : "+e._s(t.sku))]),e._v(" "),s("span",{staticClass:"block text-sm text-gray-600"},[e._v(e._s(e.__("Barcode"))+" : "+e._s(t.barcode))])])})),0)])]),e._v(" "),s("div",{staticClass:"overflow-x-auto"},[s("table",{staticClass:"w-full"},[s("thead",[s("tr",e._l(e.form.columns,(function(t,r){return s("td",{key:r,staticClass:"text-gray-700 p-2 border border-gray-300 bg-gray-200",attrs:{width:"200"}},[e._v(e._s(t.label))])})),0)]),e._v(" "),s("tbody",[e._l(e.form.products,(function(t,r){return s("tr",{key:r,class:t.procurement.$invalid?"bg-red-200 border-2 border-red-500":"bg-gray-100"},[e._l(e.form.columns,(function(i,n){return["name"===i.type?s("td",{key:n,staticClass:"p-2 text-gray-600 border border-gray-300"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"flex justify-between"},[s("div",{staticClass:"flex -mx-1 flex-col"},[s("div",{staticClass:"px-1"},[s("span",{staticClass:"text-xs text-red-500 cursor-pointer underline px-1",on:{click:function(t){return e.deleteProduct(r)}}},[e._v(e._s(e.__("Delete")))])])]),e._v(" "),s("div",{staticClass:"flex -mx-1 flex-col"},[s("div",{staticClass:"px-1"},[s("span",{staticClass:"text-xs text-red-500 cursor-pointer underline px-1",on:{click:function(t){return e.setProductOptions(r)}}},[e._v(e._s(e.__("Options")))])])])])]):e._e(),e._v(" "),"text"===i.type?s("td",{key:n,staticClass:"p-2 w-3 text-gray-600 border border-gray-300"},[s("div",{staticClass:"flex items-start"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.procurement[n],expression:"product.procurement[ key ]"}],staticClass:"w-24 border-2 p-2 border-blue-400 rounded",attrs:{type:"text"},domProps:{value:t.procurement[n]},on:{change:function(t){return e.updateLine(r)},input:function(s){s.target.composing||e.$set(t.procurement,n,s.target.value)}}})])]):e._e(),e._v(" "),"tax_group_id"===i.type?s("td",{key:n,staticClass:"p-2 text-gray-600 border border-gray-300"},[s("div",{staticClass:"flex items-start"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.procurement.tax_group_id,expression:"product.procurement.tax_group_id"}],staticClass:"rounded border-blue-500 border-2 p-2",on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t.procurement,"tax_group_id",s.target.multiple?r:r[0])},function(t){return e.updateLine(r)}]}},e._l(e.taxes,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])]):e._e(),e._v(" "),"custom_select"===i.type?s("td",{key:n,staticClass:"p-2 text-gray-600 border border-gray-300"},[s("div",{staticClass:"flex items-start"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.procurement[n],expression:"product.procurement[ key ]"}],staticClass:"rounded border-blue-500 border-2 p-2",on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t.procurement,n,s.target.multiple?r:r[0])},function(t){return e.updateLine(r)}]}},e._l(i.options,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)])]):e._e(),e._v(" "),"currency"===i.type?s("td",{key:n,staticClass:"p-2 text-gray-600 border border-gray-300"},[s("div",{staticClass:"flex items-start flex-col justify-end"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(e._s(e._f("currency")(t.procurement[n])))])])]):e._e(),e._v(" "),"unit_quantities"===i.type?s("td",{key:n,staticClass:"p-2 text-gray-600 border border-gray-300"},[s("div",{staticClass:"flex items-start"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.procurement.unit_id,expression:"product.procurement.unit_id"}],staticClass:"rounded border-blue-500 border-2 p-2 w-32",on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t.procurement,"unit_id",s.target.multiple?r:r[0])},function(t){return e.fetchLastPurchasePrice(r)}]}},e._l(t.unit_quantities,(function(t){return s("option",{key:t.id,domProps:{value:t.unit.id}},[e._v(e._s(t.unit.name))])})),0)])]):e._e()]}))],2)})),e._v(" "),s("tr",{staticClass:"bg-gray-100"},[s("td",{staticClass:"p-2 text-gray-600 border border-gray-300",attrs:{colspan:Object.keys(e.form.columns).indexOf("tax_value")}}),e._v(" "),s("td",{staticClass:"p-2 text-gray-600 border border-gray-300"},[e._v(e._s(e._f("currency")(e.totalTaxValues)))]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600 border border-gray-300",attrs:{colspan:Object.keys(e.form.columns).indexOf("total_purchase_price")-(Object.keys(e.form.columns).indexOf("tax_value")+1)}}),e._v(" "),s("td",{staticClass:"p-2 text-gray-600 border border-gray-300"},[e._v(e._s(e._f("currency")(e.totalPurchasePrice)))])])],2)])])]):e._e()])])])]:e._e()],2)}),[],!1,null,null,null).exports,B={template:"#ns-procurement-invoice",methods:{printInvoice:function(){this.$htmlToPaper("printable-container")}}};const G=(0,f.Z)(B,undefined,undefined,!1,null,null,null).exports;const Q={name:"ns-notifications",data:function(){return{notifications:[],visible:!1,interval:null}},mounted:function(){var e=this;document.addEventListener("click",this.checkClickedItem),ns.websocket.enabled?Echo.private("ns.private-channel").listen("App\\Events\\NotificationDispatchedEvent",(function(t){e.pushNotificationIfNew(t.notification)})).listen("App\\Events\\NotificationDeletedEvent",(function(t){e.deleteNotificationIfExists(t.notification)})):this.interval=setInterval((function(){e.loadNotifications()}),15e3),this.loadNotifications()},destroyed:function(){clearInterval(this.interval)},methods:{__:o.__,pushNotificationIfNew:function(e){var t=this.notifications.filter((function(t){return t.id===e.id})).length>0;console.log(e),t||this.notifications.push(e)},deleteNotificationIfExists:function(e){var t=this.notifications.filter((function(t){return t.id===e.id}));if(t.length>0){var s=this.notifications.indexOf(t[0]);this.notifications.splice(s,1)}},deleteAll:function(){Popup.show(A.Z,{title:(0,o.__)("Confirm Your Action"),message:(0,o.__)("Would you like to clear all the notifications ?"),onAction:function(e){e&&a.ih.delete("/api/nexopos/v4/notifications/all").subscribe((function(e){a.kX.success(e.message).subscribe()}))}})},checkClickedItem:function(e){var t;t=!!document.getElementById("notification-center")&&document.getElementById("notification-center").contains(e.srcElement);var s=document.getElementById("notification-button").contains(e.srcElement);t||s||!this.visible||(this.visible=!1)},loadNotifications:function(){var e=this;a.ih.get("/api/nexopos/v4/notifications").subscribe((function(t){e.notifications=t}))},triggerLink:function(e){if("url"!==e.url)return window.open(e.url,"_blank")},closeNotice:function(e,t){var s=this;a.ih.delete("/api/nexopos/v4/notifications/".concat(t.id)).subscribe((function(e){s.loadNotifications()})),e.stopPropagation()}}};const K=(0,f.Z)(Q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"hover:bg-white hover:text-gray-700 hover:shadow-lg hover:border-opacity-0 rounded-full h-12 w-12 cursor-pointer font-bold text-2xl justify-center items-center flex text-gray-800",class:e.visible?"bg-white border-0 shadow-lg":"border border-gray-400",attrs:{id:"notification-button"},on:{click:function(t){e.visible=!e.visible}}},[e.notifications.length>0?s("div",{staticClass:"relative float-right"},[s("div",{staticClass:"absolute -ml-6 -mt-8"},[s("div",{staticClass:"bg-blue-400 text-white w-8 h-8 rounded-full text-xs flex items-center justify-center"},[e._v(e._s(e._f("abbreviate")(e.notifications.length)))])])]):e._e(),e._v(" "),s("i",{staticClass:"las la-bell"})]),e._v(" "),e.visible?s("div",{staticClass:"h-0 w-0",attrs:{id:"notification-center"}},[s("div",{staticClass:"absolute left-0 top-0 sm:relative w-screen zoom-out-entrance anim-duration-300 h-5/7-screen sm:w-64 sm:h-108 flex flex-row-reverse"},[s("div",{staticClass:"z-50 sm:rounded-lg shadow-lg h-full w-full bg-white md:mt-2 overflow-y-hidden flex flex-col"},[s("div",{staticClass:"sm:hidden p-2 cursor-pointer flex items-center justify-center border-b border-gray-200",on:{click:function(t){e.visible=!1}}},[s("h3",{staticClass:"font-semibold hover:text-blue-400"},[e._v("Close")])]),e._v(" "),s("div",{staticClass:"overflow-y-auto flex flex-col flex-auto"},[e._l(e.notifications,(function(t){return s("div",{key:t.id,staticClass:"notice border-b border-gray-200"},[s("div",{staticClass:"p-2 cursor-pointer",on:{click:function(s){return e.triggerLink(t)}}},[s("div",{staticClass:"flex items-center justify-between"},[s("h1",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(t.title))]),e._v(" "),s("ns-close-button",{on:{click:function(s){return e.closeNotice(s,t)}}})],1),e._v(" "),s("p",{staticClass:"py-1 text-gray-600 text-sm"},[e._v(e._s(t.description))])])])})),e._v(" "),0===e.notifications.length?s("div",{staticClass:"h-full w-full flex items-center justify-center"},[s("div",{staticClass:"flex flex-col items-center"},[s("i",{staticClass:"las la-laugh-wink text-5xl text-gray-800"}),e._v(" "),s("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(e.__("Nothing to care about !")))])])]):e._e()],2),e._v(" "),s("div",{staticClass:"cursor-pointer"},[s("h3",{staticClass:"text-sm p-2 flex items-center justify-center hover:bg-red-100 w-full text-red-400 font-semibold hover:text-red-500",on:{click:function(t){return e.deleteAll()}}},[e._v(e._s(e.__("Clear All")))])])])])]):e._e()])}),[],!1,null,null,null).exports;var J=s(8515),ee=s(381),te=s.n(ee),se=s(1544),re=s(7949);const ie={name:"ns-low-stock-report",mounted:function(){},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},data:function(){return{products:[]}},computed:{},methods:{printSaleReport:function(){this.$htmlToPaper("low-stock-report")},loadReport:function(){var e=this;a.ih.get("/api/nexopos/v4/reports/low-stock").subscribe({next:function(t){e.products=t},error:function(e){a.kX.error(e.message).subscribe()}})}}};const ne=(0,f.Z)(ie,undefined,undefined,!1,null,null,null).exports;var ae=s(7479);function oe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(s),!0).forEach((function(t){ce(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ce(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ue(e,t,s,r,i,n,a){try{var o=e[n](a),l=o.value}catch(e){return void s(e)}o.done?t(l):Promise.resolve(l).then(r,i)}const de={name:"ns-sale-report",data:function(){return{startDate:te()(),endDate:te()(),result:[],summary:{},reportType:{label:(0,o.__)("Report Type"),name:"reportType",type:"select",value:"categories_report",options:[{label:(0,o.__)("Categories Detailed"),name:"categories_report"},{label:(0,o.__)("Categories Summary"),name:"categories_summary"},{label:(0,o.__)("Products"),name:"products_report"}],description:(0,o.__)("Allow you to choose the report type.")},field:{type:"datetimepicker",value:"2021-02-07",name:"date"}}},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},computed:{},methods:{printSaleReport:function(){this.$htmlToPaper("sale-report")},setStartDate:function(e){this.startDate=e.format()},openSettings:function(){var e,t=this;return(e=C().mark((function e(){var s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,s){Popup.show(ae.Z,le(le({},t.reportType),{},{resolve:e,reject:s}))}));case 3:s=e.sent,t.reportType.value=s[0].name,t.result=[],t.loadReport(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,s=arguments;return new Promise((function(r,i){var n=e.apply(t,s);function a(e){ue(n,r,i,a,o,"next",e)}function o(e){ue(n,r,i,a,o,"throw",e)}a(void 0)}))})()},getType:function(e){var t=this.reportType.options.filter((function(t){return t.name===e}));return t.length>0?t[0].label:(0,o.__)("Unknown")},loadReport:function(){var e=this;if(null===this.startDate||null===this.endDate)return a.kX.error((0,o.__)("Unable to proceed. Select a correct time range.")).subscribe();var t=te()(this.startDate);if(te()(this.endDate).isBefore(t))return a.kX.error((0,o.__)("Unable to proceed. The current time range is not valid.")).subscribe();a.ih.post("/api/nexopos/v4/reports/sale-report",{startDate:this.startDate,endDate:this.endDate,type:this.reportType.value}).subscribe({next:function(t){e.result=t.result,e.summary=t.summary},error:function(e){a.kX.error(e.message).subscribe()}})},computeTotal:function(e,t){return e.length>0?(console.log("computes"),e.map((function(e){return parseFloat(e[t])})).reduce((function(e,t){return e+t}))):0},setEndDate:function(e){this.endDate=e.format()}}},fe=de;const pe=(0,f.Z)(fe,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports;const he={name:"ns-sold-stock-report",data:function(){return{startDate:te()(),endDate:te()(),products:[]}},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},computed:{totalQuantity:function(){return this.products.length>0?this.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):0},totalTaxes:function(){return this.products.length>0?this.products.map((function(e){return e.tax_value})).reduce((function(e,t){return e+t})):0},totalPrice:function(){return console.log(this.products),this.products.length>0?this.products.map((function(e){return e.total_price})).reduce((function(e,t){return e+t})):0}},methods:{printSaleReport:function(){this.$htmlToPaper("report-printable")},setStartDate:function(e){this.startDate=e.format()},loadReport:function(){var e=this;if(null===this.startDate||null===this.endDate)return a.kX.error((0,o.__)("Unable to proceed. Select a correct time range.")).subscribe();var t=te()(this.startDate);if(te()(this.endDate).isBefore(t))return a.kX.error((0,o.__)("Unable to proceed. The current time range is not valid.")).subscribe();a.ih.post("/api/nexopos/v4/reports/sold-stock-report",{startDate:this.startDate,endDate:this.endDate}).subscribe({next:function(t){e.products=t},error:function(e){a.kX.error(e.message).subscribe()}})},setEndDate:function(e){this.endDate=e.format()}}},me=he;const ve=(0,f.Z)(me,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports;const be={name:"ns-profit-report",data:function(){return{startDate:te()(),endDate:te()(),products:[]}},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},computed:{totalQuantities:function(){return this.products.length>0?this.products.map((function(e){return e.quantity})).reduce((function(e,t){return e+t})):0},totalPurchasePrice:function(){return this.products.length>0?this.products.map((function(e){return e.total_purchase_price})).reduce((function(e,t){return e+t})):0},totalSalePrice:function(){return this.products.length>0?this.products.map((function(e){return e.total_price})).reduce((function(e,t){return e+t})):0},totalProfit:function(){return this.products.length>0?this.products.map((function(e){return e.total_price-e.total_purchase_price})).reduce((function(e,t){return e+t})):0},totalTax:function(){return this.products.length>0?this.products.map((function(e){return e.tax_value})).reduce((function(e,t){return e+t})):0}},methods:{printSaleReport:function(){this.$htmlToPaper("profit-report")},setStartDate:function(e){this.startDate=e.format()},loadReport:function(){var e=this;if(null===this.startDate||null===this.endDate)return a.kX.error((0,o.__)("Unable to proceed. Select a correct time range.")).subscribe();var t=te()(this.startDate);if(te()(this.endDate).isBefore(t))return a.kX.error((0,o.__)("Unable to proceed. The current time range is not valid.")).subscribe();a.ih.post("/api/nexopos/v4/reports/profit-report",{startDate:this.startDate,endDate:this.endDate}).subscribe({next:function(t){e.products=t},error:function(e){a.kX.error(e.message).subscribe()}})},setEndDate:function(e){console.log(e),this.endDate=e.format()}}},_e=be;const ge=(0,f.Z)(_e,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,xe={name:"ns-cash-flow",mounted:function(){},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},data:function(){return{startDate:te()(),endDate:te()(),report:[]}},computed:{totalDebit:function(){return 0},totalCredit:function(){return 0}},methods:{setStartDate:function(e){this.startDate=e.format()},setEndDate:function(e){this.endDate=e.format()},loadReport:function(){var e=this,t=te()(this.startDate),s=te()(this.endDate);a.ih.post("/api/nexopos/v4/reports/cash-flow",{startDate:t,endDate:s}).subscribe({next:function(t){e.report=t,console.log(e.report)},error:function(e){a.kX.error(e.message).subscribe()}})}}},ye=xe;const we=(0,f.Z)(ye,undefined,undefined,!1,null,null,null).exports;var Ce=s(3516);const ke={name:"ns-yearly-report",mounted:function(){""!==this.timezone&&(this.year=ns.date.getMoment().format("Y"),this.loadReport())},components:{nsDatepicker:se.Z,nsNotice:Ce.Z,nsDateTimePicker:re.Z},data:function(){return{startDate:te()(),endDate:te()(),report:{},timezone:ns.date.timeZone,year:"",labels:["month_paid_orders","month_taxes","month_expenses","month_income"]}},computed:{totalDebit:function(){return 0},totalCredit:function(){return 0}},methods:{setStartDate:function(e){this.startDate=e.format()},setEndDate:function(e){this.endDate=e.format()},printSaleReport:function(){this.$htmlToPaper("annual-report")},sumOf:function(e){return Object.values(this.report).length>0?Object.values(this.report).map((function(t){return parseFloat(t[e])||0})).reduce((function(e,t){return e+t})):0},recomputeForSpecificYear:function(){var e=this;Popup.show(A.Z,{title:__("Would you like to proceed ?"),message:__("The report will be computed for the current year, a job will be dispatched and you'll be informed once it's completed."),onAction:function(t){t&&a.ih.post("/api/nexopos/v4/reports/compute/yearly",{year:e.year}).subscribe((function(e){a.kX.success(e.message).subscribe()}),(function(e){a.kX.success(e.message||__("An unexpected error has occured.")).subscribe()}))}})},getReportForMonth:function(e){return console.log(this.report,e),this.report[e]},loadReport:function(){var e=this,t=this.year;a.ih.post("/api/nexopos/v4/reports/annual-report",{year:t}).subscribe((function(t){e.report=t}),(function(e){a.kX.error(e.message).subscribe()}))}}},je=ke;const $e=(0,f.Z)(je,undefined,undefined,!1,null,null,null).exports,Pe={name:"ns-best-products-report",mounted:function(){},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},data:function(){return{startDate:te()(),endDate:te()(),report:null,sort:""}},computed:{totalDebit:function(){return 0},totalCredit:function(){return 0}},methods:{setStartDate:function(e){this.startDate=e.format()},setEndDate:function(e){this.endDate=e.format()},printSaleReport:function(){this.$htmlToPaper("best-products-report")},loadReport:function(){var e=this,t=te()(this.startDate),s=te()(this.endDate);a.ih.post("/api/nexopos/v4/reports/products-report",{startDate:t.format("YYYY/MM/DD HH:mm"),endDate:s.format("YYYY/MM/DD HH:mm"),sort:this.sort}).subscribe((function(t){t.current.products=Object.values(t.current.products),e.report=t,console.log(e.report)}),(function(e){a.kX.error(e.message).subscribe()}))}}},De=Pe;const Se=(0,f.Z)(De,undefined,undefined,!1,null,null,null).exports;const Oe={name:"ns-payment-types-report",data:function(){return{startDate:te()(),endDate:te()(),report:[],field:{type:"datetimepicker",value:"2021-02-07",name:"date"}}},components:{nsDatepicker:se.Z,nsDateTimePicker:re.Z},computed:{},mounted:function(){},methods:{printSaleReport:function(){this.$htmlToPaper("sale-report")},setStartDate:function(e){console.log(e),this.startDate=e.format()},loadReport:function(){var e=this;if(null===this.startDate||null===this.endDate)return a.kX.error((0,o.__)("Unable to proceed. Select a correct time range.")).subscribe();var t=te()(this.startDate);if(te()(this.endDate).isBefore(t))return a.kX.error((0,o.__)("Unable to proceed. The current time range is not valid.")).subscribe();a.ih.post("/api/nexopos/v4/reports/payment-types",{startDate:this.startDate,endDate:this.endDate}).subscribe((function(t){e.report=t}),(function(e){a.kX.error(e.message).subscribe()}))},setEndDate:function(e){console.log(e),this.endDate=e.format()}}},Ee=Oe;const Te=(0,f.Z)(Ee,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports;const Fe={name:"ns-dashboard-cards",data:function(){return{report:{}}},mounted:function(){this.loadReport(),console.log(nsLanguage.getEntries())},methods:{__:o.__,loadReport:function(){var e=this;a.ih.get("/api/nexopos/v4/dashboard/day").subscribe((function(t){e.report=t}))}}};const Ae=(0,f.Z)(Fe,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"-m-4 flex flex-wrap"},[s("div",{staticClass:"p-4 w-full md:w-1/2 lg:w-1/4"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-blue-400 to-blue-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Total Sales")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                        "+e._s(e._f("currency")(e.report.total_paid_orders||0,"abbreviate"))+"\n                    ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Total Sales")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.day_paid_orders||0))+" "+e._s(e.__("Today")))])])])])]),e._v(" "),s("div",{staticClass:"p-4 w-full md:w-1/2 lg:w-1/4"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-green-400 to-green-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Incomplete Orders")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                        "+e._s(e._f("currency")(e.report.total_partially_paid_orders+e.report.total_unpaid_orders||0,"abbreviate"))+"\n                    ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Incomplete Orders")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.day_unpaid_orders+e.report.day_partially_paid_orders||0))+" "+e._s(e.__("Today")))])])])])]),e._v(" "),s("div",{staticClass:"p-4 w-full md:w-1/2 lg:w-1/4"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-red-300 via-red-400 to-red-500 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Wasted Goods")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                        "+e._s(e._f("currency")(e.report.total_wasted_goods||0,"abbreviate"))+"\n                    ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Wasted Goods")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.day_wasted_goods||0))+" "+e._s(e.__("Today")))])])])])]),e._v(" "),s("div",{staticClass:"p-4 w-full md:w-1/2 lg:w-1/4"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-indigo-400 to-indigo-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Expenses")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                        "+e._s(e._f("currency")(e.report.total_expenses||0,"abbreviate"))+"\n                    ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Expenses")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.day_expenses||0))+" "+e._s(e.__("Today")))])])])])])])}),[],!1,null,null,null).exports;const Ve={name:"ns-best-customers",mounted:function(){var e=this;this.hasLoaded=!1,this.subscription=Dashboard.bestCustomers.subscribe((function(t){e.hasLoaded=!0,e.customers=t}))},methods:{__:o.__},data:function(){return{customers:[],subscription:null,hasLoaded:!1}},destroyed:function(){this.subscription.unsubscribe()}};const qe=(0,f.Z)(Ve,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-auto flex-col shadow rounded-lg overflow-hidden"},[s("div",{staticClass:"head bg-white flex-auto"},[s("div",{staticClass:"head text-center border-b border-gray-200 text-gray-700 w-full py-2"},[s("h5",[e._v(e._s(e.__("Best Customers")))])]),e._v(" "),s("div",{staticClass:"body"},[e.hasLoaded?e._e():s("div",{staticClass:"h-56 w-full flex items-center justify-center"},[s("ns-spinner",{attrs:{size:"12",border:"4"}})],1),e._v(" "),e.hasLoaded&&0===e.customers.length?s("div",{staticClass:"h-56 flex items-center justify-center flex-col"},[s("i",{staticClass:"las la-grin-beam-sweat text-6xl text-gray-700"}),e._v(" "),s("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(e.__("Well.. nothing to show for the meantime")))])]):e._e(),e._v(" "),e.customers.length>0?s("table",{staticClass:"table w-full"},[s("thead",e._l(e.customers,(function(t){return s("tr",{key:t.id,staticClass:"border-gray-300 border-b text-sm"},[s("th",{staticClass:"p-2"},[s("div",{staticClass:"-mx-1 flex justify-start items-center"},[e._m(0,!0),e._v(" "),s("div",{staticClass:"px-1 justify-center"},[s("h3",{staticClass:"font-semibold text-gray-600 items-center"},[e._v(e._s(t.name))])])])]),e._v(" "),s("th",{staticClass:"flex justify-end text-green-700 p-2"},[e._v(e._s(e._f("currency")(t.purchases_amount)))])])})),0)]):e._e()])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"px-1"},[t("div",{staticClass:"rounded-full bg-gray-200 h-6 w-6 "},[t("img",{attrs:{src:"/images/user.png"}})])])}],!1,null,null,null).exports;const Me={name:"ns-best-customers",data:function(){return{subscription:null,cashiers:[],hasLoaded:!1}},mounted:function(){var e=this;this.hasLoaded=!1,this.subscription=Dashboard.bestCashiers.subscribe((function(t){e.hasLoaded=!0,e.cashiers=t}))},methods:{__:o.__},destroyed:function(){this.subscription.unsubscribe()}};const Ne=(0,f.Z)(Me,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-auto flex-col shadow rounded-lg overflow-hidden"},[s("div",{staticClass:"head bg-white flex-auto"},[s("div",{staticClass:"head text-center border-b border-gray-200 text-gray-700 w-full py-2"},[s("h5",[e._v(e._s(e.__("Best Cashiers")))])]),e._v(" "),s("div",{staticClass:"body"},[e.cashiers.length>0?s("table",{staticClass:"table w-full"},[s("thead",[e._l(e.cashiers,(function(t){return s("tr",{key:t.id,staticClass:"border-gray-300 border-b text-sm"},[s("th",{staticClass:"p-2"},[s("div",{staticClass:"-mx-1 flex justify-start items-center"},[e._m(0,!0),e._v(" "),s("div",{staticClass:"px-1 justify-center"},[s("h3",{staticClass:"font-semibold text-gray-600 items-center"},[e._v(e._s(t.username))])])])]),e._v(" "),s("th",{staticClass:"flex justify-end text-green-700 p-2"},[e._v(e._s(e._f("currency")(t.total_sales,"abbreviate")))])])})),e._v(" "),0===e.cashiers.length?s("tr",[s("th",{attrs:{colspan:"2"}},[e._v(e._s(e.__("No result to display.")))])]):e._e()],2)]):e._e(),e._v(" "),e.hasLoaded?e._e():s("div",{staticClass:"h-56 flex items-center justify-center"},[s("ns-spinner",{attrs:{size:"8",border:"4"}})],1),e._v(" "),e.hasLoaded&&0===e.cashiers.length?s("div",{staticClass:"h-56 flex items-center justify-center flex-col"},[s("i",{staticClass:"las la-grin-beam-sweat text-6xl text-gray-700"}),e._v(" "),s("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(e.__("Well.. nothing to show for the meantime.")))])]):e._e()])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"px-1"},[t("div",{staticClass:"rounded-full bg-gray-200 h-6 w-6 "},[t("img",{attrs:{src:"/images/user.png"}})])])}],!1,null,null,null).exports;const Re={name:"ns-orders-summary",data:function(){return{orders:[],subscription:null,hasLoaded:!1}},mounted:function(){var e=this;this.hasLoaded=!1,this.subscription=Dashboard.recentOrders.subscribe((function(t){e.hasLoaded=!0,e.orders=t}))},methods:{__:o.__},destroyed:function(){this.subscription.unsubscribe()}};const Ze=(0,f.Z)(Re,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-auto flex-col shadow rounded-lg overflow-hidden"},[s("div",{staticClass:"p-2 flex justify-between bg-white border-b"},[s("h3",{staticClass:"font-semibold text-gray-700"},[e._v(e._s(e.__("Recents Orders")))]),e._v(" "),s("div",{})]),e._v(" "),s("div",{staticClass:"head bg-gray-100 flex-auto flex-col flex h-56 overflow-y-auto"},[e.hasLoaded?e._e():s("div",{staticClass:"h-full flex items-center justify-center"},[s("ns-spinner",{attrs:{size:"8",border:"4"}})],1),e._v(" "),e.hasLoaded&&0===e.orders.length?s("div",{staticClass:"h-full flex items-center justify-center flex-col"},[s("i",{staticClass:"las la-grin-beam-sweat text-6xl text-gray-700"}),e._v(" "),s("p",{staticClass:"text-gray-600 text-sm"},[e._v(e._s(e.__("Well.. nothing to show for the meantime.")))])]):e._e(),e._v(" "),e._l(e.orders,(function(t){return s("div",{key:t.id,staticClass:"border-b border-gray-200 p-2 flex justify-between",class:"paid"===t.payment_status?"bg-green-50":"bg-white"},[s("div",[s("h3",{staticClass:"text-lg font-semibold text-gray-600"},[e._v(e._s(e.__("Order"))+" : "+e._s(t.code))]),e._v(" "),s("div",{staticClass:"flex -mx-2"},[s("div",{staticClass:"px-1"},[s("h4",{staticClass:"text-semibold text-xs text-gray-500"},[s("i",{staticClass:"lar la-user-circle"}),e._v(" "),s("span",[e._v(e._s(t.user.username))])])]),e._v(" "),s("div",{staticClass:"divide-y-4"}),e._v(" "),s("div",{staticClass:"px-1"},[s("h4",{staticClass:"text-semibold text-xs text-gray-600"},[s("i",{staticClass:"las la-clock"}),e._v(" "),s("span",[e._v(e._s(t.created_at))])])])])]),e._v(" "),s("div",[s("h2",{staticClass:"text-xl font-bold",class:"paid"===t.payment_status?"text-green-600":"text-gray-700"},[e._v(e._s(e._f("currency")(t.total)))])])])}))],2)])}),[],!1,null,null,null).exports;const Ue={name:"ns-orders-chart",data:function(){return{totalWeeklySales:0,totalWeekTaxes:0,totalWeekExpenses:0,totalWeekIncome:0,chartOptions:{chart:{id:"vuechart-example",width:"100%",height:"100%"},stroke:{curve:"smooth",dashArray:[0,8]},xaxis:{categories:[]},colors:["#5f83f3","#AAA"]},series:[{name:(0,o.__)("Current Week"),data:[]},{name:(0,o.__)("Previous Week"),data:[]}],reportSubscription:null,report:null}},methods:{__:o.__},mounted:function(){var e=this;this.reportSubscription=Dashboard.weeksSummary.subscribe((function(t){void 0!==t.result&&(e.chartOptions.xaxis.categories=t.result.map((function(e){return e.label})),e.report=t,e.totalWeeklySales=0,e.totalWeekIncome=0,e.totalWeekExpenses=0,e.totalWeekTaxes=0,e.report.result.forEach((function(t,s){if(void 0!==t.current){var r=t.current.entries.map((function(e){return e.day_paid_orders})),i=0;r.length>0&&(i=r.reduce((function(e,t){return e+t}))),e.totalWeekExpenses+=t.current.entries.map((function(e){return parseFloat(e.day_expenses)})).reduce((function(e,t){return e+t})),e.totalWeekTaxes+=t.current.entries.map((function(e){return parseFloat(e.day_taxes)})).reduce((function(e,t){return e+t})),e.totalWeekIncome+=t.current.entries.map((function(e){return parseFloat(e.day_income)})).reduce((function(e,t){return e+t})),e.series[0].data.push(i)}else e.series[0].data.push(0);if(void 0!==t.previous){var n=t.previous.entries.map((function(e){return e.day_paid_orders})),a=0;n.length>0&&(a=n.reduce((function(e,t){return e+t}))),e.series[1].data.push(a)}else e.series[1].data.push(0)})),e.totalWeeklySales=e.series[0].data.reduce((function(e,t){return e+t})))}))}};const Xe=(0,f.Z)(Ue,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-auto flex-col shadow rounded-lg overflow-hidden"},[s("div",{staticClass:"head bg-white flex-auto flex h-56"},[s("div",{staticClass:"w-full h-full pt-2"},[e.report?s("vue-apex-charts",{attrs:{height:"100%",type:"area",options:e.chartOptions,series:e.series}}):e._e()],1)]),e._v(" "),s("div",{staticClass:"p-2 bg-white -mx-4 flex flex-wrap"},[s("div",{staticClass:"flex w-full md:w-1/2 lg:w-full xl:w-1/2 lg:border-b lg:border-t xl:border-none border-gray-200 lg:py-1 lg:my-1"},[s("div",{staticClass:"px-4 w-1/2 lg:w-1/2 flex flex-col items-center justify-center"},[s("span",{staticClass:"text-xs text-gray-600"},[e._v(e._s(e.__("Weekly Sales")))]),e._v(" "),s("h2",{staticClass:"text-lg xl:text-xl text-gray-700 font-bold"},[e._v(e._s(e._f("currency")(e.totalWeeklySales,"abbreviate")))])]),e._v(" "),s("div",{staticClass:"px-4 w-1/2 lg:w-1/2 flex flex-col items-center justify-center"},[s("span",{staticClass:"text-xs text-gray-600"},[e._v(e._s(e.__("Week Taxes")))]),e._v(" "),s("h2",{staticClass:"text-lg xl:text-xl text-gray-700 font-bold"},[e._v(e._s(e._f("currency")(e.totalWeekTaxes,"abbreviate")))])])]),e._v(" "),s("div",{staticClass:"flex w-full md:w-1/2 lg:w-full xl:w-1/2"},[s("div",{staticClass:"px-4 w-full lg:w-1/2 flex flex-col items-center justify-center"},[s("span",{staticClass:"text-xs text-gray-600"},[e._v(e._s(e.__("Net Income")))]),e._v(" "),s("h2",{staticClass:"text-lg xl:text-xl text-gray-700 font-bold"},[e._v(e._s(e._f("currency")(e.totalWeekIncome,"abbreviate")))])]),e._v(" "),s("div",{staticClass:"px-4 w-full lg:w-1/2 flex flex-col items-center justify-center"},[s("span",{staticClass:"text-xs text-gray-600"},[e._v(e._s(e.__("Week Expenses")))]),e._v(" "),s("h2",{staticClass:"text-lg xl:text-xl text-gray-700 font-bold"},[e._v(e._s(e._f("currency")(e.totalWeekExpenses,"abbreviate")))])])])])])}),[],!1,null,null,null).exports;const Le={name:"ns-cashier-dashboard",props:["showCommission"],data:function(){return{report:{}}},methods:{__,refreshReport:function(){Cashier.refreshReport()},getOrderStatus:function(e){switch(e){case"paid":return __("Paid");case"partially_paid":return __("Partially Paid");case"unpaid":return __("Unpaid");case"hold":return __("Hold");case"order_void":return __("Void");case"refunded":return __("Refunded");case"partially_refunded":return __("Partially Refunded");default:return $status}}},mounted:function(){var e=this;Cashier.mysales.subscribe((function(t){e.report=t}));var t=document.createRange().createContextualFragment('<div clss="px-2">\n            <div class="mr-2">\n                <div \n                    id="refresh-button" \n                    class="hover:bg-white hover:text-gray-700 hover:shadow-lg hover:border-opacity-0 rounded-full h-12 w-12 cursor-pointer font-bold text-2xl justify-center items-center flex text-gray-800 border border-gray-400">\n                    <i class="las la-sync-alt"></i>\n                </div>             \n            </div>\n        </div>');document.querySelector(".top-tools-side").prepend(t),document.querySelector("#refresh-button").addEventListener("click",(function(){return e.refreshReport()}))}};const ze=(0,f.Z)(Le,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"flex -mx-4 flex-wrap"},[s("div",{staticClass:"px-4 w-full mb-6",class:e.showCommission?"md:w-1/2 lg:w-1/4":"md:w-1/3"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-purple-400 to-purple-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Total Sales")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                            "+e._s(e._f("currency")(e.report.total_sales_amount,"abbreviate"))+"\n                        ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Total Sales")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.total_sales_amount))+" "+e._s(e.__("Today")))])])])])]),e._v(" "),s("div",{staticClass:"px-4 w-full mb-6",class:e.showCommission?"md:w-1/2 lg:w-1/4":"md:w-1/3"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-red-400 to-red-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Total Refunds")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                            "+e._s(e._f("currency")(e.report.total_refunds_amount,"abbreviate"))+"\n                        ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Total Refunds")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.today_refunds_amount))+" "+e._s(e.__("Today")))])])])])]),e._v(" "),s("div",{staticClass:"px-4 w-full mb-6",class:e.showCommission?"md:w-1/2 lg:w-1/4":"md:w-1/3"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-blue-400 to-blue-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Clients Registered")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                            "+e._s(e.report.total_customers)+"\n                        ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Clients Registered")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e.report.today_customers)+" "+e._s(e.__("Today")))])])])])]),e._v(" "),e.showCommission?s("div",{staticClass:"px-4 w-full mb-6",class:e.showCommission?"md:w-1/2 lg:w-1/4":"md:w-1/3"},[s("div",{staticClass:"flex flex-auto flex-col rounded-lg shadow-lg bg-gradient-to-br from-green-400 to-green-600 text-white px-3 py-5"},[s("div",{staticClass:"flex flex-row md:flex-col flex-auto"},[s("div",{staticClass:"w-1/2 md:w-full flex md:flex-col md:items-start items-center justify-center"},[s("h6",{staticClass:"font-bold hidden text-right md:inline-block"},[e._v(e._s(e.__("Commissions")))]),e._v(" "),s("h3",{staticClass:"text-2xl font-black"},[e._v("\n                            "+e._s(e._f("currency")(e.report.total_commissions))+"\n                        ")])]),e._v(" "),s("div",{staticClass:"w-1/2 md:w-full flex flex-col px-2 justify-end items-end"},[s("h6",{staticClass:"font-bold inline-block text-right md:hidden"},[e._v(e._s(e.__("Commissions")))]),e._v(" "),s("h4",{staticClass:"text-xs text-right"},[e._v("+"+e._s(e._f("currency")(e.report.today_commissions))+" "+e._s(e.__("Today")))])])])])]):e._e()]),e._v(" "),s("div",{staticClass:"py-4"},[e.report.today_orders&&e.report.today_orders.length>0?s("ul",{staticClass:"bg-white shadow-lg rounded overflow-hidden"},e._l(e.report.today_orders,(function(t){return s("li",{key:t.id,staticClass:"p-2 border-b-2 border-blue-400"},[s("h3",{staticClass:"font-semibold text-lg flex justify-between"},[s("span",[e._v(e._s(e.__("Total"))+" : "+e._s(e._f("currency")(t.total)))]),e._v(" "),s("span",[e._v(e._s(t.code))])]),e._v(" "),s("ul",{staticClass:"pt-2 flex -mx-1 text-sm text-gray-700"},[s("li",{staticClass:"px-1"},[e._v(e._s(e.__("Discount"))+" : "+e._s(e._f("currency")(t.discount)))]),e._v(" "),s("li",{staticClass:"px-1"},[e._v(e._s(e.__("Status"))+" : "+e._s(e.getOrderStatus(t.payment_status)))])])])})),0):e._e(),e._v(" "),e.report.today_orders&&0===e.report.today_orders.length?s("div",{staticClass:"flex items-center justify-center"},[s("i",{staticClass:"las la-frown"})]):e._e()])])}),[],!1,null,null,null).exports;var Ye=s(2242),Ie=s(2083),We=s(3793);const He={name:"ns-stock-adjustment",props:["actions"],data:function(){return{search:"",timeout:null,suggestions:[],products:[]}},mounted:function(){console.log(this.actions)},methods:{__:o.__,searchProduct:function(e){var t=this;e.length>0&&a.ih.post("/api/nexopos/v4/procurements/products/search-procurement-product",{argument:e}).subscribe((function(e){if("products"===e.from){if(!(e.products.length>0))return t.closeSearch(),a.kX.error((0,o.__)("Looks like no products matched the searched term.")).subscribe();1===e.products.length?t.addSuggestion(e.products[0]):t.suggestions=e.products}else if("procurements"===e.from){if(null===e.product)return t.closeSearch(),a.kX.error((0,o.__)("Looks like no products matched the searched term.")).subscribe();t.addProductToList(e.product)}}))},addProductToList:function(e){if(this.products.filter((function(t){return t.procurement_product_id===e.id})).length>0)return this.closeSearch(),a.kX.error((0,o.__)("The product already exists on the table.")).subscribe();var t=new Object;e.unit_quantity.unit=e.unit,t.quantities=[e.unit_quantity],t.name=e.name,t.adjust_unit=e.unit_quantity,t.adjust_quantity=1,t.adjust_action="",t.adjust_reason="",t.adjust_value=0,t.id=e.product_id,t.accurate_tracking=1,t.available_quantity=e.available_quantity,t.procurement_product_id=e.id,t.procurement_history=[{label:"".concat(e.procurement.name," (").concat(e.available_quantity,")"),value:e.id}],this.products.push(t),this.closeSearch()},addSuggestion:function(e){var t=this;(0,E.D)([a.ih.get("/api/nexopos/v4/products/".concat(e.id,"/units/quantities"))]).subscribe((function(s){if(!(s[0].length>0))return a.kX.error((0,o.__)("This product does't have any stock to adjust.")).subscribe();e.quantities=s[0],e.adjust_quantity=1,e.adjust_action="",e.adjust_reason="",e.adjust_unit="",e.adjust_value=0,e.procurement_product_id=0,t.products.push(e),t.closeSearch(),e.accurate_tracking}))},closeSearch:function(){this.search="",this.suggestions=[]},recalculateProduct:function(e){""!==e.adjust_unit&&(["deleted","defective","lost"].includes(e.adjust_action)?e.adjust_value=-e.adjust_quantity*e.adjust_unit.sale_price:e.adjust_value=e.adjust_quantity*e.adjust_unit.sale_price),this.$forceUpdate()},openQuantityPopup:function(e){var t=this;e.quantity;new Promise((function(t,s){Ye.G.show(Ie.Z,{resolve:t,reject:s,quantity:e.adjust_quantity})})).then((function(s){if(!["added"].includes(e.adjust_action)){if(void 0!==e.accurate_tracking&&s.quantity>e.available_quantity)return a.kX.error((0,o.__)("The specified quantity exceed the available quantity.")).subscribe();if(s.quantity>e.adjust_unit.quantity)return a.kX.error((0,o.__)("The specified quantity exceed the available quantity.")).subscribe()}e.adjust_quantity=s.quantity,t.recalculateProduct(e)}))},proceedStockAdjustment:function(){var e=this;if(0===this.products.length)return a.kX.error((0,o.__)("Unable to proceed as the table is empty.")).subscribe();Ye.G.show(A.Z,{title:(0,o.__)("Confirm Your Action"),message:(0,o.__)("The stock adjustment is about to be made. Would you like to confirm ?"),onAction:function(t){t&&a.ih.post("/api/nexopos/v4/products/adjustments",{products:e.products}).subscribe((function(t){a.kX.success(t.message).subscribe(),e.products=[]}),(function(e){a.kX.error(e.message).subscribe()}))}})},provideReason:function(e){new Promise((function(t,s){Ye.G.show(We.Z,{title:(0,o.__)("More Details"),resolve:t,reject:s,message:(0,o.__)("Useful to describe better what are the reasons that leaded to this adjustment."),input:e.adjust_reason,onAction:function(t){!1!==t&&(e.adjust_reason=t)}})})).then((function(e){a.kX.success((0,o.__)("The reason has been updated.")).susbcribe()})).catch((function(e){}))},removeProduct:function(e){var t=this;Ye.G.show(A.Z,{title:(0,o.__)("Confirm Your Action"),message:(0,o.__)("Would you like to remove this product from the table ?"),onAction:function(s){if(s){var r=t.products.indexOf(e);t.products.splice(r,1)}}})}},watch:{search:function(){var e=this;this.search.length>0?(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchProduct(e.search)}),500)):this.closeSearch()}}};const Be=(0,f.Z)(He,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"input-field flex border-2 border-blue-400 rounded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"p-2 bg-white flex-auto outline-none",attrs:{type:"text"},domProps:{value:e.search},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeSearch()},input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),s("button",{staticClass:"px-3 py-2 bg-blue-400 text-white"},[e._v(e._s(e.__("Search")))])]),e._v(" "),e.suggestions.length>0?s("div",{staticClass:"h-0"},[s("div",{staticClass:"shadow h-96 relative z-10 bg-white text-gray-700 zoom-in-entrance anim-duration-300 overflow-y-auto"},[s("ul",e._l(e.suggestions,(function(t){return s("li",{key:t.id,staticClass:"cursor-pointer hover:bg-gray-100 border-b border-gray-200 p-2 flex justify-between",on:{click:function(s){return e.addSuggestion(t)}}},[s("span",[e._v(e._s(t.name))])])})),0)])]):e._e(),e._v(" "),s("div",{staticClass:"table shadow bg-white my-2 w-full "},[s("table",{staticClass:"table w-full"},[s("thead",{staticClass:"border-b border-gray-400"},[s("tr",[s("td",{staticClass:"p-2 text-gray-700"},[e._v(e._s(e.__("Product")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"120"}},[e._v(e._s(e.__("Unit")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"120"}},[e._v(e._s(e.__("Operation")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"120"}},[e._v(e._s(e.__("Procurement")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"120"}},[e._v(e._s(e.__("Quantity")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"120"}},[e._v(e._s(e.__("Value")))]),e._v(" "),s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{width:"150"}},[e._v(e._s(e.__("Actions")))])])]),e._v(" "),s("tbody",[0===e.products.length?s("tr",[s("td",{staticClass:"p-2 text-center text-gray-700",attrs:{colspan:"6"}},[e._v(e._s(e.__("Search and add some products")))])]):e._e(),e._v(" "),e._l(e.products,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"p-2 text-gray-600"},[e._v(e._s(t.name)+" ("+e._s((1===t.accurate_tracking?t.available_quantity:t.adjust_unit.quantity)||0)+")")]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.adjust_unit,expression:"product.adjust_unit"}],staticClass:"outline-none p-2 bg-white w-full border-2 border-blue-400",on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"adjust_unit",s.target.multiple?r:r[0])},function(s){return e.recalculateProduct(t)}]}},e._l(t.quantities,(function(t){return s("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.unit.name))])})),0)]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.adjust_action,expression:"product.adjust_action"}],staticClass:"outline-none p-2 bg-white w-full border-2 border-blue-400",attrs:{name:"",id:""},on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"adjust_action",s.target.multiple?r:r[0])},function(s){return e.recalculateProduct(t)}]}},e._l(e.actions,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600"},[1===t.accurate_tracking?s("select",{directives:[{name:"model",rawName:"v-model",value:t.procurement_product_id,expression:"product.procurement_product_id"}],staticClass:"outline-none p-2 bg-white w-full border-2 border-blue-400",attrs:{name:"",id:""},on:{change:[function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(t,"procurement_product_id",s.target.multiple?r:r[0])},function(s){return e.recalculateProduct(t)}]}},e._l(t.procurement_history,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0):e._e()]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600 flex items-center justify-center cursor-pointer",on:{click:function(s){return e.openQuantityPopup(t)}}},[s("span",{staticClass:"border-b border-dashed border-blue-400 py-2 px-4"},[e._v(e._s(t.adjust_quantity))])]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600"},[s("span",{staticClass:"border-b border-dashed border-blue-400 py-2 px-4"},[e._v(e._s(e._f("currency")(t.adjust_value)))])]),e._v(" "),s("td",{staticClass:"p-2 text-gray-600"},[s("div",{staticClass:"-mx-1 flex justify-end"},[s("div",{staticClass:"px-1"},[s("button",{staticClass:"bg-blue-400 text-white outline-none rounded-full shadow h-10 w-10",on:{click:function(s){return e.provideReason(t)}}},[s("i",{staticClass:"las la-comment-dots"})])]),e._v(" "),s("div",{staticClass:"px-1"},[s("button",{staticClass:"bg-red-400 text-white outline-none rounded-full shadow h-10 w-10",on:{click:function(s){return e.removeProduct(t)}}},[s("i",{staticClass:"las la-times"})])])])])])}))],2)]),e._v(" "),s("div",{staticClass:"border-t border-gray-200 p-2 flex justify-end"},[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.proceedStockAdjustment()}}},[e._v(e._s(e.__("Proceed")))])],1)])])}),[],!1,null,null,null).exports;const Ge={props:["order","billing","shipping"],methods:{__:o.__,printTable:function(){this.$htmlToPaper("invoice-container")}}};const Qe=(0,f.Z)(Ge,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"shadow bg-white"},[s("div",{staticClass:"head p-2 bg-gray-100 flex justify-between border-b border-gray-300"},[s("div",{staticClass:"-mx-2 flex flex-wrap"},[s("div",{staticClass:"px-2"},[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.printTable()}}},[s("i",{staticClass:"las la-print"}),e._v(" "),s("span",[e._v(e._s(e.__("Print")))])])],1)])]),e._v(" "),s("div",{staticClass:"body flex flex-col px-2",attrs:{id:"invoice-container"}},[s("div",{staticClass:"flex -mx-2 flex-wrap",attrs:{id:"invoice-header"}},[s("div",{staticClass:"w-full print:w-1/3 md:w-1/3 px-2"},[s("div",{staticClass:"p-2"},[s("h3",{staticClass:"font-semibold text-xl text-gray-700 border-b border-blue-400 py-2"},[e._v(e._s(e.__("Store Details")))]),e._v(" "),s("div",{staticClass:"details"},[s("ul",{staticClass:"my-1"},[s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Order Code")))]),e._v(" "),s("span",[e._v(e._s(e.order.code))])]),e._v(" "),s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Cashier")))]),e._v(" "),s("span",[e._v(e._s(e.order.user.username))])]),e._v(" "),s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Date")))]),e._v(" "),s("span",[e._v(e._s(e.order.created_at))])]),e._v(" "),s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Customer")))]),e._v(" "),s("span",[e._v(e._s(e.order.customer.name))])]),e._v(" "),s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Type")))]),e._v(" "),s("span",[e._v(e._s(e.order.type))])]),e._v(" "),s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Payment Status")))]),e._v(" "),s("span",[e._v(e._s(e.order.payment_status))])]),e._v(" "),"delivery"===e.order.type?s("li",{staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(e.__("Delivery Status")))]),e._v(" "),s("span",[e._v(e._s(e.order.delivery_status))])]):e._e()])])])]),e._v(" "),s("div",{staticClass:"w-full print:w-1/3 md:w-1/3 px-2"},[s("div",{staticClass:"p-2"},[s("h3",{staticClass:"font-semibold text-xl text-gray-700 border-b border-blue-400 py-2"},[e._v(e._s(e.__("Billing Details")))]),e._v(" "),s("div",{staticClass:"details"},[s("ul",{staticClass:"my-1"},e._l(e.billing,(function(t){return s("li",{key:t.id,staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(t.label))]),e._v(" "),s("span",[e._v(e._s(e.order.billing_address[t.name]||"N/A"))])])})),0)])])]),e._v(" "),s("div",{staticClass:"w-full print:w-1/3 md:w-1/3 px-2"},[s("div",{staticClass:"p-2"},[s("h3",{staticClass:"font-semibold text-xl text-gray-700 border-b border-blue-400 py-2"},[e._v(e._s(e.__("Shipping Details")))]),e._v(" "),s("div",{staticClass:"details"},[s("ul",{staticClass:"my-1"},e._l(e.shipping,(function(t){return s("li",{key:t.id,staticClass:"flex justify-between text-gray-600 text-sm mb-1"},[s("span",{staticClass:"font-semibold"},[e._v(e._s(t.label))]),e._v(" "),s("span",[e._v(e._s(e.order.shipping_address[t.name]||"N/A"))])])})),0)])])])]),e._v(" "),s("div",{staticClass:"table w-full my-4"},[s("table",{staticClass:"table w-full"},[s("thead",{staticClass:"text-gray-600 bg-gray-100"},[s("tr",[s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"400"}},[e._v(e._s(e.__("Product")))]),e._v(" "),s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"200"}},[e._v(e._s(e.__("Unit Price")))]),e._v(" "),s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"200"}},[e._v(e._s(e.__("Quantity")))]),e._v(" "),s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"200"}},[e._v(e._s(e.__("Discount")))]),e._v(" "),s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"200"}},[e._v(e._s(e.__("Tax")))]),e._v(" "),s("th",{staticClass:"p-2 border border-gray-200",attrs:{width:"200"}},[e._v(e._s(e.__("Total Price")))])])]),e._v(" "),s("tbody",e._l(e.order.products,(function(t){return s("tr",{key:t.id},[s("td",{staticClass:"p-2 border border-gray-200"},[s("h3",{staticClass:"text-gray-700"},[e._v(e._s(t.name))]),e._v(" "),s("span",{staticClass:"text-sm text-gray-600"},[e._v(e._s(t.unit))])]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700"},[e._v(e._s(e._f("currency")(t.unit_price)))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700"},[e._v(e._s(t.quantity))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700"},[e._v(e._s(e._f("currency")(t.discount)))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700"},[e._v(e._s(e._f("currency")(t.tax_value)))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(t.total_price)))])])})),0),e._v(" "),s("tfoot",{staticClass:"font-semibold bg-gray-100"},[s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"2"}},[["unpaid","partially_paid"].includes(e.order.payment_status)?s("div",{staticClass:"flex justify-between"},[s("span",[e._v("\n                                    "+e._s(e.__("Expiration Date"))+"\n                                ")]),e._v(" "),s("span",[e._v(e._s(e.order.final_payment_date))])]):e._e()]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"2"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Sub Total")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(e.order.subtotal)))])]),e._v(" "),e.order.discount>0?s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Discount")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(-e.order.discount)))])]):e._e(),e._v(" "),e.order.total_coupons>0?s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-left text-gray-700"},[e._v(e._s(e.__("Coupons")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(-e.order.total_coupons)))])]):e._e(),e._v(" "),e.order.shipping>0?s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Shipping")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(e.order.shipping)))])]):e._e(),e._v(" "),s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Total")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(e.order.total)))])]),e._v(" "),s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Paid")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(e.order.tendered)))])]),e._v(" "),["partially_paid","unpaid"].includes(e.order.payment_status)?s("tr",{staticClass:"bg-red-200 border-red-300"},[s("td",{staticClass:"p-2 border border-red-200 text-center text-red-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-red-200 text-red-700 text-left"},[e._v(e._s(e.__("Due")))]),e._v(" "),s("td",{staticClass:"p-2 border border-red-200 text-right text-red-700"},[e._v(e._s(e._f("currency")(e.order.change)))])]):s("tr",[s("td",{staticClass:"p-2 border border-gray-200 text-center text-gray-700",attrs:{colspan:"4"}}),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-gray-700 text-left"},[e._v(e._s(e.__("Change")))]),e._v(" "),s("td",{staticClass:"p-2 border border-gray-200 text-right text-gray-700"},[e._v(e._s(e._f("currency")(e.order.change)))])])])])])])])}),[],!1,null,null,null).exports;var Ke=s(6189),Je=s(2004),et=s(7166),tt=s.n(et),st=s(5675),rt=s.n(st),it=window.nsState,nt=window.nsScreen,at=window.nsExtraComponents;r.default.use(rt(),{name:"_blank",specs:["fullscreen=yes","titlebar=yes","scrollbars=yes"],styles:["/css/app.css"]});var ot=r.default.component("vue-apex-charts",tt()),lt=Object.assign(Object.assign({NsModules:S,NsRewardsSystem:p,NsCreateCoupons:b,NsManageProducts:R,NsSettings:g,NsReset:y,NsPermissions:F,NsProcurement:H,NsProcurementInvoice:G,NsMedia:J.Z,NsDashboardCards:Ae,NsCashierDashboard:ze,NsBestCustomers:qe,NsBestCashiers:Ne,NsOrdersSummary:Ze,NsOrdersChart:Xe,NsNotifications:K,NsSaleReport:pe,NsSoldStockReport:ve,NsProfitReport:ge,NsCashFlowReport:we,NsYearlyReport:$e,NsPaymentTypesReport:Te,NsBestProductsReport:Se,NsLowStockReport:ne,NsStockAdjustment:Be,NsPromptPopup:We.Z,NsAlertPopup:Ke.Z,NsConfirmPopup:A.Z,NsPOSLoadingPopup:Je.Z,NsOrderInvoice:Qe,VueApexCharts:ot},i),at),ct=new r.default({el:"#dashboard-aside",data:{sidebar:"visible"},components:lt,mounted:function(){var e=this;it.behaviorState.subscribe((function(t){var s=t.object;e.sidebar=s.sidebar}))}});window.nsDashboardAside=ct,window.nsDashboardOverlay=new r.default({el:"#dashboard-overlay",data:{sidebar:null},components:lt,mounted:function(){var e=this;it.behaviorState.subscribe((function(t){var s=t.object;e.sidebar=s.sidebar}))},methods:{closeMenu:function(){it.setState({sidebar:"hidden"===this.sidebar?"visible":"hidden"})}}}),window.nsDashboardHeader=new r.default({el:"#dashboard-header",data:{menuToggled:!1,sidebar:"visible"},components:lt,methods:{toggleMenu:function(){this.menuToggled=!this.menuToggled},toggleSideMenu:function(){["lg","xl"].includes(nt.breakpoint),it.setState({sidebar:"hidden"===this.sidebar?"visible":"hidden"})}},mounted:function(){var e=this;it.behaviorState.subscribe((function(t){var s=t.object;e.sidebar=s.sidebar}))}}),window.nsComponents=Object.assign(lt,i),window.nsDashboardContent=new r.default({el:"#dashboard-content",components:lt})},9671:(e,t,s)=>{"use strict";s.d(t,{l:()=>N,kq:()=>L,ih:()=>R,kX:()=>Z});var r=s(6486),i=s(9669),n=s(2728),a=s(8345),o=s(9624),l=s(9248),c=s(230);function u(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new l.x}var t,s,r;return t=e,s=[{key:"defineClient",value:function(e){this._client=e}},{key:"post",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("post",e,t,s)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("get",e,void 0,t)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._request("delete",e,void 0,t)}},{key:"put",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._request("put",e,t,s)}},{key:"response",get:function(){return this._lastRequestData}},{key:"_request",value:function(e,t){var s=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=L.applyFilters("http-client-url",t.replace(/\/$/,"")),this._subject.next({identifier:"async.start",url:t,data:r}),new c.y((function(n){s._client[e](t,r,Object.assign(Object.assign({},s._client.defaults[e]),i)).then((function(e){s._lastRequestData=e,n.next(e.data),n.complete(),s._subject.next({identifier:"async.stop"})})).catch((function(e){var t;n.error((null===(t=e.response)||void 0===t?void 0:t.data)||e.response||e),s._subject.next({identifier:"async.stop"})}))}))}},{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,s=e.value;this._subject.next({identifier:t,value:s})}}],s&&u(t.prototype,s),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=s(3);function p(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._subject=new f.t}var t,s,r;return t=e,(s=[{key:"subject",value:function(){return this._subject}},{key:"emit",value:function(e){var t=e.identifier,s=e.value;this._subject.next({identifier:t,value:s})}}])&&p(t.prototype,s),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),m=s(6515);function v(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={},this.behaviorState=new m.X({}),this.behaviorState.subscribe((function(e){s.state=e})),this.setState(t)}var t,s,r;return t=e,(s=[{key:"setState",value:function(e){this.behaviorState.next(Object.assign(Object.assign({},this.state),{object:e}))}}])&&v(t.prototype,s),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_=s(2401),g=s(9614),x=s(381),y=s(2242),w=s(538),C=s(7266);function k(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=ns.base_url}var t,s,r;return t=e,(s=[{key:"get",value:function(e){return this.url+e}}])&&k(t.prototype,s),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$=w.default.filter("abbreviate",(function(e){var t=e;if(e>=1e3){for(var s,r=Math.floor((""+e).length/3),i=2;i>=1;i--){if(((s=parseFloat((0!=r?e/Math.pow(1e3,r):e).toPrecision(i)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}s%1!=0&&(s=s.toFixed(1)),t=s+["","k","m","b","t"][r]}return t})),P=s(1356),D=s(9698);function S(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instances=new Object}var t,s,r;return t=e,(s=[{key:"getInstance",value:function(e){return this.instances[e]}},{key:"defineInstance",value:function(e,t){this.instances[e]=t}}])&&S(t.prototype,s),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),E=s(2319),T=s(7389),F=s(6386),A=s(8603),V=s(4554);function q(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=s(6606);window._=r,window.ChartJS=n,window.Pusher=M,window.Vue=w.default,window.moment=x,window.Axios=i,window.__=T.__,window.__m=T.c,window.VueRouter=a.Z,window.SnackBar=o.S,window.nsHooks=(0,E.Hu)(),window.popupResolver=F.Z,window.popupCloser=A.Z,window.Axios.defaults.headers.common["x-requested-with"]="XMLHttpRequest",window.Axios.defaults.withCredentials=!0,ns.websocket.enabled&&(window.Echo=new V.Z({broadcaster:"pusher",key:ns.websocket.key,wsHost:ns.websocket.host,wsPort:ns.websocket.port,wssPort:ns.websocket.port,namespace:"",forceTLS:ns.websocket.secured,disableStats:!0,encrypted:ns.websocket.secured,enabledTransports:ns.websocket.secured?["ws","wss"]:["ws"],disabledTransports:ns.websocket.secured?["sockjs","xhr_polling","xhr_streaming"]:[]}));var N=new h,R=new d,Z=new o.S,U=new j,X=new O,L=window.nsHooks,z=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.breakpoint="",this.detectScreenSizes(),(0,_.R)(window,"resize").subscribe((function(e){return t.detectScreenSizes()}))}var t,s,r;return t=e,(s=[{key:"detectScreenSizes",value:function(){switch(!0){case window.outerWidth>0&&window.outerWidth<=480:this.breakpoint="xs";break;case window.outerWidth>480&&window.outerWidth<=640:this.breakpoint="sm";break;case window.outerWidth>640&&window.outerWidth<=1024:this.breakpoint="md";break;case window.outerWidth>1024&&window.outerWidth<=1280:this.breakpoint="lg";break;case window.outerWidth>1280:this.breakpoint="xl"}}}])&&q(t.prototype,s),r&&q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Y=new b({sidebar:["xs","sm","md"].includes(z.breakpoint)?"hidden":"visible"});R.defineClient(i),window.nsEvent=N,window.nsHttpClient=R,window.nsSnackBar=Z,window.nsCurrency=P.W,window.nsTruncate=D.b,window.nsRawCurrency=P.f,window.nsAbbreviate=$,window.nsState=Y,window.nsUrl=U,window.nsScreen=z,window.ChartJS=n,window.EventEmitter=h,window.Popup=y.G,window.RxJS=g,window.FormValidation=C.Z,window.nsCrudHandler=X},3509:(e,t,s)=>{"use strict";s.r(t),s.d(t,{nsAvatar:()=>re,nsButton:()=>o,nsCheckbox:()=>p,nsCkeditor:()=>Z,nsCloseButton:()=>A,nsCrud:()=>K,nsCrudForm:()=>b,nsDate:()=>O,nsDateRangePicker:()=>j,nsDateTimePicker:()=>$.Z,nsDatepicker:()=>ne.Z,nsField:()=>P,nsIconButton:()=>V,nsInput:()=>c,nsLink:()=>l,nsMediaInput:()=>F,nsMenu:()=>n,nsMultiselect:()=>D,nsNotice:()=>ie.Z,nsNumpad:()=>J.Z,nsPaginate:()=>ae.Z,nsSelect:()=>d,nsSelectAudio:()=>f,nsSpinner:()=>m,nsSubmenu:()=>a,nsSwitch:()=>S,nsTableRow:()=>h,nsTabs:()=>U,nsTabsItem:()=>X,nsTextarea:()=>_});var r=s(538),i=s(9671),n=r.default.component("ns-menu",{data:function(){return{defaultToggledState:!1,_save:0}},props:["href","label","icon","notification","toggled","identifier"],template:'\n    <div>\n        <a @click="toggleEmit()" :href="href || \'javascript:void(0)\'" :class="defaultToggledState ? \'border-blue-800 bg-gray-800\' : \'border-transparent bg-gray-900\'" class="flex justify-between py-2 border-l-8 text-gray-200 px-3 font-bold  hover:bg-gray-700">\n            <span class="flex items-center">\n            <i class="las text-lg mr-2" :class="icon?.length > 0 ? icon : \'la-star\'"></i>\n            {{ label }}\n            </span>\n            <span v-if="notification > 0" class="rounded-full bg-red-600 text-white font-bold w-6 h-6 text-xs justify-center items-center flex">{{ notification }}</span>\n        </a>\n        <ul :class="defaultToggledState ? \'\' : \'hidden\'" class="submenu-wrapper">\n            <slot></slot>                  \n        </ul>\n    </div>\n    ',mounted:function(){var e=this;this.defaultToggledState=void 0!==this.toggled?this.toggled:this.defaultToggledState,i.l.subject().subscribe((function(t){t.value!==e.identifier&&(e.defaultToggledState=!1)}))},methods:{toggleEmit:function(){var e=this;this.toggle().then((function(t){t&&i.l.emit({identifier:"side-menu.open",value:e.identifier})}))},toggle:function(){var e=this;return new Promise((function(t,s){0===e.href.length&&(e.defaultToggledState=!e.defaultToggledState,t(e.defaultToggledState))}))}}}),a=r.default.component("ns-submenu",{data:function(){return{}},props:["href","label","active"],mounted:function(){},template:'\n    <div>\n        <li>\n            <a :class="active ? \'font-bold text-white\' : \'text-gray-100\'" :href="href" class="py-2 border-l-8 border-blue-800 px-3 block bg-gray-800 hover:bg-gray-700">\n                <slot></slot>\n            </a>\n        </li>\n    </div>\n    '}),o=r.default.component("ns-button",{data:function(){return{clicked:!1,_save:0}},props:["type","disabled","link","href","routerLink","to"],template:'\n    <div class="flex" @click="$emit( \'click\' )">\n        <button :disabled="isDisabled" v-if="!link" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></button>\n        <router-link  :to="to" v-if="routerLink" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="link" :href="href" :class="buttonclass" class="flex items-center rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',mounted:function(){},computed:{isDisabled:function(){return this.disabled&&(0===this.disabled.length||"disabled"===this.disabled||this.disabled)},buttonclass:function(){var e;switch(this.type){case"info":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-blue-400 text-white");break;case"success":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-green-400 text-white");break;case"danger":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-red-400 text-white");break;case"warning":e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-orange-400 text-white");break;default:e="".concat(this.isDisabled?"bg-gray-400 border border-gray-500 cursor-not-allowed text-gray-600":"shadow bg-white text-gray-800")}return e}}}),l=r.default.component("ns-link",{data:function(){return{clicked:!1,_save:0}},props:["type","to","href","target"],template:'\n    <div class="flex">\n        <router-link v-if="to" :to="to" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></router-link>\n        <a v-if="href" :target="target" :href="href" :class="buttonclass" class="rounded cursor-pointer py-2 px-3 font-semibold"><slot></slot></a>\n    </div>\n    ',computed:{buttonclass:function(){switch(this.type){case"info":return"shadow bg-blue-400 text-white";case"success":return"shadow bg-green-400 text-white";case"danger":return"shadow bg-red-400 text-white";case"warning":return"shadow bg-orange-400 text-white";default:return"shadow bg-white text-gray-800"}}}}),c=r.default.component("ns-input",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700 dark:text-slate-200\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200 dark:border-slate-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 dark:text-slate-200 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500 dark:text-slate-200"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),u=s(7389),d=r.default.component("ns-select",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700 dark:text-slate-200\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200 dark:border-slate-200\'" class="border-2 mt-1 relative rounded-md shadow-sm mb-2">\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-gray-700 form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500 dark:text-slate-200"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),f=r.default.component("ns-select-audio",{data:function(){return{}},props:["name","placeholder","field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,playSelectedSound:function(){this.field.value.length>0&&new Audio(this.field.value).play()}},template:'\n    <div class="flex flex-col flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="border-2 mt-1 flex relative overflow-hidden rounded-md shadow-sm mb-2">\n            <div @click="playSelectedSound()" class="border-r-2 border-gray-200 flex-auto flex items-center justify-center hover:bg-blue-400 hover:text-white">\n                <button class="w-10 flex item-center justify-center">\n                    <i class="las la-play text-2xl"></i>\n                </button>\n            </div>\n            <select :disabled="field.disabled ? field.disabled : false" @change="$emit( \'change\', $event )" :name="field.name" v-model="field.value" :class="inputClass" class="text-gray-700 form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5 h-10">\n                <option :value="option.value" v-for="option of field.options" class="py-2">{{ option.label }}</option>\n            </select>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),p=r.default.component("ns-checkbox",{data:function(){return{}},props:["checked","field","label"],template:'\n    <div class="flex items-center justify-center cursor-pointer" @click="toggleIt()">\n        <div class="w-6 h-6 flex bg-white border-2 items-center justify-center cursor-pointer">\n            <i v-if="isChecked" class="las la-check"></i>   \n        </div>\n        <span v-if="label" class="mx-2">{{ label }}</span>\n        <span v-if="field" class="mx-2">{{ field.label }}</span>\n    </div>\n    ',computed:{isChecked:function(){return this.field?this.field.value:this.checked}},methods:{toggleIt:function(){void 0!==this.field&&(this.field.value=!this.field.value),this.$emit("change",!this.checked)}}}),h=r.default.component("ns-table-row",{props:["options","row","columns"],data:function(){return{optionsToggled:!1}},mounted:function(){},methods:{sanitizeHTML:function(e){var t=document.createElement("div");t.innerHTML=e;for(var s=t.getElementsByTagName("script"),r=s.length;r--;)s[r].parentNode.removeChild(s[r]);return t.innerHTML},getElementOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},toggleMenu:function(e){var t=this;if(this.row.$toggled=!this.row.$toggled,this.$emit("toggled",this.row),this.row.$toggled)setTimeout((function(){var e=t.$el.querySelectorAll(".relative > .absolute")[0],s=t.$el.querySelectorAll(".relative")[0],r=t.getElementOffset(s);e.style.top=r.top+"px",e.style.left=r.left+"px",s.classList.remove("relative"),s.classList.add("dropdown-holder")}),100);else{var s=this.$el.querySelectorAll(".dropdown-holder")[0];s.classList.remove("dropdown-holder"),s.classList.add("relative")}},handleChanged:function(e){this.row.$checked=e,this.$emit("updated",this.row)},triggerAsync:function(e){var t=this;e.confirm?confirm(e.confirm.message)&&i.ih[e.type.toLowerCase()](e.url).subscribe((function(e){i.kX.success(e.message).subscribe(),t.$emit("reload",t.row)}),(function(e){t.toggleMenu(),i.kX.error(e.message).subscribe()})):(i.l.emit({identifier:"ns-table-row-action",value:{action:e,row:this.row,component:this}}),this.toggleMenu())}},template:'\n    <tr :class="row.$cssClass ? row.$cssClass : \'border-gray-200 border text-sm\'">\n        <td class="text-gray-700 font-sans border-gray-200 p-2">\n            <ns-checkbox @change="handleChanged( $event )" :checked="row.$checked"> </ns-checkbox>\n        </td>\n        <td v-for="(column, identifier) of columns" class="text-gray-700 font-sans border-gray-200 p-2" v-html="sanitizeHTML( row[ identifier ] )"></td>\n        <td class="text-gray-700 font-sans border-gray-200 p-2 flex flex-col items-start justify-center">\n            <button @click="toggleMenu( $event )" class="outline-none rounded-full w-24 text-sm p-1 border border-gray-400 hover:bg-blue-400 hover:text-white hover:border-transparent"><i class="las la-ellipsis-h"></i> Options</button>\n            <div @click="toggleMenu( $event )" v-if="row.$toggled" class="absolute w-full h-full z-10 top-0 left-0"></div>\n            <div class="relative">\n                <div v-if="row.$toggled" class="zoom-in-entrance anim-duration-300 z-50 origin-bottom-right -ml-32 w-56 mt-2 absolute rounded-md shadow-lg">\n                    <div class="rounded-md bg-white shadow-xs">\n                        <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">\n                            <template v-for="action of row.$actions">\n                                <a :href="action.url" v-if="action.type === \'GOTO\'" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                                <a href="javascript:void(0)" @click="triggerAsync( action )" v-if="[ \'GET\', \'DELETE\', \'POPUP\' ].includes( action.type )" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900" role="menuitem" v-html="sanitizeHTML( action.label )"></a>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </td>\n    </tr>\n    '}),m=r.default.component("ns-spinner",{data:function(){return{}},mounted:function(){},computed:{validatedSize:function(){return this.size||24},validatedBorder:function(){return this.border||8},validatedAnimation:function(){return this.animation||"fast"}},props:["color","size","border"],template:"\n    <div class=\"flex items-center justify-center\">\n    <div class=\"loader ease-linear rounded-full border-gray-200\" :class=\"validatedAnimation + ' border-' + validatedBorder + ' border-t-' + validatedBorder + ' w-' + validatedSize + ' h-' + validatedSize\"></div>\n    </div>\n    "}),v=s(7266),b=r.default.component("ns-crud-form",{data:function(){return{form:{},globallyChecked:!1,formValidation:new v.Z,rows:[]}},mounted:function(){this.loadForm()},props:["src","create-url","field-class","return-url","submit-url","submit-method","disable-tabs"],computed:{activeTabFields:function(){for(var e in this.form.tabs)if(this.form.tabs[e].active)return this.form.tabs[e].fields;return[]}},methods:{__:u.__,toggle:function(e){for(var t in this.form.tabs)this.form.tabs[t].active=!1;this.form.tabs[e].active=!0},handleShowOptions:function(e){this.rows.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},submit:function(){var e=this;return this.formValidation.validateForm(this.form).length>0?i.kX.error(this.$slots["error-invalid-form"]?this.$slots["error-invalid-form"][0].text:"No error message provided for having an invalid form.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():(this.formValidation.disableForm(this.form),void 0===this.submitUrl?i.kX.error(this.$slots["error-no-submit-url"]?this.$slots["error-no-submit-url"][0].text:"No error message provided for not having a valid submit url.",this.$slots.okay?this.$slots.okay[0].text:"OK").subscribe():void i.ih[this.submitMethod?this.submitMethod.toLowerCase():"post"](this.submitUrl,this.formValidation.extractForm(this.form)).subscribe((function(t){if("success"===t.status){if(e.returnUrl&&e.returnUrl.length>0)return document.location=e.returnUrl;e.$emit("save",t)}e.formValidation.enableForm(e.form)}),(function(t){i.kX.error(t.message,void 0,{duration:5e3}).subscribe(),e.formValidation.triggerError(e.form,t),e.formValidation.enableForm(e.form)})))},handleGlobalChange:function(e){this.globallyChecked=e,this.rows.forEach((function(t){return t.$checked=e}))},loadForm:function(){var e=this;i.ih.get("".concat(this.src)).subscribe({next:function(t){e.form=e.parseForm(t.form),i.kq.doAction("ns-crud-form-loaded",e),e.$emit("updated",e.form)},error:function(e){i.kX.error(e.message,"OKAY",{duration:0}).subscribe()}})},parseForm:function(e){e.main.value=void 0===e.main.value?"":e.main.value,e.main=this.formValidation.createFields([e.main])[0];var t=0;for(var s in e.tabs)0===t&&(e.tabs[s].active=!0),e.tabs[s].active=void 0!==e.tabs[s].active&&e.tabs[s].active,e.tabs[s].fields=this.formValidation.createFields(e.tabs[s].fields),t++;return e}},template:'\n    <div class="form flex-auto" id="crud-form">\n        <div v-if="Object.values( form ).length === 0" class="flex items-center justify-center h-full">\n            <ns-spinner />\n        </div>\n        <div v-if="Object.values( form ).length > 0">\n            <div class="flex flex-col">\n                <div class="flex justify-between items-center" v-if="form.main">\n                    <label for="title" class="font-bold my-2 text-gray-700">\n                        <span v-if="form.main.name">{{ form.main.label }}</span>\n                    </label>\n                    <div for="title" class="text-sm my-2 text-gray-700">\n                        <a v-if="returnUrl" :href="returnUrl" class="rounded-full border border-gray-400 hover:border-red-600 hover:bg-red-600 hover:text-white bg-white px-2 py-1">{{ __( \'Go Back\' ) }}</a>\n                    </div>\n                </div>\n                <template v-if="form.main.name">\n                    <div :class="form.main.disabled ? \'border-gray-500\' : form.main.errors.length > 0 ? \'border-red-600\' : \'border-blue-500\'" class="flex border-2 rounded overflow-hidden">\n                        <input v-model="form.main.value" \n                            @blur="formValidation.checkField( form.main )" \n                            @change="formValidation.checkField( form.main )" \n                            :disabled="form.main.disabled"\n                            type="text" \n                            :class="form.main.disabled ? \'bg-gray-400\' : \'\'"\n                            class="flex-auto text-gray-700 outline-none h-10 px-2">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'bg-gray-500\' : form.main.errors.length > 0 ? \'bg-red-500\' : \'bg-blue-500\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                    <p class="text-xs text-gray-600 py-1" v-if="form.main.description && form.main.errors.length === 0">{{ form.main.description }}</p>\n                    <p class="text-xs py-1 text-red-500" v-for="error of form.main.errors">\n                        <span v-if="error.identifier=== \'required\'"><slot name="error-required">{{ error.identifier }}</slot></span>\n                        <span v-if="error.identifier=== \'invalid\'"><slot name="error-invalid">{{ error.message }}</slot></span>\n                    </p>\n                </template>\n            </div>\n            <div id="tabs-container" class="my-5" v-if="disableTabs !== \'true\'">\n                <div class="header flex" style="margin-bottom: -1px;">\n                    <div v-for="( tab , identifier ) of form.tabs" \n                        @click="toggle( identifier )" \n                        :class="tab.active ? \'border-b-0 bg-white\' : \'border bg-gray-200\'" \n                        class="tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n                </div>\n                <div class="border border-gray-400 p-4 bg-white">\n                    <div class="-mx-4 flex flex-wrap">\n                        <div :class="fieldClass || \'px-4 w-full md:w-1/2 lg:w-1/3\'" v-for="field of activeTabFields">\n                            <ns-field @blur="formValidation.checkField( field )" @change="formValidation.checkField( field )" :field="field"/>\n                        </div>\n                    </div>\n                    <div class="flex justify-end" v-if="! form.main.name">\n                        <button :disabled="form.main.disabled" :class="form.main.disabled ? \'bg-gray-500\' : form.main.errors.length > 0 ? \'bg-red-500\' : \'bg-blue-500\'" @click="submit()" class="outline-none px-4 h-10 text-white border-l border-gray-400"><slot name="save">Save</slot></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    '}),_=r.default.component("ns-textarea",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <textarea \n                :rows="field.data ? ( field.data.rows || 10 ) : 10"\n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" :type="type || field.type || \'text\'" \n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5" :placeholder="placeholder"></textarea>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">This field is required.</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">This field must contain a valid email address.</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),g=s(381),x=s.n(g),y=s(7144),w=s.n(y);s(4461);const C=r.default.extend({name:"ns-date-range-picker",data:function(){return{dateRange:{startDate:null,endDate:null}}},components:{DateRangePicker:w()},mounted:function(){void 0!==this.field.value&&(this.dateRange=this.field.value)},watch:{dateRange:function(){this.field.value=this.dateRange,this.$emit("change",this)}},methods:{__:u.__,getFormattedDate:function(e){return null!==e?x()(e).format("YYYY-MM-DD HH:mm"):(0,u.__)("N/D")},clearDate:function(){this.dateRange={startDate:null,endDate:null},this.field.value=void 0}},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"]});var k=s(1900);const j=(0,k.Z)(C,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-auto flex-col mb-2"},[s("label",{staticClass:"block leading-5 font-medium",class:e.hasError?"text-red-700":"text-gray-700",attrs:{for:e.field.name}},[e._t("default")],2),e._v(" "),s("div",{staticClass:"mt-1 relative flex border-2 rounded-md focus:shadow-sm",class:e.hasError?"border-red-400":"border-gray-200"},[e.leading?s("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[s("span",{staticClass:"text-gray-500 sm:text-sm sm:leading-5"},[e._v("\n            "+e._s(e.leading)+"\n            ")])]):e._e(),e._v(" "),s("button",{staticClass:"px-3 outline-none bg-red-500 font-semibold text-white",on:{click:function(t){return e.clearDate()}}},[s("i",{staticClass:"las la-times"})]),e._v(" "),s("date-range-picker",{ref:"picker",staticClass:"w-full flex items-center",attrs:{"locale-data":{firstDay:1,format:"dd-mm-yyyy HH:mm:ss"},timePicker:!0,timePicker24Hour:!0,showWeekNumbers:!0,showDropdowns:!0,autoApply:!1,appendToBody:!0,disabled:e.field.disabled,linkedCalendars:!0},on:{blur:function(t){return e.$emit("blur",this)},update:function(t){return e.$emit("change",this)}},scopedSlots:e._u([{key:"input",fn:function(t){return[s("div",{staticClass:"flex justify-between items-center w-full py-2"},[s("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Starts"))+" : "+e._s(e.getFormattedDate(t.startDate)))]),e._v(" "),s("span",{staticClass:"text-xs"},[e._v(e._s(e.__("Range Ends"))+" : "+e._s(e.getFormattedDate(t.endDate)))])])]}}]),model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),e.field.errors&&0!==e.field.errors.length?e._e():s("p",{staticClass:"text-xs text-gray-500"},[e._t("description")],2),e._v(" "),e._l(e.field.errors,(function(t,r){return s("p",{key:r,staticClass:"text-xs text-red-400"},["required"===t.identifier?e._t(t.identifier,(function(){return[e._v(e._s(e.__("This field is required.")))]})):e._e(),e._v(" "),"email"===t.identifier?e._t(t.identifier,(function(){return[e._v(e._s(e.__("This field must contain a valid email address.")))]})):e._e(),e._v(" "),"invalid"===t.identifier?e._t(t.identifier,(function(){return[e._v(e._s(t.message))]})):e._e()],2)}))],2)}),[],!1,null,null,null).exports;var $=s(7949),P=r.default.component("ns-field",{data:function(){return{}},mounted:function(){},components:{nsDateRangePicker:j,nsDateTimePicker:$.Z},computed:{isInputField:function(){return["text","password","email","number","tel"].includes(this.field.type)},isDateField:function(){return["date"].includes(this.field.type)},isSelectField:function(){return["select"].includes(this.field.type)},isTextarea:function(){return["textarea"].includes(this.field.type)},isCheckbox:function(){return["checkbox"].includes(this.field.type)},isMultiselect:function(){return["multiselect"].includes(this.field.type)},isSelectAudio:function(){return["select-audio"].includes(this.field.type)},isSwitch:function(){return["switch"].includes(this.field.type)},isMedia:function(){return["media"].includes(this.field.type)},isCkEditor:function(){return["ckeditor"].includes(this.field.type)},isDateTimePicker:function(){return["datetimepicker"].includes(this.field.type)},isDateRangePicker:function(){return["daterangepicker"].includes(this.field.type)},isCustom:function(){return["custom"].includes(this.field.type)}},props:["field"],methods:{addOption:function(e){"select"===this.field.type&&this.field.options.forEach((function(e){return e.selected=!1})),e.selected=!0;var t=this.field.options.indexOf(e);this.field.options.splice(t,1),this.field.options.unshift(e),this.refreshMultiselect(),this.$emit("change",{action:"addOption",option:e})},refreshMultiselect:function(){this.field.value=this.field.options.filter((function(e){return e.selected})).map((function(e){return e.value}))},removeOption:function(e){e.selected=!1,this.refreshMultiselect(),this.$emit("change",{action:"removeOption",option:e})}},template:'\n    <div class="flex flex-auto">\n        <ns-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isInputField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-input>\n        <ns-date-time-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateTimePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-time-picker>\n        <ns-date @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date>\n        <ns-media-input @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isMedia">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-media-input>\n        <ns-select @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectField">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select>\n        <ns-date-range-picker @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isDateRangePicker">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-date-range-picker>\n        <ns-select-audio @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isSelectAudio">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-select-audio>\n        <ns-textarea @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isTextarea">\n            <template>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-textarea v-slot>\n        <ns-checkbox @blur="$emit( \'blur\', field )" @change="$emit( \'change\', field )"  :field="field" v-if="isCheckbox">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-checkbox>\n        <ns-multiselect \n            @addOption="addOption( $event )" \n            @removeOption="removeOption( $event )" \n            :field="field" \n            v-if="isMultiselect">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-multiselect>\n        <ns-ckeditor \n            :field="field" \n            v-if="isCkEditor">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-ckeditor>\n        <ns-switch \n            :field="field" \n            @change="$emit( \'change\', field )"\n            v-if="isSwitch">\n            <template v-slot>{{ field.label }}</template>\n            <template v-slot:description><span v-html="field.description || \'\'"></span></template>\n        </ns-switch>\n        <template v-if="isCustom">\n            <keep-alive>\n                <component \n                    :field="field"\n                    @blur="$emit( \'blur\', field )" \n                    @change="$emit( \'change\', field )" \n                    v-bind:is="field.component"></component>\n            </keep-alive>\n        </template>\n    </div>\n    '}),D=r.default.component("ns-multiselect",{data:function(){return{showPanel:!1,search:""}},props:["field"],computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=void 0!==t.selected&&t.selected,e.field.value&&e.field.value.includes(t.value)&&(t.selected=!0),t}))}},methods:{__:u.__,addOption:function(e){this.field.disabled||(this.$emit("addOption",e),this.$forceUpdate(),setTimeout((function(){}),100))},removeOption:function(e,t){var s=this;if(!this.field.disabled)return t.preventDefault(),t.stopPropagation(),this.$emit("removeOption",e),this.$forceUpdate(),setTimeout((function(){s.search=""}),100),!1}},mounted:function(){var e=this;this.field.value&&this.field.value.reverse().forEach((function(t){var s=e.field.options.filter((function(e){return e.value===t}));s.length>=0&&e.addOption(s[0])}))},template:'\n    <div class="flex flex-col">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block mb-1 leading-5 font-medium"><slot></slot></label>\n        <div class="bg-white flex flex-col">\n            <div @click="showPanel = !showPanel" :class="showPanel ? \'\' : \'\'" class="select-preview flex justify-between rounded border-2 border-gray-200 p-2 items-center">\n                <div class="flex -mx-1 -my-1 flex-wrap">\n                    <div class="px-1 my-1" v-for="(option,index) of _options.filter( o => o.selected )">\n                        <div class="rounded bg-blue-400 text-white flex justify-between p-1 items-center">\n                            <span class="pr-8">{{ option.label }}</span>\n                            <button @click="removeOption( option, $event )" class="rounded outline-none hover:bg-blue-500 h-6 w-6 flex items-center justify-center">\n                                <i class="las la-times"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <i class="las la-angle-down" v-if="showPanel"></i>\n                    <i class="las la-angle-up" v-if="!showPanel"></i>\n                </div>\n            </div>\n            <div class="h-0 z-10" v-if="showPanel" :class="showPanel ? \'shadow\' : \'\'">\n                <div class="bg-white shadow">\n                    <div class="search border-b border-gray-200">\n                        <input v-model="search" class="p-2 w-full text-gray-600 outline-none" placeholder="Search">\n                    </div>\n                    <div class="h-40 overflow-y-auto">\n                        <div @click="addOption( option )" v-for="(option, index) of _options" :class="option.selected ? \'bg-blue-300 text-white\' : \'text-gray-600\'" class="option p-2 flex justify-between cursor-pointer hover:bg-blue-200 hover:text-white">\n                            <span>{{ option.label }}</span>\n                            <span>\n                                <i v-if="option.checked" class="las la-check"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <div v-if="_options.length === 0" class="p-2 text-center text-gray-400">{{ __( \'Nothing to display\' ) }}</div>\n                </div>\n            </div>\n        </div>\n        <div class="my-2">\n            <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n            <p v-for="error of field.errors" class="text-xs text-red-400">\n                <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n                <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n                <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n            </p>\n        </div>\n    </div>\n    '}),S=r.default.component("ns-switch",{data:function(){return{}},mounted:function(){},computed:{_options:function(){var e=this;return this.field.options.map((function(t){return t.selected=t.value===e.field.value,t}))},hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":""},sizeClass:function(){return" w-1/".concat(this._options.length<=4?this._options.length:4)},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},methods:{__:u.__,setSelected:function(e){this.field.value=e.value,this._options.forEach((function(e){return e.selected=!1})),e.selected=!0,this.$forceUpdate(),this.$emit("change",e.value)}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div class="rounded-lg flex overflow-hidden w-40 shadow my-2" :class="hasError ? \'border border-red-400\' : \'\'">\n            <button \n                :disabled="option.disabled" \n                v-for="option of _options" \n                @click="setSelected( option )" \n                :class="option.selected ? \'bg-blue-400 text-white \' + sizeClass : \'bg-gray-100 text-gray-800\' + \' \' + inputClass + \' \' + sizeClass" \n                class="px-3 py-2 flex-no-wrap outline-none">{{ option.label }}</button>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n        </p>\n    </div>\n    '}),O=r.default.component("ns-date",{data:function(){return{}},mounted:function(){},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-auto flex-col mb-2">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <input \n                :disabled="field.disabled" \n                v-model="field.value" \n                @blur="$emit( \'blur\', this )" \n                @change="$emit( \'change\', this )" \n                :id="field.name" type="date"\n                :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),E=s(2242),T=s(8515),F=r.default.component("ns-media-input",{template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative border-2 rounded-md focus:shadow-sm">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <div class="rounded overflow-hidden flex">\n                <div \n                    v-if="field.data && field.data.type === \'model\'"\n                    class="form-input flex w-full sm:text-sm items-center sm:leading-5 h-10">\n                    <template v-if="field.value && field.value.name">\n                        <img class="w-8 h-8 m-1" :src="field.value.sizes.thumb" :alt="field.value.name">\n                        <span class="text-xs text-gray-600">{{ field.value.name }}</span>\n                    </template>\n                </div>\n                <input \n                    v-if="! field.data || field.data.type === \'undefined\' || field.data.type === \'url\'"\n                    v-model="field.value" \n                    @blur="$emit( \'blur\', this )" \n                    @change="$emit( \'change\', this )" \n                    :id="field.name" :type="type || field.type || \'text\'" \n                    :class="inputClass" class="form-input block w-full sm:text-sm sm:leading-5 h-10" :placeholder="placeholder" />\n                <button \n                    @click="toggleMedia( field )"\n                    class="w-10 h-10 flex items-center justify-center border-l-2 border-gray-200 hover:bg-blue-400 hover:text-white outline-none">\n                    <i class="las la-photo-video"></i>\n                </button>\n            </div>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    ',computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"pl-8":"px-4"}},data:function(){return{}},props:["placeholder","leading","type","field"],mounted:function(){},methods:{toggleMedia:function(){var e=this;new Promise((function(t,s){E.G.show(T.Z,Object.assign({resolve:t,reject:s},e.field.data||{}))})).then((function(t){"use-selected"===t.event&&(e.field.data&&"url"!==e.field.data.type?e.field.data&&"model"!==e.field.data.type||(e.field.value=t.value[0]):e.field.value=t.value[0].sizes.original,e.$forceUpdate())}))}}}),A=r.default.component("ns-close-button",{template:'\n    <button @click="clicked( $event )" class="outline-none hover:bg-red-400 hover:text-white hover:border-red-600 rounded-full h-8 w-8 border items-center justify-center">\n        <i class="las la-times"></i>\n    </button>\n    ',methods:{clicked:function(e){this.$emit("click",e)}}}),V=r.default.component("ns-icon-button",{template:'\n    <button @click="clicked( $event )" :class="buttonClass ? buttonClass : \'hover:bg-blue-400 hover:text-white hover:border-blue-600\'" class="rounded-full h-8 w-8 border items-center justify-center">\n        <i :class="className" class="las"></i>\n    </button>\n    ',props:["className","buttonClass"],methods:{clicked:function(e){this.$emit("click",e)}}}),q=s(1272),M=s.n(q),N=s(5234),R=s.n(N),Z=r.default.component("ns-ckeditor",{data:function(){return{editor:R()}},components:{ckeditor:M().component},mounted:function(){},methods:{__:u.__},computed:{hasError:function(){return void 0!==this.field.errors&&this.field.errors.length>0},disabledClass:function(){return this.field.disabled?"bg-gray-200 cursor-not-allowed":"bg-transparent"},inputClass:function(){return this.disabledClass+" "+this.leadClass},leadClass:function(){return this.leading?"p-8":"p-2"}},props:["placeholder","leading","type","field"],template:'\n    <div class="flex flex-col mb-2 flex-auto">\n        <label :for="field.name" :class="hasError ? \'text-red-700\' : \'text-gray-700\'" class="block leading-5 font-medium"><slot></slot></label>\n        <div :class="hasError ? \'border-red-400\' : \'border-gray-200\'" class="mt-1 relative rounded-md focus:shadow-sm mb-2">\n            <div v-if="leading" class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">\n                <span class="text-gray-500 sm:text-sm sm:leading-5">\n                {{ leading }}\n                </span>\n            </div>\n            <ckeditor class="w-full" :editor="editor" v-model="field.value"></ckeditor>\n        </div>\n        <p v-if="! field.errors || field.errors.length === 0" class="text-xs text-gray-500"><slot name="description"></slot></p>\n        <p v-for="error of field.errors" class="text-xs text-red-400">\n            <slot v-if="error.identifier === \'required\'" :name="error.identifier">{{ __( \'This field is required.\' ) }}</slot>\n            <slot v-if="error.identifier === \'email\'" :name="error.identifier">{{ __( \'This field must contain a valid email address.\' ) }}</slot>\n            <slot v-if="error.identifier === \'invalid\'" :name="error.identifier">{{ error.message }}</slot>\n        </p>\n    </div>\n    '}),U=r.default.component("ns-tabs",{data:function(){return{childrens:[]}},props:["active"],computed:{activeComponent:function(){var e=this.$children.filter((function(e){return e.active}));return e.length>0&&e[0]}},methods:{toggle:function(e){this.$emit("active",e.identifier),this.$emit("changeTab",e.identifier)}},mounted:function(){this.childrens=this.$children},template:'\n    <div class="tabs flex flex-col flex-auto">\n        <div class="header flex" style="margin-bottom: -1px;">\n            <div v-for="( tab , identifier ) of childrens" @click="toggle( tab )" :class="active === tab.identifier ? \'border-b-0 bg-white z-10\' : \'border bg-gray-200\'" class="tab rounded-tl rounded-tr border border-gray-400  px-3 py-2 text-gray-700 cursor-pointer" style="margin-right: -1px">{{ tab.label }}</div>\n        </div>\n        <slot></slot>\n    </div>\n    '}),X=r.default.component("ns-tabs-item",{data:function(){return{}},mounted:function(){},props:["label","identifier","padding"],template:'\n    <div :class="( padding || \'p-4\' )" class="border flex-auto border-gray-400 bg-white" v-if="$parent.active === identifier">\n        <slot></slot>\n    </div>\n    '}),L=s(7757),z=s.n(L),Y=s(8774),I=s(8603),W=s(6386);const H=r.default.extend({data:function(){return{fields:[],validation:new v.Z}},methods:{__:u.__,popupCloser:I.Z,popupResolver:W.Z,closePopup:function(){this.popupResolver(!1)},useFilters:function(){this.popupResolver(this.validation.extractFields(this.fields))},clearFilters:function(){this.fields.forEach((function(e){return e.value=""})),this.popupResolver(null)}},mounted:function(){this.fields=this.validation.createFields(this.$popupParams.queryFilters),this.popupCloser()}});const B=(0,k.Z)(H,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow-lg w-95vw h-95vh md:w-2/5-screen overflow-hidden md:h-5/6-screen flex flex-col"},[s("div",{staticClass:"p-2 border-b flex justify-between items-center"},[s("h3",[e._v(e._s(e.__("Search Filters")))]),e._v(" "),s("div",[s("ns-close-button",{on:{click:function(t){return e.closePopup()}}})],1)]),e._v(" "),s("div",{staticClass:"p-2 border-b flex-auto overflow-y-auto"},e._l(e.fields,(function(e,t){return s("ns-field",{key:t,attrs:{field:e}})})),1),e._v(" "),s("div",{staticClass:"p-2 flex justify-between"},[s("div",[s("ns-button",{attrs:{type:"danger"},on:{click:function(t){return e.clearFilters()}}},[e._v(e._s(e.__("Clear Filters")))])],1),e._v(" "),s("div",[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.useFilters()}}},[e._v(e._s(e.__("Use Filters")))])],1)])])}),[],!1,null,null,null).exports;var G=function(e,t,s,r){return new(s||(s=Promise))((function(i,n){function a(e){try{l(r.next(e))}catch(e){n(e)}}function o(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))};const Q={data:function(){return{isRefreshing:!1,sortColumn:"",searchInput:"",queryFiltersString:"",searchQuery:"",page:1,bulkAction:"",bulkActions:[],queryFilters:[],withFilters:!1,columns:[],selectedEntries:[],globallyChecked:!1,result:{current_page:null,data:[],first_page_url:null,from:null,last_page:null,last_page_url:null,next_page_url:null,path:null,per_page:null,prev_page_url:null,to:null,total:null}}},mounted:function(){void 0!==this.identifier&&nsCrudHandler.defineInstance(this.identifier,this),this.loadConfig()},props:["src","create-url","mode","identifier","queryParams"],computed:{getParsedSrc:function(){return"".concat(this.src,"?").concat(this.sortColumn).concat(this.searchQuery).concat(this.queryFiltersString).concat(this.queryPage).concat(this.getQueryParams()?"&"+this.getQueryParams():"")},showQueryFilters:function(){return this.queryFilters.length>0},getSelectedAction:function(){var e=this,t=this.bulkActions.filter((function(t){return t.identifier===e.bulkAction}));return t.length>0&&t[0]},pagination:function(){return this.result?this.pageNumbers(this.result.last_page,this.result.current_page):[]},queryPage:function(){return this.result?"&page=".concat(this.page):""},resultInfo:function(){return(0,u.__)("displaying {perPage} on {items} items").replace("{perPage}",this.result.total).replace("{items}",this.result.total)}},methods:{__:u.__,getQueryParams:function(){var e=this;return this.queryParams?Object.keys(this.queryParams).map((function(t){return"".concat(t,"=").concat(e.queryParams[t])})).join("&"):""},pageNumbers:function(e,t){var s=[];t-3>1&&s.push(1,"...");for(var r=1;r<=e;r++)t+3>r&&t-3<r&&s.push(r);return t+3<e&&s.push("...",e),s.filter((function(e){return e>0||"string"==typeof e}))},downloadContent:function(){nsHttpClient.post("".concat(this.src,"/export?").concat(this.getParsedSrc),{entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe((function(e){setTimeout((function(){return document.location=e.url}),300),i.kX.success((0,u.__)("The document has been generated.")).subscribe()}),(function(e){i.kX.error(e.message||(0,u.__)("Unexpected error occured.")).subscribe()}))},clearSelectedEntries:function(){var e=this;E.G.show(Y.Z,{title:(0,u.__)("Clear Selected Entries ?"),message:(0,u.__)("Would you like to clear all selected entries ?"),onAction:function(t){t&&(e.selectedEntries=[])}})},refreshRow:function(e){if(!0===e.$checked){0===this.selectedEntries.filter((function(t){return t.$id===e.$id})).length&&this.selectedEntries.push(e)}else{var t=this.selectedEntries.filter((function(t){return t.$id===e.$id}));if(t.length>0){var s=this.selectedEntries.indexOf(t[0]);this.selectedEntries.splice(s,1)}}},handleShowOptions:function(e){this.result.data.forEach((function(t){t.$id!==e.$id&&(t.$toggled=!1)}))},handleGlobalChange:function(e){var t=this;this.globallyChecked=e,this.result.data.forEach((function(s){s.$checked=e,t.refreshRow(s)}))},loadConfig:function(){var e=this;nsHttpClient.get("".concat(this.src,"/config?").concat(this.getQueryParams())).subscribe((function(t){e.columns=t.columns,e.bulkActions=t.bulkActions,e.queryFilters=t.queryFilters,e.refresh()}),(function(e){i.kX.error(e.message,"OK",{duration:!1}).subscribe()}))},cancelSearch:function(){this.searchInput="",this.search()},search:function(){this.searchInput?this.searchQuery="&search=".concat(this.searchInput):this.searchQuery="",this.refresh()},sort:function(e){for(var t in this.columns)t!==e&&(this.columns[t].$sorted=!1,this.columns[t].$direction="");switch(this.columns[e].$sorted=!0,this.columns[e].$direction){case"asc":this.columns[e].$direction="desc";break;case"desc":this.columns[e].$direction="";break;case"":this.columns[e].$direction="asc"}["asc","desc"].includes(this.columns[e].$direction)?this.sortColumn="active=".concat(e,"&direction=").concat(this.columns[e].$direction):this.sortColumn="",this.$emit("sort",this.columns[e]),this.refresh()},bulkDo:function(){var e=this;return this.bulkAction?this.selectedEntries.length>0?confirm(this.getSelectedAction.confirm||this.$slots["error-bulk-confirmation"]||(0,u.__)("Would you like to perform the selected bulk action on the selected entries ?"))?nsHttpClient.post("".concat(this.src,"/bulk-actions"),{action:this.bulkAction,entries:this.selectedEntries.map((function(e){return e.$id}))}).subscribe({next:function(t){i.kX.info(t.message).subscribe(),e.selectedEntries=[],e.refresh()},error:function(e){i.kX.error(e.message).subscribe()}}):void 0:i.kX.error(this.$slots["error-no-selection"]?this.$slots["error-no-selection"][0].text:(0,u.__)("No selection has been made.")).subscribe():i.kX.error(this.$slots["error-no-action"]?this.$slots["error-no-action"][0].text:(0,u.__)("No action has been selected.")).subscribe()},openQueryFilter:function(){return G(this,void 0,void 0,z().mark((function e(){var t,s=this;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){E.G.show(B,{resolve:e,reject:t,queryFilters:s.queryFilters})}));case 3:t=e.sent,this.withFilters=!1,this.queryFiltersString="",null!==t&&(this.withFilters=!0,this.queryFiltersString="&queryFilters="+encodeURIComponent(JSON.stringify(t))),this.refresh(),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})))},refresh:function(){var e=this;this.globallyChecked=!1,this.isRefreshing=!0,nsHttpClient.get("".concat(this.getParsedSrc)).subscribe((function(t){t.data=t.data.map((function(t){return e.selectedEntries.filter((function(e){return e.$id===t.$id})).length>0&&(t.$checked=!0),t})),e.isRefreshing=!1,e.result=t,e.page=t.current_page}),(function(t){e.isRefreshing=!1,i.kX.error(t.message).subscribe()}))}}};const K=(0,k.Z)(Q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-full rounded-lg bg-white",class:"light"!==e.mode?"shadow mb-8":"",attrs:{id:"crud-table"}},["light"!==e.mode?s("div",{staticClass:"p-2 border-b border-gray-200 flex flex-col md:flex-row justify-between flex-wrap",attrs:{id:"crud-table-header"}},[s("div",{staticClass:"w-full md:w-auto -mx-2 mb-2 md:mb-0 flex",attrs:{id:"crud-search-box"}},[s("div",{staticClass:"px-2 flex items-center justify-center"},[s("a",{staticClass:"rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 flex items-center justify-center cursor-pointer bg-white px-3 outline-none text-gray-800 border border-gray-400",attrs:{href:e.createUrl||"#"}},[s("i",{staticClass:"las la-plus"})])]),e._v(" "),s("div",{staticClass:"px-2"},[s("div",{staticClass:"rounded-full p-1 bg-gray-200 flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"w-36 md:w-auto bg-transparent outline-none px-2",attrs:{type:"text"},domProps:{value:e.searchInput},on:{input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._v(" "),s("button",{staticClass:"rounded-full w-8 h-8 bg-white outline-none hover:bg-blue-400 hover:text-white",on:{click:function(t){return e.search()}}},[s("i",{staticClass:"las la-search"})]),e._v(" "),e.searchQuery?s("button",{staticClass:"ml-1 rounded-full w-8 h-8 bg-red-400 text-white outline-none hover:bg-red-500 hover:text-white",on:{click:function(t){return e.cancelSearch()}}},[s("i",{staticClass:"las la-times"})]):e._e()])]),e._v(" "),s("div",{staticClass:"px-2 flex"},[s("button",{staticClass:"rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 bg-white px-3 outline-none text-gray-800 border border-gray-400",on:{click:function(t){return e.refresh()}}},[s("i",{staticClass:"las la-sync",class:e.isRefreshing?"animate-spin":""})])]),e._v(" "),e.showQueryFilters?s("div",{staticClass:"px-2 flex"},[s("button",{staticClass:"border rounded-full hover:border-blue-400 hover:text-white hover:bg-blue-400 text-sm h-10 px-3 outline-none bg-white",class:e.withFilters?"bg-blue-100 border-blue-200":"text-gray-800 border-gray-400",on:{click:function(t){return e.openQueryFilter()}}},[e.withFilters?e._e():s("i",{staticClass:"las la-filter"}),e._v(" "),e.withFilters?s("i",{staticClass:"las la-check"}):e._e(),e._v(" "),e.withFilters?e._e():s("span",[e._v(e._s(e.__("Filters")))]),e._v(" "),e.withFilters?s("span",[e._v(e._s(e.__("Has Filters")))]):e._e()])]):e._e()]),e._v(" "),s("div",{staticClass:"-mx-1 flex flex-wrap w-full md:w-auto",attrs:{id:"crud-buttons"}},[e.selectedEntries.length>0?s("div",{staticClass:"px-1 flex"},[s("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 hover:border-blue-400 hover:text-white hover:bg-blue-400 outline-none border-gray-400 border text-gray-700",on:{click:function(t){return e.clearSelectedEntries()}}},[s("i",{staticClass:"lar la-check-square"}),e._v(" "+e._s(e.__("{entries} entries selected").replace("{entries}",e.selectedEntries.length))+"\n                ")])]):e._e(),e._v(" "),s("div",{staticClass:"px-1 flex"},[s("button",{staticClass:"flex justify-center items-center rounded-full text-sm h-10 px-3 bg-teal-400 outline-none text-white font-semibold",on:{click:function(t){return e.downloadContent()}}},[s("i",{staticClass:"las la-download"}),e._v(" "+e._s(e.__("Download")))])])])]):e._e(),e._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"overflow-x-auto flex-auto"},[Object.values(e.columns).length>0?s("table",{staticClass:"table w-full"},[s("thead",[s("tr",{staticClass:"text-gray-700 border-b border-gray-200"},[s("th",{staticClass:"text-center px-2 border-gray-200 bg-gray-100 border w-16 py-2"},[s("ns-checkbox",{attrs:{checked:e.globallyChecked},on:{change:function(t){return e.handleGlobalChange(t)}}})],1),e._v(" "),e._l(e.columns,(function(t,r){return s("th",{key:r,staticClass:"cursor-pointer justify-betweenw-40 border bg-gray-100 text-left px-2 border-gray-200 py-2",style:{"min-width":t.width||"auto"},on:{click:function(t){return e.sort(r)}}},[s("div",{staticClass:"w-full flex justify-between items-center"},[s("span",{staticClass:"flex"},[e._v(e._s(t.label))]),e._v(" "),s("span",{staticClass:"h-6 w-6 flex justify-center items-center"},["desc"===t.$direction?s("i",{staticClass:"las la-sort-amount-up"}):e._e(),e._v(" "),"asc"===t.$direction?s("i",{staticClass:"las la-sort-amount-down"}):e._e()])])])})),e._v(" "),s("th",{staticClass:"text-left px-2 py-2 w-16 border border-gray-200 bg-gray-100"})],2)]),e._v(" "),s("tbody",[void 0!==e.result.data&&e.result.data.length>0?e._l(e.result.data,(function(t,r){return s("ns-table-row",{key:r,attrs:{columns:e.columns,row:t},on:{updated:function(t){return e.refreshRow(t)},reload:function(t){return e.refresh()},toggled:function(t){return e.handleShowOptions(t)}}})})):e._e(),e._v(" "),e.result&&0!==e.result.data.length?e._e():s("tr",[s("td",{staticClass:"text-center text-gray-600 py-3",attrs:{colspan:Object.values(e.columns).length+2}},[e._v(e._s(e.__("There is nothing to display...")))])])],2)]):e._e()])]),e._v(" "),s("div",{staticClass:"p-2 flex flex-col md:flex-row justify-between"},[e.bulkActions.length>0?s("div",{staticClass:"mb-2 md:mb-0 flex justify-between rounded-full bg-gray-200 p-1",attrs:{id:"grouped-actions"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.bulkAction,expression:"bulkAction"}],staticClass:"text-gray-800 outline-none bg-transparent",attrs:{id:"grouped-actions"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.bulkAction=t.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",value:""}},[e._t("bulk-label",(function(){return[e._v(e._s(e.__("Bulk Actions")))]}))],2),e._v(" "),e._l(e.bulkActions,(function(t,r){return s("option",{key:r,domProps:{value:t.identifier}},[e._v(e._s(t.label))])}))],2),e._v(" "),s("button",{staticClass:"h-8 w-8 outline-none hover:bg-blue-400 hover:text-white rounded-full bg-white flex items-center justify-center",on:{click:function(t){return e.bulkDo()}}},[e._t("bulk-go",(function(){return[e._v(e._s(e.__("Go")))]}))],2)]):e._e(),e._v(" "),s("div",{staticClass:"flex"},[s("div",{staticClass:"items-center flex text-gray-600 mx-4"},[e._v(e._s(e.resultInfo))]),e._v(" "),s("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[e.result.current_page?[s("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.first_page,e.refresh()}}},[s("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.pagination,(function(t,r){return["..."!==e.page?s("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full hover:bg-blue-400 hover:text-white",class:e.page==t?"bg-blue-400 text-white":"bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(s){e.page=t,e.refresh()}}},[e._v(e._s(t))]):e._e(),e._v(" "),"..."===e.page?s("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),s("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.page=e.result.last_page,e.refresh()}}},[s("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)])])])}),[],!1,null,null,null).exports;var J=s(9499),ee=s(1726),te=s(7259);const se=r.default.extend({methods:{__:u.__},data:function(){return{svg:""}},mounted:function(){this.svg=(0,ee.createAvatar)(te,{seed:this.displayName})},computed:{avatarUrl:function(){return 0===this.url.length?"":this.url}},props:["url","display-name"]});const re=(0,k.Z)(se,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex justify-between items-center flex-shrink-0"},[s("span",{staticClass:"hidden md:inline-block text-gray-600 px-2"},[e._v(e._s(e.__("Howdy, {name}").replace("{name}",this.displayName)))]),e._v(" "),s("span",{staticClass:"md:hidden text-gray-600 px-2"},[e._v(e._s(e.displayName))]),e._v(" "),s("div",{staticClass:"px-2"},[s("div",{staticClass:"w-8 h-8 overflow-hidden rounded-full bg-gray-600"},[""!==e.avatarUrl?s("img",{staticClass:"w-8 h-8 overflow-hidden rounded-full",attrs:{src:e.avatarUrl,alt:e.displayName,srcset:""}}):e._e(),e._v(" "),""===e.avatarUrl?s("div",{domProps:{innerHTML:e._s(e.svg)}}):e._e()])])])}),[],!1,null,null,null).exports;var ie=s(3516),ne=s(1544),ae=s(5834)},1356:(e,t,s)=>{"use strict";s.d(t,{W:()=>c,f:()=>u});var r=s(538),i=s(2077),n=s.n(i),a=s(6740),o=s.n(a),l=new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join(""),c=r.default.filter("currency",(function(e){var t,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";switch(ns.currency.ns_currency_prefered){case"iso":t=ns.currency.ns_currency_iso;break;case"symbol":t=ns.currency.ns_currency_symbol}if("full"===r){var i={decimal:ns.currency.ns_currency_decimal_separator,separator:ns.currency.ns_currency_thousand_separator,precision:parseInt(ns.currency.ns_currency_precision),symbol:""};s=o()(e,i).format()}else s=n()(e).format("0.0a");return"".concat("before"===ns.currency.ns_currency_position?t:"").concat(s).concat("after"===ns.currency.ns_currency_position?t:"")})),u=function(e){var t="0.".concat(l);return parseFloat(n()(e).format(t))}},9698:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});var r=s(538).default.filter("truncate",(function(e,t){return e?(e=e.toString()).length>t?e.substring(0,t)+"...":e:""}))},7266:(e,t,s)=>{"use strict";function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}s.d(t,{Z:()=>i});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,s,i;return t=e,s=[{key:"validateFields",value:function(e){var t=this;return 0===e.map((function(e){return t.checkField(e),e.errors?0===e.errors.length:0})).filter((function(e){return!1===e})).length}},{key:"validateFieldsErrors",value:function(e){var t=this;return e.map((function(e){return t.checkField(e),e.errors})).flat()}},{key:"validateForm",value:function(e){e.main&&this.validateField(e.main);var t=[];for(var s in e.tabs){var r=[],i=this.validateFieldsErrors(e.tabs[s].fields);i.length>0&&r.push(i),e.tabs[s].errors=r.flat(),t.push(r.flat())}return t.flat().filter((function(e){return void 0!==e}))}},{key:"initializeTabs",value:function(e){var t=0;for(var s in e)0===t&&(e[s].active=!0),e[s].active=void 0!==e[s].active&&e[s].active,e[s].fields=this.createFields(e[s].fields),t++;return e}},{key:"validateField",value:function(e){return this.checkField(e)}},{key:"fieldsValid",value:function(e){return!(e.map((function(e){return e.errors&&e.errors.length>0})).filter((function(e){return e})).length>0)}},{key:"createFields",value:function(e){return e.map((function(e){return e.type=e.type||"text",e.errors=e.errors||[],e.disabled=e.disabled||!1,"custom"===e.type&&(e.component=nsExtraComponents[e.name]),e}))}},{key:"createForm",value:function(e){if(e.main&&(e.main=this.createFields([e.main])[0]),e.tabs)for(var t in e.tabs)e.tabs[t].fields=this.createFields(e.tabs[t].fields),e.tabs[t].errors=[];return e}},{key:"enableFields",value:function(e){return e.map((function(e){return e.disabled=!1}))}},{key:"disableFields",value:function(e){return e.map((function(e){return e.disabled=!0}))}},{key:"disableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!0),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!0}))}},{key:"enableForm",value:function(e){for(var t in e.main&&(e.main.disabled=!1),e.tabs)e.tabs[t].fields.forEach((function(e){return e.disabled=!1}))}},{key:"getValue",value:function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"checkField",value:function(e){var t=this;return void 0!==e.validation&&(e.errors=[],this.detectValidationRules(e.validation).forEach((function(s){t.fieldPassCheck(e,s)}))),e}},{key:"extractForm",value:function(e){var t={};if(e.main&&(t[e.main.name]=e.main.value),e.tabs)for(var s in e.tabs)void 0===t[s]&&(t[s]={}),t[s]=this.extractFields(e.tabs[s].fields);return t}},{key:"extractFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"detectValidationRules",value:function(e){var t=function(e){var t;return["email","required"].includes(e)?{identifier:e}:(t=/(min)\:([0-9])+/g.exec(e))||(t=/(max)\:([0-9])+/g.exec(e))?{identifier:t[1],value:t[2]}:e};return Array.isArray(e)?e.filter((function(e){return"string"==typeof e})).map(t):e.split("|").map(t)}},{key:"triggerError",value:function(e,t){if(t.errors){var s=function(s){var r=s.split(".").filter((function(e){return!/^\d+$/.test(e)}));2===r.length&&e.tabs[r[0]].fields.forEach((function(e){e.name===r[1]&&t.errors[s].forEach((function(t){var s={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(s)}))})),s===e.main.name&&t.errors[s].forEach((function(t){e.main.errors.push({identifier:"invalid",invalid:!0,message:t,name:e.main.name})}))};for(var r in t.errors)s(r)}}},{key:"triggerFieldsErrors",value:function(e,t){if(t&&t.errors){var s=function(s){e.forEach((function(e){e.name===s&&t.errors[s].forEach((function(t){var s={identifier:"invalid",invalid:!0,message:t,name:e.name};e.errors.push(s)}))}))};for(var r in t.errors)s(r)}}},{key:"fieldPassCheck",value:function(e,t){if("required"===t.identifier){if(void 0===e.value||null===e.value||0===e.value.length)return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(s,r){s.identifier===t.identifier&&!0===s.invalid&&e.errors.splice(r,1)}))}if("email"===t.identifier&&e.value.length>0){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/.test(e.value))return e.errors.push({identifier:t.identifier,invalid:!0,name:e.name});e.errors.forEach((function(s,r){!0===s[t.identifier]&&e.errors.splice(r,1)}))}return e}}],s&&r(t.prototype,s),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},7389:(e,t,s)=>{"use strict";s.d(t,{__:()=>r,c:()=>i});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NexoPOS";return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e},i=function(e,t){return nsLanguage.getEntries(t)&&nsLanguage.getEntries(t)[e]||e}},8603:(e,t,s)=>{"use strict";function r(){var e=this;Object.keys(this).includes("$popup")&&this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close()),"press-esc"===t.event&&(e.$popupParams&&void 0!==e.$popupParams.reject&&e.$popupParams.reject(!1),e.$popup.close())}))}s.d(t,{Z:()=>r})},6386:(e,t,s)=>{"use strict";function r(e){void 0!==this.$popupParams.resolve&&this.$popupParams.reject&&(!1!==e?this.$popupParams.resolve(e):this.$popupParams.reject(e)),this.$popup.close()}s.d(t,{Z:()=>r})},2242:(e,t,s)=>{"use strict";s.d(t,{G:()=>a});var r=s(9248);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),this.config={primarySelector:void 0,popupClass:"shadow-lg h-half w-1/2 bg-white"},this.container=document.createElement("div"),this.popupBody=document.createElement("div"),this.config=Object.assign(this.config,t),void 0===this.config.primarySelector&&document.querySelectorAll(".is-popup").length>0){var s=document.querySelectorAll(".is-popup").length;this.parentWrapper=document.querySelectorAll(".is-popup")[s-1]}else this.parentWrapper=document.querySelector("body").querySelectorAll("div")[0];this.event=new r.x}var t,s,a;return t=e,s=[{key:"open",value:function(e){var t,s,r,i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.querySelector("body").querySelectorAll("div")[0];this.parentWrapper.style.filter="blur(4px)",a.style.filter="blur(6px)",this.container.setAttribute("class","absolute top-0 left-0 w-full h-full flex items-center justify-center is-popup"),this.container.addEventListener("click",(function(e){i.event.next({event:"click-overlay",value:!0}),e.stopPropagation()})),this.popupBody.addEventListener("click",(function(e){e.stopImmediatePropagation()})),this.container.style.background="rgb(51 51 51 / 20%)",this.container.id="popup-container-"+document.querySelectorAll(".is-popup").length,this.popupBody.setAttribute("class"," zoom-out-entrance"),this.popupBody.innerHTML='<div class="popup-body"></div>',this.container.appendChild(this.popupBody),document.body.appendChild(this.container);var o=Vue.extend(e);this.instance=new o({propsData:{popup:this}}),this.instance.template=(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.template)||void 0,this.instance.render=e.render||void 0,this.instance.methods=(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.methods)||(null==e?void 0:e.methods),this.instance.data=(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.data)||(null==e?void 0:e.data),this.instance.$popup=this,this.instance.$popupParams=n,this.instance.$mount("#".concat(this.container.id," .popup-body"))}},{key:"close",value:function(){var e=this;this.instance.$destroy(),this.event.unsubscribe(),this.parentWrapper.style.filter="blur(0px)";var t=document.querySelector("body").querySelectorAll("div")[0];document.querySelectorAll(".is-popup").length<=1&&(t.style.filter="blur(0px)"),this.popupBody.classList.remove("zoom-out-entrance"),this.popupBody.classList.add("zoom-in-exit"),this.container.classList.remove("is-popup"),setTimeout((function(){e.container.remove()}),300)}}],a=[{key:"show",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new e(r);return i.open(t,s),i}}],s&&n(t.prototype,s),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},9624:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});var r=s(3260);function i(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===window.snackbarQueue&&(window.snackbarQueue=[],this.queue=window.snackbarQueue)}var t,s,n;return t=e,s=[{key:"show",value:function(e,t){var s=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return r.Observable.create((function(r){var n=s.__createSnack({message:e,label:t,type:i.type}),a=n.buttonNode,o=(n.textNode,n.snackWrapper,n.sampleSnack);a.addEventListener("click",(function(e){r.onNext(a),r.onCompleted(),o.remove()})),s.__startTimer(i.duration,o)}))}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"error"};return this.show(e,t,Object.assign(Object.assign({},s),{type:"error"}))}},{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"success"};return this.show(e,t,Object.assign(Object.assign({},s),{type:"success"}))}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{duration:3e3,type:"info"};return this.show(e,t,Object.assign(Object.assign({},s),{type:"info"}))}},{key:"__startTimer",value:function(e,t){var s,r=function(){e>0&&!1!==e&&(s=setTimeout((function(){t.remove()}),e))};t.addEventListener("mouseenter",(function(){clearTimeout(s)})),t.addEventListener("mouseleave",(function(){r()})),r()}},{key:"__createSnack",value:function(e){var t=e.message,s=e.label,r=e.type,i=void 0===r?"info":r,n=document.getElementById("snack-wrapper")||document.createElement("div"),a=document.createElement("div"),o=document.createElement("p"),l=document.createElement("div"),c=document.createElement("button"),u="",d="";switch(i){case"info":u="text-white hover:bg-blue-400 bg-blue-500",d="bg-gray-900 text-white";break;case"error":u="text-red-700 hover:bg-white bg-white",d="bg-red-500 text-white";break;case"success":u="text-green-700 hover:bg-white bg-white",d="bg-green-500 text-white"}return o.textContent=t,s&&(c.textContent=s,c.setAttribute("class","px-3 py-2 shadow rounded uppercase ".concat(u)),l.appendChild(c)),a.appendChild(o),a.appendChild(l),a.setAttribute("class","md:rounded py-2 px-3 md:w-2/5 w-full z-10 md:my-2 shadow-lg flex justify-between items-center zoom-in-entrance anim-duration-300 ".concat(d)),n.appendChild(a),null===document.getElementById("snack-wrapper")&&(n.setAttribute("id","snack-wrapper"),n.setAttribute("class","absolute bottom-0 w-full flex justify-between items-center flex-col"),document.body.appendChild(n)),{snackWrapper:n,sampleSnack:a,buttonsWrapper:l,buttonNode:c,textNode:o}}}],s&&i(t.prototype,s),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},824:(e,t,s)=>{"use strict";var r=s(381),i=s.n(r);ns.date.moment=i()(ns.date.current),ns.date.interval=setInterval((function(){ns.date.moment.add(1,"seconds"),ns.date.current=i()(ns.date.current).add(1,"seconds").format("YYYY-MM-DD HH:mm:ss")}),1e3),ns.date.getNowString=function(){var e=Date.parse((new Date).toLocaleString("en-US",{timeZone:ns.date.timeZone}));return i()(e).format("YYYY-MM-DD HH:mm:ss")},ns.date.getMoment=function(){var e=Date.parse((new Date).toLocaleString("en-US",{timeZone:ns.date.timeZone}));return i()(e)}},6700:(e,t,s)=>{var r={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":4415,"./fy.js":4415,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=n,e.exports=i,i.id=6700},7949:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(381),i=s.n(r);const n={name:"ns-date-time-picker",props:["field","date"],data:function(){return{visible:!1,hours:0,minutes:0,currentView:"days",currentDay:void 0,moment:i(),months:new Array(11).fill("").map((function(e,t){return t})),daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},computed:{momentCopy:function(){return i()()}},watch:{visible:function(){var e=this;this.visible&&setTimeout((function(){e.$refs.hours.addEventListener("focus",(function(){this.select()})),e.$refs.minutes.addEventListener("focus",(function(){this.select()}))}),100)}},mounted:function(){var e=this;document.addEventListener("mousedown",(function(t){return e.checkClickedItem(t)})),this.field?this.currentDay=[void 0,"",null].includes(this.field.value)?i()():i()(this.field.value):this.currentDay=[void 0,"",null].includes(this.date)?i()():i()(this.date),console.log(this.date),this.hours=this.currentDay.format("HH"),this.minutes=this.currentDay.format("mm"),this.build()},methods:{__:s(7389).__,erase:function(){this.selectDate()},setYear:function(e){parseInt(e.srcElement.value)>0&&parseInt(e.srcElement.value)<9999&&(this.currentDay.year(e.srcElement.value),this.updateDateTime())},subYear:function(){parseFloat(this.currentDay.format("YYYY"))>0&&(this.currentDay.subtract(1,"year"),this.updateDateTime())},addYear:function(){this.currentDay.add(1,"year"),this.updateDateTime()},toggleView:function(e){var t=this;this.currentView=e,"years"===this.currentView&&setTimeout((function(){t.$refs.year.select()}),100)},setMonth:function(e){this.currentDay.month(e),this.updateDateTime()},detectHoursChange:function(){parseFloat(this.hours)<0&&(this.hours=0),parseFloat(this.hours)>23&&(this.hours=23),this.updateDateTime()},detectMinuteChange:function(){parseFloat(this.minutes)<0&&(this.minutes=0),parseFloat(this.minutes)>59&&(this.minutes=59),this.updateDateTime()},updateDateTime:function(){this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.build(),this.selectDate(this.currentDay)},checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){[void 0].includes(e)?(this.field&&(this.field.value=null),this.$emit("change",null)):(this.currentDay=e,this.currentDay.hours(this.hours),this.currentDay.minutes(this.minutes),this.field&&(this.field.value=this.currentDay.format("YYYY/MM/DD HH:mm")),this.$emit("change",this.field?this.field:this.currentDay))},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var s=this.calendar.length-1;if(this.calendar[s].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(i().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const a=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"picker mb-2"},[e.field?s("label",{staticClass:"block leading-5 font-medium text-gray-700"},[e._v(e._s(e.field.label))]):e._e(),e._v(" "),s("div",{staticClass:"rounded cursor-pointer bg-white px-1 py-1 flex items-center text-gray-700",class:e.field?"mt-1 border-2":"shadow",on:{click:function(t){e.visible=!e.visible}}},[s("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),e.currentDay&&e.field?s("span",{staticClass:"mx-1 text-sm"},[null!==e.field.value?s("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.field.value?s("span",[e._v("N/A")]):e._e()]):e._e(),e._v(" "),e.currentDay&&e.date?s("span",{staticClass:"mx-1 text-sm"},[null!==e.date?s("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD HH:mm")))]):e._e(),e._v(" "),null===e.date?s("span",[e._v("N/A")]):e._e()]):e._e()]),e._v(" "),e.field?s("p",{staticClass:"text-sm text-gray-500 py-1"},[e._v(e._s(e.field.description))]):e._e(),e._v(" "),e.visible?s("div",{staticClass:"relative z-10 h-0 w-0"},[s("div",{staticClass:"absolute w-72 shadow-lg rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col",class:e.field?"-mt-4":"mt-2"},["years"===e.currentView?s("div",{staticClass:"flex-auto"},[s("div",{staticClass:"p-2 flex flex items-center"},[s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[s("i",{staticClass:"las la-angle-left"})])]),e._v(" "),s("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[s("span",{staticClass:"mr-2 cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),s("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[s("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),s("div",{staticClass:"h-32 flex items-center justify-center text-gray-700"},[s("div",{staticClass:"rounded border-blue-400 border-2 flex w-2/3 overflow-hidden"},[s("button",{staticClass:"bg-blue-400 text-white px-4 py-2",on:{click:function(t){return e.subYear()}}},[s("i",{staticClass:"las la-minus"})]),e._v(" "),s("input",{ref:"year",staticClass:"p-2 w-24 text-center",attrs:{type:"text"},domProps:{value:e.currentDay.format("YYYY")},on:{change:function(t){return e.setYear(t)}}}),e._v(" "),s("button",{staticClass:"bg-blue-400 text-white px-4 py-2",on:{click:function(t){return e.addYear()}}},[s("i",{staticClass:"las la-plus"})])])])]):e._e(),e._v(" "),"months"===e.currentView?s("div",{staticClass:"flex-auto"},[s("div",{staticClass:"p-2 flex items-center"},[s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[s("i",{staticClass:"las la-angle-left"})])]),e._v(" "),s("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[s("span",{staticClass:"mr-2 border-b border-blue-400 border-dashed"},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),s("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[s("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),s("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-1 gap-0 text-gray-700"},e._l(e.months,(function(t,r){return s("div",{key:r,staticClass:"h-8 flex justify-center items-center text-sm"},[[s("div",{staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:e.momentCopy.month(t).format("MM")===e.currentDay.format("MM")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(s){return e.setMonth(t)}}},[e._v("\n                                "+e._s(e.momentCopy.format("MMM"))+"\n                            ")])]],2)})),0)]):e._e(),e._v(" "),"days"===e.currentView?s("div",{staticClass:"flex-auto"},[s("div",{staticClass:"p-2 flex items-center"},[s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.subMonth()}}},[s("i",{staticClass:"las la-angle-left"})])]),e._v(" "),s("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[s("span",{staticClass:"mr-2 cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("months")}}},[e._v(e._s(e.currentDay.format("MMM")))]),e._v(" "),s("span",{staticClass:"cursor-pointer border-b border-blue-400 border-dashed",on:{click:function(t){return e.toggleView("years")}}},[e._v(e._s(e.currentDay.format("YYYY")))])]),e._v(" "),s("div",[s("button",{staticClass:"w-8 h-8 border hover:bg-gray-100 rounded",on:{click:function(t){return e.addMonth()}}},[s("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),s("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thr")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(t,r){return s("div",{key:r,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},e._l(e.daysOfWeek,(function(r,i){return s("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(t,(function(t,i){return[t.dayOfWeek===r?s("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:t.date.format("DD")===e.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(s){return e.selectDate(t.date)}}},[e._v("\n                                "+e._s(t.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2):e._e(),e._v(" "),s("div",{staticClass:"border-t border-gray-200 w-full p-2"},[s("div",{staticClass:"-mx-1 flex justify-between"},[s("div",{staticClass:"px-1"},[s("div",{staticClass:"-mx-1 flex"},[e.field?s("div",{staticClass:"px-1"},[s("button",{staticClass:"border hover:text-white rounded w-8 h-8 flex items-center justify-center hover:bg-blue-500",on:{click:function(t){return e.erase()}}},[s("i",{staticClass:"las la-trash"})])]):e._e(),e._v(" "),"days"!==e.currentView?s("div",{staticClass:"px-1"},[s("button",{staticClass:"border hover:text-white rounded w-8 h-8 flex items-center justify-center hover:bg-red-500",on:{click:function(t){return e.toggleView("days")}}},[s("i",{staticClass:"las la-sign-out-alt"})])]):e._e()])]),e._v(" "),s("div",{staticClass:"px-2"},[s("div",{staticClass:"rounded flex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.hours,expression:"hours"}],ref:"hours",staticClass:"w-12 p-1 text-center border border-gray-200 active:border-blue-400",attrs:{placeholder:"HH",type:"number"},domProps:{value:e.hours},on:{change:function(t){return e.detectHoursChange(t)},input:function(t){t.target.composing||(e.hours=t.target.value)}}}),e._v(" "),s("span",{staticClass:"mx-1"},[e._v(":")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.minutes,expression:"minutes"}],ref:"minutes",staticClass:"w-12 p-1 text-center border border-gray-200 active:border-blue-400",attrs:{placeholder:"mm",type:"number"},domProps:{value:e.minutes},on:{change:function(t){return e.detectMinuteChange(t)},input:function(t){t.target.composing||(e.minutes=t.target.value)}}})])])])])])]):e._e()])}),[],!1,null,null,null).exports},1544:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(381),i=s.n(r);const n={name:"ns-datepicker",props:["label","date"],data:function(){return{visible:!1,currentDay:null,daysOfWeek:new Array(7).fill("").map((function(e,t){return t})),calendar:[[]]}},mounted:function(){document.addEventListener("click",this.checkClickedItem),this.currentDay=[void 0,null].includes(this.date)?i()():i()(this.date),this.build()},methods:{__:s(7389).__,checkClickedItem:function(e){!this.$el.contains(e.srcElement)&&this.visible&&(this.visible=!1)},selectDate:function(e){this.currentDay=e,this.visible=!1,this.$emit("change",e)},subMonth:function(){this.currentDay.subtract(1,"month"),this.build()},addMonth:function(){this.currentDay.add(1,"month"),this.build()},resetCalendar:function(){this.calendar=[[]]},build:function(){this.resetCalendar();this.currentDay.clone().startOf("month");for(var e=this.currentDay.clone().startOf("month"),t=this.currentDay.clone().endOf("month");;){0===e.day()&&this.calendar[0].length>0&&this.calendar.push([]);var s=this.calendar.length-1;if(this.calendar[s].push({date:e.clone(),dayOfWeek:e.day(),isToday:e.isSame(i().now(),"day")}),e.isSame(t,"day"))break;e.add(1,"day")}}}};const a=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"picker"},[s("div",{staticClass:"rounded cursor-pointer bg-white shadow px-1 py-1 flex items-center text-gray-700",on:{click:function(t){e.visible=!e.visible}}},[s("i",{staticClass:"las la-clock text-2xl"}),e._v(" "),s("span",{staticClass:"mx-1 text-sm"},[s("span",[e._v(e._s(e.label||e.__("Date"))+" : ")]),e._v(" "),e.currentDay?s("span",[e._v(e._s(e.currentDay.format("YYYY/MM/DD")))]):e._e(),e._v(" "),null===e.currentDay?s("span",[e._v(e._s(e.__("N/A")))]):e._e()])]),e._v(" "),e.visible?s("div",{staticClass:"relative h-0 w-0 -mb-2"},[s("div",{staticClass:"w-72 mt-2 shadow rounded bg-white anim-duration-300 zoom-in-entrance flex flex-col"},[s("div",{staticClass:"flex-auto"},[s("div",{staticClass:"p-2 flex items-center"},[s("div",[s("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.subMonth()}}},[s("i",{staticClass:"las la-angle-left"})])]),e._v(" "),s("div",{staticClass:"flex flex-auto font-semibold text-gray-700 justify-center"},[e._v(e._s(e.currentDay.format("MMM"))+" "+e._s(e.currentDay.format("YYYY")))]),e._v(" "),s("div",[s("button",{staticClass:"w-8 h-8 bg-gray-400 rounded",on:{click:function(t){return e.addMonth()}}},[s("i",{staticClass:"las la-angle-right"})])])]),e._v(" "),s("div",{staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},[s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sun")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Mon")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Tue")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Wed")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Thr")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Fri")))]),e._v(" "),s("div",{staticClass:"border border-gray-200 h-8 flex justify-center items-center text-sm"},[e._v(e._s(e.__("Sat")))])]),e._v(" "),e._l(e.calendar,(function(t,r){return s("div",{key:r,staticClass:"grid grid-flow-row grid-cols-7 grid-rows-1 gap-0 text-gray-700"},e._l(e.daysOfWeek,(function(r,i){return s("div",{key:i,staticClass:"h-8 flex justify-center items-center text-sm"},[e._l(t,(function(t,i){return[t.dayOfWeek===r?s("div",{key:i,staticClass:"h-full w-full flex items-center justify-center cursor-pointer",class:t.date.format("DD")===e.currentDay.format("DD")?"bg-blue-400 text-white border border-blue-500":"hover:bg-gray-100 border border-gray-200",on:{click:function(s){return e.selectDate(t.date)}}},[e._v("\n                                "+e._s(t.date.format("DD"))+"\n                            ")]):e._e()]}))],2)})),0)}))],2),e._v(" "),s("div")])]):e._e()])}),[],!1,null,null,null).exports},3516:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={name:"ns-notice",props:["color"],computed:{actualColor:function(){return this.color||"blue"}}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-4",class:"bg-"+e.actualColor+"-100 border-l-4 border-"+e.actualColor+"-500 text-"+e.actualColor+"-700",attrs:{role:"alert"}},[s("p",{staticClass:"font-bold"},[e._t("title")],2),e._v(" "),s("p",[e._t("description")],2)])}),[],!1,null,null,null).exports},9499:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}const n={name:"ns-numpad",props:["value","currency","floating","limit"],data:function(){return{number:parseInt(1+new Array(parseInt(ns.currency.ns_currency_precision)).fill("").map((function(e){return 0})).join("")),screenValue:0,order:null,cursor:parseInt(ns.currency.ns_currency_precision),orderSubscription:null,allSelected:!0,keys:[].concat(r([7,8,9].map((function(e){return{identifier:e,value:e}}))),r([4,5,6].map((function(e){return{identifier:e,value:e}}))),r([1,2,3].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){this.floating&&this.value>0?this.screenValue=parseFloat(this.value/this.number):this.screenValue=0},watch:{value:function(){this.value.toString().length>0&&(this.floating?this.screenValue=Math.round(this.value*this.number).toString():this.screenValue=this.value)}},methods:{increaseBy:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));this.screenValue=(parseFloat(e.value)*t+(parseFloat(this.screenValue)||0)).toString(),this.allSelected=!1},inputValue:function(e){var t=parseInt(1+new Array(this.cursor).fill("").map((function(e){return 0})).join(""));if("next"!==e.identifier){if("backspace"===e.identifier)this.allSelected?(this.screenValue="0",this.allSelected=!1):this.screenValue=this.screenValue.toString().substr(0,this.screenValue.length-1);else if(e.value.toString().match(/^\d+$/)){if(this.limit>0&&this.screenValue.length>=this.limit)return;this.allSelected?(this.screenValue=e.value.toString(),this.allSelected=!1):(this.screenValue+=""+e.value.toString(),"percentage"===this.mode&&(this.screenValue=this.screenValue>100?100:this.screenValue))}"0"===this.screenValue&&(this.screenValue="");var s=this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/this.number):this.screenValue;this.$emit("changed",s)}else this.$emit("next",this.floating&&this.screenValue.length>0?parseFloat(this.screenValue/t):this.screenValue)}}};const a=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"grid grid-flow-row grid-cols-3 gap-2 grid-rows-3",staticStyle:{padding:"1px"},attrs:{id:"numpad"}},[e._l(e.keys,(function(t,r){return s("div",{key:r,staticClass:"select-none hover:bg-gray-400 hover:text-gray-800 bg-gray-300 text-2xl text-gray-700 border h-16 flex items-center justify-center cursor-pointer",staticStyle:{margin:"-1px"},on:{click:function(s){return e.inputValue(t)}}},[void 0!==t.value?s("span",[e._v(e._s(t.value))]):e._e(),e._v(" "),t.icon?s("i",{staticClass:"las",class:t.icon}):e._e()])})),e._v(" "),e._t("numpad-footer")],2)}),[],!1,null,null,null).exports},5834:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={name:"ns-paginate",props:["pagination"],data:function(){return{page:1,path:""}},mounted:function(){this.path=this.pagination.path},computed:{getPagination:function(){return this.pagination?this.pageNumbers(this.pagination.last_page,this.pagination.current_page):[]}},methods:{gotoPage:function(e){this.page=e,this.$emit("load","".concat(this.path,"?page=").concat(this.page))},pageNumbers:function(e,t){var s=[];t-3>1&&s.push(1,"...");for(var r=1;r<=e;r++)t+3>r&&t-3<r&&s.push(r);return t+3<e&&s.push("...",e),console.log(s),s.filter((function(e){return e>0||"string"==typeof e}))}}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex -mx-1",attrs:{id:"pagination"}},[e.pagination.current_page?[s("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.first_page)}}},[s("i",{staticClass:"las la-angle-double-left"})]),e._v(" "),e._l(e.getPagination,(function(t,r){return["..."!==e.page?s("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full hover:bg-blue-400 hover:text-white",class:e.page==t?"bg-blue-400 text-white":"bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"},on:{click:function(s){return e.gotoPage(t)}}},[e._v(e._s(t))]):e._e(),e._v(" "),"..."===e.page?s("a",{key:r,staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700",attrs:{href:"javascript:void(0)"}},[e._v("...")]):e._e()]})),e._v(" "),s("a",{staticClass:"mx-1 flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-700 hover:bg-blue-400 hover:text-white shadow",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.gotoPage(e.pagination.last_page)}}},[s("i",{staticClass:"las la-angle-double-right"})])]:e._e()],2)}),[],!1,null,null,null).exports},8515:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(9671),i=s(8603),n=s(7389);const a={name:"ns-media",props:["popup"],components:{VueUpload:s(2948)},data:function(){return{pages:[{label:(0,n.__)("Upload"),name:"upload",selected:!1},{label:(0,n.__)("Gallery"),name:"gallery",selected:!0}],resources:[],response:{data:[],current_page:0,from:0,to:0,next_page_url:"",prev_page_url:"",path:"",per_page:0,total:0,last_page:0,first_page:0},queryPage:1,bulkSelect:!1,files:[]}},mounted:function(){this.popupCloser();var e=this.pages.filter((function(e){return"gallery"===e.name}))[0];this.select(e)},watch:{files:function(){this.files.filter((function(e){return"0.00"===e.progress})).length>0&&(this.$refs.upload.active=!0)}},computed:{postMedia:function(){return r.kq.applyFilters("http-client-url","/api/nexopos/v4/medias")},currentPage:function(){return this.pages.filter((function(e){return e.selected}))[0]},hasOneSelected:function(){return this.response.data.filter((function(e){return e.selected})).length>0},selectedResource:function(){return this.response.data.filter((function(e){return e.selected}))[0]},csrf:function(){return ns.authentication.csrf},isPopup:function(){return void 0!==this.$popup},user_id:function(){return this.isPopup&&this.$popupParams.user_id||0}},methods:{popupCloser:i.Z,__:n.__,cancelBulkSelect:function(){this.bulkSelect=!1,this.response.data.forEach((function(e){return e.selected=!1}))},deleteSelected:function(){var e=this;if(confirm("Delete selected resources ?"))return r.ih.post("/api/nexopos/v4/medias/bulk-delete",{ids:this.response.data.filter((function(e){return e.selected})).map((function(e){return e.id}))}).subscribe((function(t){r.kX.success(t.message).subscribe(),e.loadGallery()}),(function(e){r.kX.error(e.message).subscribe()}))},select:function(e){this.pages.forEach((function(e){return e.selected=!1})),e.selected=!0,"gallery"===e.name&&this.loadGallery()},loadGallery:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=null===t?this.queryPage:t,this.queryPage=t,r.ih.get("/api/nexopos/v4/medias?page=".concat(t,"&user_id=").concat(this.user_id)).subscribe((function(t){t.data.forEach((function(e){return e.selected=!1})),e.response=t}))},useSelectedEntries:function(){this.$popupParams.resolve({event:"use-selected",value:this.response.data.filter((function(e){return e.selected}))}),this.$popup.close()},selectResource:function(e){var t=this;this.bulkSelect||this.response.data.forEach((function(s,r){r!==t.response.data.indexOf(e)&&(s.selected=!1)})),e.selected=!e.selected}}};const o=(0,s(1900).Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex bg-white shadow-xl overflow-hidden",class:e.isPopup?"w-6/7-screen h-6/7-screen":"w-full h-full"},[s("div",{staticClass:"sidebar w-48 bg-gray-200 h-full flex-shrink-0"},[s("h3",{staticClass:"text-xl font-bold text-gray-800 my-4 text-center"},[e._v(e._s(e.__("Medias Manager")))]),e._v(" "),s("ul",e._l(e.pages,(function(t,r){return s("li",{key:r,staticClass:"hover:bg-white py-2 px-3 text-gray-700 border-l-8 cursor-pointer",class:t.selected?"bg-white border-blue-400":"border-transparent",on:{click:function(s){return e.select(t)}}},[e._v(e._s(t.label))])})),0)]),e._v(" "),"upload"===e.currentPage.name?s("div",{staticClass:"content w-full overflow-hidden flex"},[s("vue-upload",{ref:"upload",staticClass:" flex-auto flex bg-white shadow",attrs:{drop:!0,multiple:!0,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":e.csrf},accept:"image/*","post-action":e.postMedia},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[s("div",{staticClass:"border-dashed border-2 flex flex-auto m-2 p-2 flex-col border-blue-400 items-center justify-center"},[s("h3",{staticClass:"text-3xl font-bold text-gray-600 mb-4"},[e._v(e._s(e.__("Click Here Or Drop Your File To Upload")))]),e._v(" "),s("div",{staticClass:"rounded w-full md:w-2/3 text-gray-700 bg-gray-500 h-56 overflow-y-auto p-2"},[s("ul",e._l(e.files,(function(t,r){return s("li",{key:r,staticClass:"p-2 mb-2 shadow bg-white flex items-center justify-between rounded"},[s("span",[e._v(e._s(t.name))]),e._v(" "),s("span",{staticClass:"rounded bg-blue-400 flex items-center justify-center text-xs p-2"},[e._v(e._s(t.progress)+"%")])])})),0)])])])],1):e._e(),e._v(" "),"gallery"===e.currentPage.name?s("div",{staticClass:"content flex-col w-full overflow-hidden flex"},[e.popup?s("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[s("div"),e._v(" "),s("div",[s("ns-close-button",{on:{click:function(t){return e.popup.close()}}})],1)]):e._e(),e._v(" "),s("div",{staticClass:"flex flex-auto overflow-hidden"},[s("div",{staticClass:"bg-white shadow content flex flex-auto flex-col overflow-y-auto",attrs:{id:"grid"}},[s("div",{staticClass:"flex flex-auto"},[s("div",{staticClass:"p-2 overflow-x-auto"},[s("div",{staticClass:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-6"},e._l(e.response.data,(function(t,r){return s("div",{key:r},[s("div",{staticClass:"p-2"},[s("div",{staticClass:"rounded-lg w-32 h-32 bg-gray-500 m-2 overflow-hidden flex items-center justify-center",class:t.selected?"ring-4 ring-blue-500 ring-opacity-50":"",on:{click:function(s){return e.selectResource(t)}}},[s("img",{staticClass:"object-cover h-full",attrs:{src:t.sizes.thumb,alt:t.name}})])])])})),0)]),e._v(" "),0===e.response.data.length?s("div",{staticClass:"flex flex-auto items-center justify-center"},[s("h3",{staticClass:"text-2xl text-gray-600 font-bold"},[e._v(e._s(e.__("Nothing has already been uploaded")))])]):e._e()])]),e._v(" "),!e.bulkSelect&&e.hasOneSelected?s("div",{staticClass:"w-64 flex-shrink-0 bg-gray-200",attrs:{id:"preview"}},[s("div",{staticClass:"h-64 bg-gray-600 flex items-center justify-center"},[s("img",{attrs:{src:e.selectedResource.sizes.thumb,alt:e.selectedResource.name}})]),e._v(" "),s("div",{staticClass:"p-4 text-gray-700 text-sm",attrs:{id:"details"}},[s("p",{staticClass:"flex flex-col mb-2"},[s("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("File Name"))+": ")]),s("span",[e._v(e._s(e.selectedResource.name))])]),e._v(" "),s("p",{staticClass:"flex flex-col mb-2"},[s("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("Uploaded At"))+":")]),s("span",[e._v(e._s(e.selectedResource.created_at))])]),e._v(" "),s("p",{staticClass:"flex flex-col mb-2"},[s("strong",{staticClass:"font-bold block"},[e._v(e._s(e.__("By"))+" :")]),s("span",[e._v(e._s(e.selectedResource.user.username))])])])]):e._e()]),e._v(" "),s("div",{staticClass:"p-2 flex flex-shrink-0 justify-between bg-gray-200"},[s("div",{staticClass:"flex -mx-2 flex-shrink-0"},[s("div",{staticClass:"px-2 flex-shrink-0 flex"},[s("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[e.bulkSelect?s("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){return e.cancelBulkSelect()}}},[s("i",{staticClass:"las la-times"})]):e._e(),e._v(" "),e.hasOneSelected&&!e.bulkSelect?s("button",{staticClass:"bg-white hover:bg-blue-400 hover:text-white py-2 px-3",on:{click:function(t){e.bulkSelect=!0}}},[s("i",{staticClass:"las la-check-circle"})]):e._e(),e._v(" "),e.hasOneSelected?s("button",{staticClass:"bg-red-400 text-white hover:bg-red-500 hover:text-white py-2 px-3",on:{click:function(t){return e.deleteSelected()}}},[s("i",{staticClass:"las la-trash"})]):e._e()])])]),e._v(" "),s("div",{staticClass:"flex-shrink-0 -mx-2 flex"},[s("div",{staticClass:"px-2"},[s("div",{staticClass:"rounded shadow overflow-hidden border-blue-400 flex text-sm text-gray-700"},[s("button",{staticClass:"p-2",class:1===e.response.current_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:1===e.response.current_page},on:{click:function(t){return e.loadGallery(e.response.current_page-1)}}},[e._v(e._s(e.__("Previous")))]),e._v(" "),s("hr",{staticClass:"border-r border-gray-700"}),e._v(" "),s("button",{staticClass:"p-2",class:e.response.current_page===e.response.last_page?"bg-gray-100 text-gray-600 cursor-not-allowed":"bg-white hover:bg-blue-400 hover:text-white",attrs:{disabled:e.response.current_page===e.response.last_page},on:{click:function(t){return e.loadGallery(e.response.current_page+1)}}},[e._v(e._s(e.__("Next")))])])]),e._v(" "),e.popup&&e.hasOneSelected?s("div",{staticClass:"px-2"},[s("button",{staticClass:"rounded shadow p-2 bg-blue-400 text-white text-sm",on:{click:function(t){return e.useSelectedEntries()}}},[e._v(e._s(e.__("Use Selected")))])]):e._e()])])]):e._e()])}),[],!1,null,null,null).exports},6189:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(void 0!==e.$popupParams.onAction&&e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:s(7389).__,emitAction:function(e){void 0!==this.$popupParams.onAction&&this.$popupParams.onAction(e),this.$popup.close()}}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-6/7-screen md:w-4/7-screen lg:w-3/7-screen flex flex-col bg-white shadow-lg",class:e.size,attrs:{id:"popup"}},[s("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[e.title?s("h2",{staticClass:"text-3xl font-body text-gray-700"},[e._v(e._s(e.title))]):e._e(),e._v(" "),s("p",{staticClass:"py-4 text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),s("div",{staticClass:"flex border-t border-gray-200 text-gray-700 justify-end items-center p-2"},[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))])],1)])}),[],!1,null,null,null).exports},8774:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={data:function(){return{title:"",message:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.onAction(!1),e.$popup.close())}))},methods:{__:s(7389).__,emitAction:function(e){this.$popupParams.onAction(e),this.$popup.close()}}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-col bg-white shadow-lg w-5/7-screen md:w-4/7-screen lg:w-2/7-screen",class:e.size,attrs:{id:"popup"}},[s("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-4"},[s("h2",{staticClass:"text-xl md:text-3xl font-body text-gray-700 text-center"},[e._v(e._s(e.title))]),e._v(" "),s("p",{staticClass:"py-4 text-sm md:text-base text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),s("div",{staticClass:"flex border-t border-gray-200 text-gray-700"},[s("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Yes")))]),e._v(" "),s("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),s("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!1)}}},[e._v(e._s(e.__("No")))])])])}),[],!1,null,null,null).exports},2004:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={name:"ns-pos-loading-popup"};const i=(0,s(1900).Z)(r,(function(){var e=this.$createElement;return(this._self._c||e)("ns-spinner")}),[],!1,null,null,null).exports},2083:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(9671),i=s(7389);function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}const o={data:function(){return{finalValue:1,virtualStock:null,allSelected:!0,isLoading:!1,keys:[].concat(n([1,2,3].map((function(e){return{identifier:e,value:e}}))),n([4,5,6].map((function(e){return{identifier:e,value:e}}))),n([7,8,9].map((function(e){return{identifier:e,value:e}}))),[{identifier:"backspace",icon:"la-backspace"},{identifier:0,value:0},{identifier:"next",icon:"la-share"}])}},mounted:function(){var e=this;this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())})),this.$popupParams.quantity&&(this.finalValue=this.$popupParams.quantity),document.addEventListener("keyup",this.handleKeyPress)},destroyed:function(){document.removeEventListener("keypress",this.handleKeyPress)},methods:{__:i.__,handleKeyPress:function(e){13===e.keyCode&&this.inputValue({identifier:"next"})},inputValue:function(e){if("next"===e.identifier){var t=this.$popupParams,s=(t.product,t.data,parseFloat(this.finalValue));if(0===s)return r.kX.error((0,i.__)("Please provide a quantity")).subscribe();this.resolve({quantity:s})}else"backspace"===e.identifier?this.allSelected?(this.finalValue=0,this.allSelected=!1):(this.finalValue=this.finalValue.toString(),this.finalValue=this.finalValue.substr(0,this.finalValue.length-1)||0):this.allSelected?(this.finalValue=e.value,this.finalValue=parseFloat(this.finalValue),this.allSelected=!1):(this.finalValue+=""+e.value,this.finalValue=parseFloat(this.finalValue))},resolve:function(e){this.$popupParams.resolve(e),this.$popup.close()}}};const l=(0,s(1900).Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white shadow min-h-2/5-screen w-3/4-screen md:w-3/5-screen lg:w-3/5-screen xl:w-2/5-screen relative"},[s("div",{staticClass:"flex-shrink-0 py-2 border-b border-gray-200"},[s("h1",{staticClass:"text-xl font-bold text-gray-700 text-center"},[e._v(e._s(e.__("Define Quantity")))])]),e._v(" "),s("div",{staticClass:"h-16 border-b bg-gray-800 text-white border-gray-200 flex items-center justify-center",attrs:{id:"screen"}},[s("h1",{staticClass:"font-bold text-3xl"},[e._v(e._s(e.finalValue))])]),e._v(" "),s("div",{staticClass:"grid grid-flow-row grid-cols-3 grid-rows-3",attrs:{id:"numpad"}},e._l(e.keys,(function(t,r){return s("div",{key:r,staticClass:"hover:bg-blue-400 hover:text-white hover:border-blue-600 text-xl font-bold border border-gray-200 h-24 flex items-center justify-center cursor-pointer",on:{click:function(s){return e.inputValue(t)}}},[void 0!==t.value?s("span",[e._v(e._s(t.value))]):e._e(),e._v(" "),t.icon?s("i",{staticClass:"las",class:t.icon}):e._e()])})),0)])}),[],!1,null,null,null).exports},3793:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});const r={data:function(){return{title:"",message:"",input:""}},computed:{size:function(){return this.$popupParams.size||"h-full w-full"}},mounted:function(){var e=this;this.input=this.$popupParams.input||"",this.title=this.$popupParams.title,this.message=this.$popupParams.message,this.$popup.event.subscribe((function(t){"click-overlay"===t.event&&(e.$popupParams.reject(!1),e.$popup.close())}))},methods:{__:s(7389).__,emitAction:function(e){this.$popupParams.onAction(e?this.input:e),this.$popup.close()},reject:function(e){void 0!==this.$popupParams.reject&&this.$popupParams.reject(e),this.$popup.close()}}};const i=(0,s(1900).Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-5/7-screen md:w-3/7-screen flex flex-col bg-white shadow-lg",class:e.size,attrs:{id:"popup"}},[s("div",{staticClass:"flex items-center justify-center flex-col flex-auto p-2"},[s("h2",{staticClass:"text-3xl font-body text-gray-700"},[e._v(e._s(e.title))]),e._v(" "),s("p",{staticClass:"w-full md:mx-auto md:w-2/3 py-4 text-gray-600 text-center"},[e._v(e._s(e.message))])]),e._v(" "),s("div",{staticClass:"p-2"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"text-gray-700 w-full border-2 p-2 border-blue-400",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"flex border-t border-gray-200 text-gray-700"},[s("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.emitAction(!0)}}},[e._v(e._s(e.__("Ok")))]),e._v(" "),s("hr",{staticClass:"border-r border-gray-200"}),e._v(" "),s("button",{staticClass:"hover:bg-gray-100 flex-auto w-1/2 h-16 flex items-center justify-center uppercase",on:{click:function(t){return e.reject(!1)}}},[e._v(e._s(e.__("Cancel")))])])])}),[],!1,null,null,null).exports},7479:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(8603),i=s(7389);const n={data:function(){return{value:[],options:[],label:null,type:"select"}},computed:{},mounted:function(){this.popupCloser(),this.value=this.$popupParams.value||[],this.options=this.$popupParams.options,this.label=this.$popupParams.label,this.type=this.$popupParams.type||this.type},methods:{popupCloser:r.Z,__:i.__,toggle:function(e){var t=this.value.indexOf(e);-1===t?this.value.unshift(e):this.value.splice(t,1)},isSelected:function(e){return this.value.indexOf(e)>=0},close:function(){this.$popupParams.reject(!1),this.$popup.close()},select:function(e){void 0!==e&&(this.value=[e]),this.$popupParams.resolve(this.value),this.close()}}};const a=(0,s(1900).Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"shadow-xl bg-white w-6/7-screen md:w-4/7-screen lg:w-3/7-screen overflow-hidden"},[s("div",{staticClass:"p-2 flex justify-between border-b border-gray-200"},[s("span",{staticClass:"text-semibold text-gray-700"},[e._v("\n            "+e._s(e.label)+"\n        ")]),e._v(" "),s("div",[s("ns-close-button",{on:{click:function(t){return e.close()}}})],1)]),e._v(" "),s("div",{staticClass:"flex-auto overflow-y-auto"},[s("ul",["select"===e.type?e._l(e.options,(function(t){return s("li",{key:t.value,staticClass:"p-2 border-b border-gray-200 text-gray-700 cursor-pointer hover:bg-gray-100",on:{click:function(s){return e.select(t)}}},[e._v(e._s(t.label))])})):e._e(),e._v(" "),"multiselect"===e.type?e._l(e.options,(function(t){return s("li",{key:t.value,staticClass:"p-2 border-b text-gray-700 cursor-pointer hover:bg-gray-100",class:e.isSelected(t)?"bg-blue-100 border-blue-200":"border-gray-200",on:{click:function(s){return e.toggle(t)}}},[e._v(e._s(t.label))])})):e._e()],2)]),e._v(" "),"multiselect"===e.type?s("div",{staticClass:"flex justify-between"},[s("div"),e._v(" "),s("div",[s("ns-button",{attrs:{type:"info"},on:{click:function(t){return e.select()}}},[e._v(e._s(e.__("Select")))])],1)]):e._e()])}),[],!1,null,null,null).exports}},e=>{e.O(0,[898],(()=>{return t=4803,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=app.min.js.map